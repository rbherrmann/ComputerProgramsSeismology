#!/bin/sh


#####
#       define the color palete for elevation
#       MIN_ELV R G B MAX_ELEV R G B
#       (from Chuck Ammon)
#####
cat > map.cpt << EOF
-1000   100     200     255     -500    100     200     255
-500    150     225     255     0       150     225     255
0       100     150     100     30      100     150     100
30      125     175     125     60      125     175     125
60      150     200     150     122     150     200     150
122     175     225     175     183     175     225     175
183     200     255     200     244     200     255     200
244     212     255     212     305     212     255     212
305     255     255     225     457     255     255     225
457     255     225     175     610     255     225     175
610     255     225     125     702     255     225     125
702     255     175     75      914     255     175     75
914     200     150     50      1219    200     150     50
1219    175     125     50      1450    175     125     50
1450    150     100     50      1700    150     100     50
1700    150     125     100     1981    150     125     100
1981    125     125     125     2134    125     125     125
2134    150     150     150     2438    150     150     150
2438    175     175     175     2743    175     175     175
2743    200     200     200     3048    200     200     200
3048    233     233     233     9000    233     233     233
B       100     200     255
F       100     200     255
EOF

#####
#    set GMT defaults
#####
# Output format in longitude [-180, 180] 
# with two decimal points. For more precision used ddd.xxx,
# for less ddd
# If you do not get a good conversion to PNG, the EPS BoundingBox is wrong.
# Is is set for a4 paper. change the PS_MEDIA or PS_SCALE_X PS_SCALE_Y
gmt gmtset MAP_FRAME_TYPE FANCY FORMAT_GEO_MAP ddd.xx  PROJ_LENGTH_UNIT c PS_MEDIA a4 PS_SCALE_X 0.8 PS_SCALE_Y 0.8 

#####
#    Define the default name of the PostScript output
#####
FNAME="map5.eps"


#####
#    Define map bounds: MINLON/MAXLON/MINLAT/MAXLAT 
#####
LATLON="0.386350/0.792000/40.327999/40.595200"

#####
#    Define raster for topography:  
#####
GRDRAS="1"

#####
#    Define Mercalli projection: Center_lon/Center_Lat/Plot_Width   
#####
PROJ="M0.589175/40.461601/15c"
rm -f ${FNAME}

#####
#    Define Coastline resolution: one of fhilc 
#    (f)ull, (h)igh, (i)ntermediate, (l)ow, and (c)rude)
#  . The resolution drops off by 80% between data sets.
#####
RESCOAST="f"

#####
#    Define Ticmark interval 
#####
TICS="a0.100000g0/a0.100000g0WSne"

#####
#    Define epicenter symbol and size  
#####
EPISYM="A0.50c"
EPICOLOR="255/255/0"

#####
#    Define station symbol and size  
#####
STASYM="c0.50c"
STACOLOR="255/0/0"

#####
#    Define boundaries for pscoast 
#    1 = National boundaries 
#    2 = State boundaries within the Americas 
#    3 = Marine boundaries 
#    a = All boundaries (1-3) pscoast 
#####
BDRYS="a"

#####
#    Define resolution for output of grdsample 
#####
RESOUT="0.25m"

gmt pscoast -P -W  -J${PROJ} -R${LATLON} -B${TICS} -G240  -K  -N${BDRYS} -D${RESCOAST} -A2500  -V   > ${FNAME}

#####
#    PLOT EPICENTER LOCATIONS
#####
gmt psxy -P -J${PROJ} -R${LATLON} -O -: -S${EPISYM} -W0.8 -G${EPICOLOR} -V -K   >> ${FNAME} << EOF
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
40.377998 0.742000
EOF


#####
#    PLOT STATION LOCATIONS
#####
gmt psxy -P -J${PROJ} -R${LATLON} -O -: -S${STASYM} -W0.8 -G${STACOLOR} -V -K >> ${FNAME} << EOF
40.521500 0.509015
40.521500 0.509015
40.545200 0.436350
40.545200 0.436350
40.541100 0.452162
40.541100 0.452162
40.535500 0.468117
40.535500 0.468117
40.530998 0.483270
40.530998 0.483270
40.527100 0.499408
40.527100 0.499408
40.518902 0.513535
40.518902 0.513535
40.510399 0.527241
40.510399 0.527241
40.501801 0.540944
40.501801 0.540944
40.493198 0.554647
40.493198 0.554647
40.484699 0.568350
40.484699 0.568350
40.476101 0.582053
40.476101 0.582053
40.467602 0.595756
40.467602 0.595756
40.459000 0.609459
40.459000 0.609459
40.450401 0.623161
40.450401 0.623161
40.441898 0.636864
40.441898 0.636864
40.433300 0.650567
40.433300 0.650567
40.424702 0.664270
40.424702 0.664270
40.416199 0.677973
40.416199 0.677973
40.407600 0.691676
40.407600 0.691676
40.398998 0.705379
40.398998 0.705379
EOF

#####
#  This will draw a box in black -Wblack
#  The box will be filled with white -G255/255/25
#  the text is 10 point, Helvetica, black, aligned Left Bottom and angle 0
#  To just draw the text remove -G255/255/255 -W0/0/0 from the command line
#####
gmt pstext -P -J${PROJ} -R${LATLON} -O -:  -V -Dj0.1i/0.1i -G255/255/255 -F+f10p,Helvetica,black+jLB+a0 -Wblack  >> ${FNAME} << EOF
40.521500 0.509015 C0100   
40.521500 0.509015 C0100   
40.545200 0.436350 C0250   
40.545200 0.436350 C0250   
40.541100 0.452162 C0400   
40.541100 0.452162 C0400   
40.535500 0.468117 C0550   
40.535500 0.468117 C0550   
40.530998 0.483270 C0700   
40.530998 0.483270 C0700   
40.527100 0.499408 C0850   
40.527100 0.499408 C0850   
40.518902 0.513535 C1050   
40.518902 0.513535 C1050   
40.510399 0.527241 C1200   
40.510399 0.527241 C1200   
40.501801 0.540944 C1350   
40.501801 0.540944 C1350   
40.493198 0.554647 C1500   
40.493198 0.554647 C1500   
40.484699 0.568350 C1650   
40.484699 0.568350 C1650   
40.476101 0.582053 C1800   
40.476101 0.582053 C1800   
40.467602 0.595756 C1950   
40.467602 0.595756 C1950   
40.459000 0.609459 C2100   
40.459000 0.609459 C2100   
40.450401 0.623161 C2250   
40.450401 0.623161 C2250   
40.441898 0.636864 C2400   
40.441898 0.636864 C2400   
40.433300 0.650567 C2550   
40.433300 0.650567 C2550   
40.424702 0.664270 C2700   
40.424702 0.664270 C2700   
40.416199 0.677973 C2850   
40.416199 0.677973 C2850   
40.407600 0.691676 C3000   
40.407600 0.691676 C3000   
40.398998 0.705379 C3150   
40.398998 0.705379 C3150   
EOF


######
#     Cleanup
######
rm -f map.grd cmap.grd MA.grd map.cpt
