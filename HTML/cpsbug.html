<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Computer Programs in Seismology - Recent Enhancements and Bug
      Fixes</title>
    <meta name="generator" content="LibreOffice 7.1.8.1 (MacOSX)">
    <meta name="created" content="2006-04-25T00:00:00.009433600">
    <meta name="changed" content="2023-08-28T16:33:17.725011000">
    <meta name="" content="">
    <meta name="Info 1" content="">
    <meta name="Info 2" content="">
    <meta name="Info 3" content="">
    <meta name="Info 4" content="">
    <style type="text/css">
		h2.cjk { font-family: "Arial Unicode MS" }
		h2.ctl { font-family: "Arial Unicode MS" }
		h3.cjk { font-family: "Arial Unicode MS" }
		h3.ctl { font-family: "Arial Unicode
                                MS" }
		h4.cjk { font-family: "Arial
                                Unicode MS" }
		h4.ctl { font-family: "Arial Unicode MS" }
		pre { margin-left: 0.05in; margin-top: 0.09in; margin-bottom: 0.09in; background: #e6e6e6 ;font-weight: bold }
		pre.cjk { font-family: "Courier New", monospace }
	</style>
    <style>
pre {
  background-color: rgb(230,230,230);
  margin-top:12px;
  margin-bottom:12px;
  margin-left:6px;
  font-weight: bold;
}
</style>
  </head>
  <body dir="ltr" lang="en-US">
    <ul>
      <li>
        <h1>Enhancements Bug and Fixes 330</h1>
      </li>
    </ul>
    <h3 class="western">Introduction</h3>
    <p>The purpose of this page is to notify users of the Computer
      Program in Seismology (CPS) package of repairs or extensions made
      to the code. Whenever this page is updated, the down-loadable
      version of CPS is updated and provided to users.</p>
    <h3 class="western">Enhancements to Version 3.30 codes</h3>
    <hr>
    <hr>
    <p style="margin-bottom: 0in"><a href="#2005">2005</a>, <a
        href="#2006">2006</a>, <a href="#2007">2007</a>, <a
        href="#2008">2008</a>, <a href="#2009">2009</a>, <a
        href="#2010">2010</a>, <a href="#2011">2011</a>, <a
        href="#2012">2012</a>, <a href="#2013">2013</a>, <a
        href="#2014">2014</a>, <a href="#2015">2015</a>, <a
        href="#2016">2016</a>, <a href="#2017">2017</a>, <a
        href="#2018">2018</a>, <a href="#2019">2019</a>, <a
        href="#2020">2020</a>, <a href="#2021">2021</a>, <a
        href="#2022">2022</a>, <a href="#2023">2023</a>, <a
        href="#2024">2024</a> <br>
      For each year, the changes are (listed in order from newest to
      oldest) </p>
    <hr>
    <hr>
    <h2 class="western"><a name="2024"></a>2024</h2>
    <blockquote>
      <h3>November 12, 2024</h3>
      <ul>
        <li><i>gsac_prs.c</i> in <i>PROGRAMS.330/VOLVIII/gsac.src</i> was modified to permit the display of time markers in the record section display. <br>
<i>GSAC> prs pi </i> or <i>GSAC> prs pick</i> will place tic-marks on the traces to indicate O, A, T0, ...,T9 markers if set<br>
<i>GSAC> prs api </i> or <i>GSAC> prs apick</i> will place tic-marks on the traces to indicate O, A, T0, ...,T9 markers if set and also annotate them then the strings stored in KO, KA, KT0, ..., KT9<br>
If somethiing is set and it is not to be displayed, so something like
<pre>
ch O -12345
or
ch KT0 -12345
</pre>   </li>
      </ul>
      <h3>October 17, 2024</h3>
      <ul>
        <li>The current distribution is NP330.Oct-17-2024.tgz</li>
        <li>All code compiles with the latest versions of gcc/gfortran
          and clang/flang.<br>
        </li>
      </ul>
      <h3>September 11, 2024<br>
      </h3>
      <ul>
        <li>Installed readline-8.2 to replace readline-8.1. To remove
          warnings from the <b>clang</b> compiler, text.c bind.c and
          rltty.c were corrected to replace the C language syntax of the
          form</li>
      </ul>
      <blockquote>
        <pre>void proc(j)<br>int j ;<br>{<br></pre>
        with<br>
        <pre>void proc(int j)<br><br>{<br></pre>
        to be compatible with modern C standards. The problematic syntax
        occurred in three source files:<br>
        <br>
        <pre>rltty.c:83:1: warning: a function definition without a prototype is deprecated in all versions of C and is <br>         not supported in C2x [-Wdeprecated-non-prototype]<br>set_winsize (tty)<br>^<br>1 warning generated.<br>bind.c:1170:1: warning: a function definition without a prototype is deprecated in all versions of C and is <br>         not supported in C2x [-Wdeprecated-non-prototype]<br>parse_comparison_op (s, indp)<br>^<br>1 warning generated.<br>text.c:1767:1: warning: a function definition without a prototype is deprecated in all versions of C and is <br>         not supported in C2x [-Wdeprecated-non-prototype]<br>_rl_char_search_callback (data)<br>^<br>1 warning generated.<br></pre>
        <br>
      </blockquote>
      <h3>August 7, 2024</h3>
    </blockquote>
    <ul>
      <ul>
        <li>Created the program <b>srfpar96</b> to list the partial
          derivatives of the observed dispersion with respect to P- and
          S-velocities and layer thickness. This differs from the <b>srfker96</b>
          which did not require actual dispersion.&nbsp; The program is
          described in the tutorial under <i>SWKERNELS1</i>. It is
          invoke by the sequence of commands <b>sprep96</b>, <b>sdisp96




            1</b> and <b>srfpar96</b>. The subroutine <i>outputpar</i>
          can be easily modified to reformat the,&nbsp; partials fo the
          users inversion code.&nbsp; This code was requested by a
          researcher who wanted to invert more than dispersion
          observations. A tutorial on the use of <b>srfpar96</b> is
          given at <a href="../TUTORIAL/SWKERNELS1/index.html">SWKERNELS1</a>
        </li>
        <li>Added makefiles to support LLVM compilers clang and flang.
          In addition Makefiles for older compilers and systems were
          removed, e.g., OSX, SOL, SLU, LNX, LNX64, OSX, OSF and
          CYG.&nbsp; Only LINUX6440, OSXM, OSXintel, LINUXllvm and
          OSXMllvm are provided. This was tested on flang/clang 18.1.3
          on Linux MINT 22 and flang 18.1.8 / clang 15.0.0 on MacOS
          Sonoma 14.6.1.<br>
        </li>
      </ul>
    </ul>
    <blockquote>
      <h3>July 30, 2024<br>
      </h3>
    </blockquote>
    <ul>
      <ul>
        <li>Modified <b>sdisp96 </b>and <b>tdisp96 </b>as follows:</li>
      </ul>
      <ul>
        <li>an issue arose with some&nbsp; if statements:</li>
        <ul>
          <li>
            <pre>if (i.ne.1) then
   Cw00 = cphase(i-1)
   ...
endif
</pre>
            <p>to</p>
            <pre>if (i.gt.1) then
      Cw00 = cphase(i-1)
 ...
endif
</pre>
          </li>
        </ul>
        <ul>
          <li>
            <pre>if (i.ne.1) then
   c3=eroot(i-1)-0.05*dk0
   ...
endif
</pre>
            <p>to</p>
            <pre>if (i.gt.1) then
   c3=eroot(i-1)-0.05*dk0
   ...
</pre>
          </li>
        </ul>
        <ul>
          <li>
            <pre>if(i.ne.1 .and. c1.ge.eroot(i-1)) then 
        c2=c22
        tadd=-dabs(tadd)
c       write(LOT,*)'catch a reverse dispersion  tadd=',tadd
        if(c2.eq.c22) go to 550 
endif
</pre>
            <p>The major problem here is that it seemed as if the old
              compilers evaluated the i.ne.1 first and if this failed,
              then the c1.gt.eroor(i-1). The current compilers seem to
              evaluate the i.ne.1 and c1.ge.eroot(i-1) is parallel. If
              the i==1 then the second has an invalid memory reference
              at eroot(0). In addition it is assume that i&nbsp; != 0.
              The solution is to replace the compound "if" statement by
              two "if" statements.<br>
            </p>
            <pre>if(i.gt.1)then
    if(c1.ge.eroot(i-1))then
             c2=c22
             tadd=-dabs(tadd)
c       write(LOT,*)'catch a reverse dispersion  tadd=',tadd
             if(c2.eq.c22) go to 550
    endif
endif
</pre>
          </li>
        </ul>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; and <br>
        <ul>
          <li>
            <pre>if(i.gt.1.and.c2.gt.eroot(i-1)) c2=eroot(i-1)-0.01*dk0
</pre>
            <p>to</p>
            <pre>if(i.gt.1)then
    if(c2.gt.eroot(i-1))then
          c2=eroot(i-1)-0.01*dk0
    endif
endif
</pre>
          </li>
        </ul>
        <li>The original code assumed that the highest velocities were
          at the halfspace. If the fastest velocities are above the
          halfspace, the phase velocity search would attempt to find
          solutions that leaked into the halfspace, and thus were not
          surface waves.&nbsp; At line 383 and similarly for tdisp96,f,
          change
          <ul>
            <li>
              <pre>c-----
c       solid layer solve halfspace period equation
c-----
            cmin = betmn
            call gtsolh(a(jmn),b(jmn),cmin)
            cmin=.95*cmin
            cmax = betmx
        endif
</pre>
              <p>to</p>
              <pre>c       solid layer solve halfspace period equation                    
c-----                                                                 
            cmin = betmn
            call gtsolh(a(jmn),b(jmn),cmin)
            cmin=.95*cmin
            cmax = betmx
c-----  
c     RBH 2024/07/28  ensure that betmx is 
c     not less than the halfspace S velocity for elastic
c-----    
            if(betmx.gt.b(mmax))then
               betmx = b(mmax) 
               cmax  = betmx
            endif 
        endif 
</pre>
            </li>
          </ul>
          The usage prompt for sdpder96 was corrected. </li>
      </ul>
      <h3>May 27, 2024</h3>
      <ul>
        <li>Corrected spectra plots of the commands <i>plotsp</i> and <i>plotsppk




















          </i>to place y-axis tic marks on the right.<br>
        </li>
      </ul>
      <h3>May 17, 2024</h3>
      <ul>
        <li>In plotting the lune diagram with &lt;b&gt;fmplot&lt;/b&gt;,
          the red circle&nbsp; indicating the lune position of the input
          moment tensor was often under other annotation. The source
          code not places the plotting of this symbol other annotation.<br>
        </li>
      </ul>
      <h3>May 11, 2024</h3>
      <ul>
        <li>Corrected an error in <b>genplt </b>(PROGRAMS.330/CALPLOT/Utility/genplt.f)






















          which did not always plot error bars when requested. The
          problem was due to undefined variables. This is a caution that
          all routines should use the <i>implicit none </i>to force
          all variable to be defined.<br>
        </li>
      </ul>
      <h3>April 19, 2024</h3>
      <ul>
        <li>The current release is <a
            href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html">
            <b>NP330.Apr-25-2024.tgz</b></a></li>
        <li>Corrected an error in <b>sdpegn96 </b>and <b>tdpegn96 </b>subroutine

          output &nbsp; where <i>gpoly</i> was invoked with <i>solsiz</i>
          undefined. The symbol size was set to 0.03.<b><br>
          </b><br>
        </li>
      </ul>
      <h3>April 18, 2024</h3>
      <ul>
        <li>The current release is <a
            href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html">
            <b>NP330.Apr-18-2024.tgz</b></a></li>
        <li>Corrected a bug in the execution of the&nbsp; <b>mt </b>(momentensor)


























          command of <b>gsac. </b>The source file <i>gsac_mt.c</i>&nbsp;


























          was modified in testing the command option <i>FILE</i>.&nbsp;
          The line<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


























          {MT_FILE, "FILE", CHDR, NO, 1, NO, "File fileproto ", -1},<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


























          was changed to<br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


























          {MT_FILE, "FILE", CHDR, NO, 1, NO, "File fileproto ", 4},<br>
          to force the 4 character keyword FILE to be recognized.</li>
      </ul>
      <ul>
        <li>C. J. Ammon noted that the first arrival time for SH in a
          medium with a fluid layer was incorrect. This occurs in <i>subroutine


























            fstarr </i>in the programs for isotropic media:&nbsp; <b>spulse96</b>,
          <b>spulse96strain</b>, <b>refmod96</b>, <b>time96,</b> <b>timmod96,</b>&nbsp;&nbsp;

























          <b>hpulse96strain</b>, <b>hspec96</b>, <b>hspec96strain</b>,
          and&nbsp; <b>rspec96</b>. This routine is used to compute
          first arrival times.&nbsp;&nbsp; Rather than making the logic
          of the code harder to understand, the effective velocity for
          the SH in the fluid layers&nbsp; in isotropic models is set to
          0.001 V<sub>P</sub> in the programs. The result will be a
          predicted refracted arrival time that will be ignored since it
          will not be the first arrival.&nbsp; <br>
        </li>
        <li><br>
          For codes the work with TI models, e.g.,&nbsp; <b>tpulse96,</b>&nbsp;


























          <b>ttime96,</b> <b>ttimmod96,</b> <b>hprep96</b>,&nbsp; <b>tspec96</b>&nbsp;


























          and <b>tspec96strain</b>, a fix has not been created yet
          because the code is more complicated. To compute travel times
          one has to solve the eigenvalue problem. <br>
        </li>
      </ul>
      <h3><br>
      </h3>
      <h3>March 7, 2024</h3>
      <ul>
        <li>The current release is <a
            href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html">
            <b>NP330.Mar-07-2024.tgz </b></a>This is a bug-fix update
          of the NP330.Feb-20-2024.tgz distribution.</li>
        <li>Corrected all instances of format statement 12&nbsp; in <i>hpulse96strain.f</i>
          <i>, spulse96strain.f&nbsp;</i> and <i>f96tosac.f </i>to
          replace <i>format(i7.7,'_',i6.6,'_',i6.6,'.',a3)</i> by <i>format(i8.8,'_',i6.6,'_',i6.6,'.',a3)</i>.
          thanks to Wen Luo for pointing this out. This format is used
          to define the output file name of the form DDDDDdHHHd.grn and
          8 spaces were required. An inconsistency in some output file
          names for difference command line corrections was corrected to
          agree with the command line help output.</li>
        <li>In VOLVIII/gsac.src&nbsp; <i>gsac_version.h, gsac_sac.c,
            gsac_writesp.c</i> and <i>gsac.h</i> were modified to
          correctly use the real/imaginary and amplitude/phase spectra
          files. The real/imaginary and amplitude/phase files are not
          correctly annotated at RLIM and AMPH, respectively.<br>
        </li>
        <li>
          <p style="margin-bottom: 0in"> Created a new program <b>sacampl</b>
            to compute the quarter-wavelength site response. This is
            documented n the tutorial <a
              href="../TUTORIAL/SACAMPL/sacampl.html">SACAMPL</a> </p>
        </li>
      </ul>
      <h3>February 14, 2024</h3>
      <ul>
        <li>Created new programs to compute eigenfunctions for isotropic
          media. The <b>rlegn96 </b>and <b>rregn96</b> use
          generalized reflection matrices rather than propagator
          matrices to compute the eigenfunctions.&nbsp; This necessary
          to be able to handle a medium with a significant low velocity
          layer within which eigenfunctions have significant amplitude
          and which decay toward the surface. <b>Note: </b>at present
          these codes will not handle fluid layers or a completely fluid
          medium. The latter case would be useful to study the
          generation of signals from a source in the oceanic SOFAR
          layer.<br>
        </li>
      </ul>
      <h3>February 12, 2024<br>
      </h3>
      <ul>
        <li>The <b>gsac </b>command <i>writesp</i><b> </b>was
          updated to permit writing the phase, real and imaginary parts.
          Previously only the amplitude spectrum was saved. in addition
          the options <b><i>B</i> </b>and <b><i>O </i></b>permit the
          phase to be computed with respect to the B or O markers.
          Finally<b> </b>the<b> </b>options RLIM and AMPH create two
          Sac files&nbsp; as a function of frequency: RLIM creates a .rl
          and .im files while AMPH creates the .am and .ph phases where
          these suffixes are added to the end of the file name.</li>
        <li>A change was made to the internal logic of <b>do_mft </b>that






























          led to some loss of variable contents when the <b><i>Tomo </i></b>option






























          was invoked.</li>
        <li><b>genplt</b> Added some initialization lines after the call
          pinitf(). &nbsp; The problem was that one instance that&nbsp;
          ended with the color red and when several of these plot
          files&nbsp; were concatenated the wrong colors were plotted. <br>
        </li>
        <li><b>sdpsrf96, sdpegn96, sdpder96 <br>
          </b></li>
        <li><b>slegn96, sregn96, tlegn96, tregn96 </b>Corrected an
          error for spherical models by which the phase velocity partial
          derivatives with respect layer thickness, density and
          velocities were set to zero. <br>
        </li>
      </ul>
      <hr>
      <hr>
      <hr>
      <hr>
      <h2 class="western"><a name="2023"></a>2023</h2>
      <hr>
      <hr>
      <h3 class="western">November 29, 2023</h3>
      <ul>
        <li>A comparison of the output of <b>hspec96</b> (propagator
          matrices) and <b>rspec96</b> (generalized reflection
          matrices) show a difference in the synthetics if the source
          (and presumably the receiver) are placed at a layer boundary.
          Using the CUS model which has a layer boundary at a depth of
          10 km, the Green's functions were similar but not identical
          for a source depth of 10km. The Green's function were
          identical for a source depth of 11 km in the same model. The
          difference for a source depth of 10 km can be due at which
          side of the layer discontinuity&nbsp; the code samples the
          medium parameters to the&nbsp; Δ<b>B</b> stress-displacement
          discontinuity&nbsp; or the Σ<sup>U</sup>&nbsp; and&nbsp; Σ<sup>D</sup>&nbsp;















          potential coefficients. This is not a major problem that has
          to be addressed.<sup> </sup></li>
      </ul>
      <h3 class="western">October 26, 2023</h3>
      <ul>
        <li> The current release is <a
            href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html">
            <b>NP330.Oct-26-2023.tgz</b></a> </li>
        <li><b>gsac</b> is at version 1.1.64 dated 24 OCT 2023</li>
        <ul>
          <li>
            <p>The <i>sync/synchronize </i>command has an option to
              synchronize on the end of the file, e.g., </p>
            <pre>          GSAC&gt; sync e
</pre>
            This was needed for code testing. The Sac header defines a
            reference time, and then offsets to that time in the B, E,
            O, A, T1, ...,T9 headers. To set a travel time, it is
            simplest to set the reference time to the origin time (of
            course the origin time must already have been set) and then
            set the arrival time marker to the travel time, for example
            as as in
            <pre>GSAC&gt; sync o
GSAC&gt; ch A  25.0
</pre>
            If this is to be done within a SHELL script, one would do
            something like <br>
            <pre>P_traveltime=25.0
gsac &lt;&lt; EOF
sync o
ch A ${P_traveltime}
wh
q
EOF
</pre>
          </li>
        </ul>
        <li>IRIS code.
          <ul>
            <li> <b>rdseed</b>.The CPS distribution has always
              distributed a SLU version of <b>rdseed</b> and <b>evalresp</b>.
              <b>rdseed</b> is not longer supported and the older code
              will not compile using modern compilers such as <b>clang</b>.
              I still need to use <b>rdseed</b>. The <i>rdseedv5.3</i>
              distribution had binaries for LINUX (rdseed.rh6.linux_64)
              and MacOS Intel (rdseed.mac.x86.64). The LINUX version
              works under LINUX and the MacOS Intel version works on an
              M2 MacBook Air using the internal conversion code of Intel
              binaries to M1/M2 binaries in MacOS Ventura. These are
              installed in <i>PROGRAMS.330/bin</i> under the name <b>rdseed</b>.
            </li>
            <li><b>evalresp</b>. Previous CPS distributions used <i>evalresp-3.3.3.slu</i>.
              The current distribution is based on <i>evalresp.4.0.6</i>
              and distributed as <i>evalresp-4.0.6.slu</i>. The SLU
              changes were made to eliminate compiler warnings in <i>libsrc/evalresp/regexp.c</i>
              and <i>libsrc/mxml/mxmldoc.c</i>.
              <ul>
                <li><i>mxmldoc.c</i>: Replace <i>puts(MXML_VERSION +
                    10)</i> by <i>puts(MXML_VERSION)</i>. The purpose
                  of the original code was to skip the first 10
                  characters if the strng <i>MXML_VERSION</i>.</li>
                <li><i>regexp.c</i>: The code was OK but the syntax was
                  not quite modern C. The original Kernighan and Ritchie
                  C did not have procedure prototypes. This one miigh
                  have something like
                  <pre>int evr_regexec (prog, string, log) register regexp *prog;
register char *string;
 evalresp_logger *log;
{ 
     <i>code</i>
}
</pre>
                  Modern C wants
                  <pre>/* prototype */
 static void regoptail (char *p, char *val, evalresp_logger *log);
...
/* actual procdure */
 static void regoptail (char *p, char *val, evalresp_logger *log){
     <i>code</i>
}
</pre>
                  The compiler complaint here was that the <b>evalresp-4.0.6</b>
                  code was a mixture of the two styles
                  <pre>/* prototype */
 static void regoptail (char *p, char *val, evalresp_logger *log);
...
/* actual procdure */
int evr_regexec (prog, string, log) register regexp *prog;
register char *string;
 evalresp_logger *log;
{ 
     <i>code</i>
}
</pre>
                  The underlying CODE was not changed in the SLU,
                  version. Just the procedure description was rewritten.
                </li>
              </ul>
            </li>
            <li><b>fmlpr</b>: gcc Version 12.3.0 on LINX warned about
              line 139, 167 and 211 in <i>VOLV/src/fmlpr.c</i> 2hich
              were
              <pre>  139 |         sprintf(m.evtime,"%2.2d:%2.2d:%2.2d:%1.1d",hour,minute,second,(int)((millisecond%1000)/100));
  167 |         sprintf(n.evtime,"%2.2d:%2.2d:%2.2d.%1.1d",hour,minute,second,millisecond/100);
  211 |         sprintf(n.timestamp,"S-%4.4d%2.2d%2.2d%2.2d%2.2d%2.2d",
                        1900+gmt-&gt;tm_year,1+gmt-&gt;tm_mon,gmt-&gt;tm_mday,gmt-&gt;tm_hour,gmt-&gt;tm_min,gmt-&gt;tm_sec);
</pre>
              The reason for the warning was the possibility of overflow
              of the <i>m.evtime</i>, <i>n.evtime</i> and <i>n.timestamp</i>
              strings. Buffer overflow has often been used to break into
              comptuer systems. These structure elements are defined in
              the files <i>msg.h</i> and <i>ndk.h</i>. The solution is
              some ugly code that ensires that the arguments of the <i>sprintf</i>
              statements are positive integers of the same maximum
              length:
              <pre>sprintf(m.evtime,"%2.2d:%2.2d:%2.2d:%1.1d",hour,minute,second,abs(((int)((millisecond%1000)/100))%10));
...
sprintf(n.evtime,"%2.2d:%2.2d:%2.2d.%1.1d",hour,minute,second,abs(((int)millisecond/100)%10));
...
        sprintf(n.timestamp,"S-%4.4d%2.2d%2.2d%2.2d%2.2d%2.2d",
                abs(1900+gmt-&gt;tm_year)%9999,abs(1+gmt-&gt;tm_mon)%100,abs(gmt-&gt;tm_mday)%100,abs(gmt-&gt;tm_hour)%100,abs(gmt-&gt;tm_min)%100,abs(gmt-&gt;tm_sec)%100);
</pre>
            </li>
          </ul>
        </li>
      </ul>
      <h3 class="western">August 28, 2023</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Added extra comments to <b>tdpder96

































            </b><span style="font-weight: normal">of VOLIII to indicate
              that one of the partials is with respect to </span><font
              face="Liberation Serif, serif"><span style="font-weight:
                normal">η</span></font><font face="Liberation Serif,
              serif"><span style="font-weight: normal"> where </span></font><font
              face="Liberation Serif, serif"><span style="font-weight:
                normal">η=F/(A-2L) in terms of the TI material
                parameters.</span></font></p>
        </li>
        <li>
          <p style="margin-bottom: 0in"> <font face="Liberation Serif,
              serif"><span style="font-weight: normal">Added </span></font><font
              face="Liberation Serif, serif"><i><span
                  style="font-weight: normal">-XN xnumscl -YN ynumscl </span></i></font><font
              face="Liberation Serif, serif"><span style="font-style:
                normal"><span style="font-weight: normal">to </span></span></font><font
              face="Liberation Serif, serif"><span style="font-style:
                normal"><b>pltsac </b></span></font><font
              face="Liberation Serif, serif"><span style="font-style:
                normal"><span style="font-weight: normal">to increase
                  the size of the axis labels. The default is 0.07
                  (e.g., 70 CALPLOT units). With this option the size
                  will be </span></span></font><font face="Liberation
              Serif, serif"><i><span style="font-weight: normal">xnumscl</span></i></font><font
              face="Liberation Serif, serif"><span style="font-style:
                normal"><span style="font-weight: normal">*0.07 or </span></span></font><font
              face="Liberation Serif, serif"><i><span
                  style="font-weight: normal">ynumscl</span></i></font><font
              face="Liberation Serif, serif"><span style="font-style:
                normal"><span style="font-weight: normal">*0.7. </span></span></font>
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b><font face="Liberation Serif,
                serif"><span style="font-style: normal">hudson96 </span></font></b><font
              face="Liberation Serif, serif"><span style="font-style:
                normal"><span style="font-weight: normal">was completely
                  rewritten because of a need to document the method in
                  detail. The result is cleaner code. In addition a
                  correction was made for the T* time shift. Other than
                  this slight difference, the output is the same as tha
                  given by the previous version.</span></span></font></p>
        </li>
      </ul>
      <h3 class="western">May 11, 2023</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Finally applied a spell check to
            the online help for <b>gsac</b> </p>
        </li>
        <li>
          <p>Added <i>-XN xnumscl -YN ynumscl </i>to the <b>GSAC </b><i>pctl

































            </i>command. The default size of the axis labels is 0.10
            (e.g., 100 CALPLOT units). With this option then will be <i>xnumscl
































              * 0.10 </i>or <i>ynumscl * 0.10 </i>.&nbsp;&nbsp; This
            was added to improve the presentation of figures for
            publication.</p>
        </li>
      </ul>
      <h3 class="western">May 2, 2023</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Updated the documentation for
            the <a href="../TUTORIAL/SLAT2D/index.html">SLAT2D</a> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Created the <a
              href="../TUTORIAL/SLAT2Dgrad/index.html">SLAT2Dgrad</a>
            tutorial which compares multimode synthetics created using <b>slat2d96</b>
            to Cerveny high frequency asymptotic ray tracing for a
            single dipping layer structure. The SH comparison is superb,
            while the P-SV comparison suffers from the fact that the ray
            theory cannot model the Rayleigh wave. The comparison gives
            confidence to the <b>slat2d96</b> approach. </p>
        </li>
        <li>
          <p>Updated the installation instructions for a Mac computer,
            in this case an M2 Macbook Air. The updated page is <a
              href="/eqc/eqccps.html">eqccps.html</a>. In using this
            page, please provide comments so that the installation steps
            can be improved. Of note was the observations that the
            Imagemagick 7.1.1-8 package downloaded from Homebrew could
            not handle a PostScript BoundingBox at the end of the file
            while the ImageMagick 6.9.11-60 downloaded using MacPorts
            worked well. </p>
        </li>
      </ul>
      <h3 class="western">April 24, 2023</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Updated <b>VOLV/src/tshwmod96.f</b>
            to create the plot file&nbsp; <b>TSHWMOD96.PLT </b>instead
            of <b>SHWMOD96.PLT </b>to distinguish the output </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/src/spulse96.f:</b>
            corrected the synthetics for laterally varying media, e.g.,
            after running <b>slat96</b>. The description in
            Keilis-Borok's book is not too clear. Hoperfully this is
            correct. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The <i>fileid</i> command in <b>gsac

































            </b>now permits a listing of the magnitude </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The <i>Makefiles </i>in <b>VOLVI

































            </b>were not correct since they did not refer to <i>gtrofa.o
















            </i>for the compiles of <b>surf96, rftn96 </b>and <b>joint96.</b>
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLV/src/refmod96.f: </b>changed

































            the plot width for reflections. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>CALPLOT/Utility/calplt.f: </b>added

































            the <i>-h </i>flag to just show the usage </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>CALPLOT/Utility/genplt.f: </b>changed
































            one instance of sizey = 0.15 top sizey = 0.12 to agree with
            X-axis&nbsp; </p>
        </li>
        <li>
          <p><b>VOLV/src/f96tosac.f: </b>changes <i>12 format </i>from
















            <i>i7.7 </i>to&nbsp; <i>i8.8</i></p>
        </li>
      </ul>
      <h3 class="western">March 23, 2023</h3>
      <ul>
        <li>
          <p>Created a tutorial on <i><b>compliance</b></i> which
            includes the source code for <i><b>compliance.saito</b></i>
            and sample runs for the solid-atmosphere and ocean bottom
            observations. Following Tanimoto and Wang (2019), depth
            dependent partial derivative kernels are provided.</p>
        </li>
      </ul>
      <h3 class="western">March 6, 2023</h3>
      <ul>
        <li>
          <p>The previous distributions did not contain the
            modifications made on July 22, 2022 that add the option to
            use the Brocher relations to given density and P-velocity
            from the S-velocity. This correction will be incorporated
            into the next release.</p>
        </li>
      </ul>
      <h3 class="western">February 28, 2023</h3>
      <ul>
        <li>
          <p>Change the name of the CALPLOT graphics file in <i>tshwmod96.f

































            </i>from <i>SHWMOD96.PLT </i>to <i>TSHWMOD967.PLT</i></p>
        </li>
      </ul>
      <h3 class="western">February 6, 2023</h3>
      <ul>
        <li>
          <p>VOLV/src/f96tosac.f - change format statement 12 from i7.7
            to i8.8 so it now reads as <i>12
              format(i8.8,'_',i6.6,'_',i6.6,'.',a3)</i> </p>
        </li>
      </ul>
      <h3 class="western">February 6, 2023</h3>
      <ul>
        <li>
          <p>Corrected y-axis font in CALPLOT/Utilities/genplt.f to
            agree with x-axis font by changing one instance of <i>sizey
              = 0.15 </i>to <i>sizey = 0.12</i></p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western"><a name="2022"></a>2022</h2>
      <hr>
      <hr>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>November 7, 2022</b></font></font></h3>
      <ul>
        <li>
          <p><span style="font-variant: normal"><font color="#000000"><font
                  face="Times"><font style="font-size: 14pt" size="4"><span
                      style="letter-spacing: normal"><span
                        style="font-style: normal"><span
                          style="font-weight: normal">The current
                          release is&nbsp;</span></span></span></font></font></font></span><a
href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html"><span
                style="font-variant: normal"><font color="#000000"><font
                    face="Times"><font style="font-size: 14pt" size="4"><span
                        style="letter-spacing: normal"><span
                          style="font-style: normal"><b>NP330.Nov-08-2022.tgz</b></span></span></font></font></font></span></a>
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Recently the version of <b>sac</b>
            distributed by IRIS has been has been updated by introducing
            support for NVHDR=7 in addition to continuing to support
            NVHDR=6. The difference is the appending a double precision
            set of timing variables following the waveform section. The
            Sac file format is described at&nbsp;<a
              href="http://ds.iris.edu/files/sac-manual/manual/file_format.html">http://ds.iris.edu/files/sac-manual/manual/file_format.html</a>&nbsp;&nbsp;&nbsp;

































            In order to provide support for this new format,&nbsp; <i>SUBS/sacsubc.c</i>
            and <i>VOLVIII/src/saccvt.c and VOLVIII/src/saclhdr.c </i>were
































            updated. In addition <i>asctosac.f</i>, <i>sactoasc.f </i>and
































            <i>shwsac.f</i> in VOLVIII/src were replaced by <i>asctosac.c</i>,
            <i>sactoasc.c</i> and <i>shwsac.c</i>, respectively. NOTE <i>SUBS/sacsubf.f
































            </i>was not updated because making the changes in FORTRAN is
            harder and the use of these FORTRAN subroutines in the
            CPS&nbsp; codes does not require the extra precision in the
            timing variables.&nbsp; </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The addition to <i>SUBS/sacsubc.c
















            </i>and <i>SUBS/sacsubc.h&nbsp; </i>is the procedure <i>getdhv(char

































              *strcmd,double *dval,int *nerr) </i>and <i>void
              setdhv(char *strcmd, double dval, int *nerr)</i>. These
            are analogous to <i>setfhv </i>and <i>getfhv</i>, but
            address the double precision header at the end of the Sac
            file for NVHDR=7. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The byte-swapping program <b>saccvt</b>
            was updated to handle Sac files with NVDR=7. It will reject
            a conversion if NVHDR is not equal to either&nbsp; 6 or 7,
            and if equal will require that at least one Integer Header
            Value be -12345 and that there be no integers &lt;
            -99999.&nbsp; The invocation <b>saccvt -I &lt; in.sac &gt;
              out.sac </b>will perform a byte swap if required (-I
            means intelligent). Without this flag a conversion always
            occurs. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Thus the upgraded codes are <b>gsac,

































              saccvt, ssclhdr, asctosac, sactosac </b><span
              style="font-weight: normal">and </span><b>shwsac.</b></p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><span style="font-weight:
              normal">A discussion of the codes used to create files
              that test the NVHDR=7 value is given in <a
                href="GSACNVHDR/index.html">GSACNVHDR</a>.</span></p>
        </li>
        <li>
          <p>To support a study of P-wave receiver functions above a
            subducting slab, the VOLIX codes <b>cprep96</b> <b>cseis96</b>
            and <b>cpulse96</b> were modified by changing format
            statements to support greater source depths and horizontal
            offsets. In additikon the ray path computations in <b>cseis96</b>
            were changed from single to double precision to support the
            greater depths. <b>cseis96</b> is essentially the Cerveny <i>seis81</i>
            code which was developed to support the interpretation of
            refraction lines. It the source is placed very deep compared
            to the model thickness, then the incident P wavefront
            approximates the plane wave assumed for receiver function
            studies. To test the codes and to provide examples there is
            a tutorial on <a href="../TUTORIAL/Cerveny/index.html">the
              use of Cerveny ray tracing for receiver function analysis.
            </a> </p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>October 12, 2022</b></font></font></h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">As a result of a user request, <b>prfmod96</b>
            was modified to display an optional velocity bar. An example
            of the modified output is given in the figure. Further
            discussion is given in <a href="PRFMOD/prfmod96.html">PRFMOD/prfmod96.html</a>.
            A representative plot is </p>
        </li>
      </ul>
      <dl>
        <dd>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <p><img src="PRFMOD/BOTTOM.png" name="Image36"
                      width="485" border="0" align="bottom" height="343">
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </dd>
      </dl>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>July 29,&nbsp; 2022</b></font></font></h3>
      <ul>
        <li>
          <p>After reviewing a paper, a new option was added to <b>surf96</b>,
            <b>rftn96 </b>and <b>joint96</b>. Previously there were
            options to fix the P-velocity or to update the P-velocity
            using the Vp/Vs data of the initial model (default). In
            addition the density was computed from the P velocity.&nbsp;
            The update is to use equation (9) of Brocher (2005) to
            compute Vp from the updated Vs and to compute density from
            equation (1) of that paper. In addition the computation of
            density was augmented by rough values of PREM for use when
            8.5 &lt; Vp &lt; 12.&nbsp;&nbsp; Reference: Brocher,, T.M.
            (2005). Empirical relations between elastic wave speed and
            density in the Earth's crust, Bull. Seism.Soc.Am, 95,
            2081-2092.</p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>June 9, 2022</b></font></font></h3>
      <ul>
        <li>
          <p><span style="font-variant: normal"><font color="#000000"><font
                  face="Times"><font style="font-size: 14pt" size="4"><span
                      style="letter-spacing: normal"><span
                        style="font-style: normal"><span
                          style="font-weight: normal">The current
                          release is&nbsp;</span></span></span></font></font></font></span><a
href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html"><span
                style="font-variant: normal"><font color="#000000"><font
                    face="Times"><font style="font-size: 14pt" size="4"><span
                        style="letter-spacing: normal"><span
                          style="font-style: normal"><b>NP330.Jun-09-2022.tgz</b></span></span></font></font></font></span></a>
          </p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times">June <b>6, 2022</b></font></font></h3>
      <ul>
        <li>
          <p>Modified <b>mtinfo</b> to remove redundant output.</p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>March 20, 2022</b></font></font></h3>
      <ul>
        <li>
          <p style="font-variant: normal; letter-spacing: normal;
            font-style: normal; font-weight: normal; orphans: 2; widows:
            2"> <font color="#000000"><font face="Times">To avoid some
                problems when using velocity models with meter-kg/m<sup>3</sup>
                instead of kilometer and gm/cm<sup>3 </sup>statements
                such as <font face="Menlo-Bold, serif"><font
                    style="font-size: 10pt" size="2"><b>if(t1 .le.
                      1.0d-20)cvt(j) = 0.0d+00</b></font></font> <font
                  style="font-size: 11pt" size="2">were replaced by </font><font
                  face="Menlo-Bold, serif"><font style="font-size: 10pt"
                    size="2"><b>if(t1 .le. 1.0d-35)cvt(j) = 0.0d+00 </b></font></font><font
                  style="font-size: 11pt" size="2">in </font><font
                  style="font-size: 11pt" size="2"><b>spulse96,
                    spulse96strain </b></font><font style="font-size:
                  11pt" size="2">and</font> <font style="font-size:
                  11pt" size="2"><b>tpulse96. </b></font><font
                  style="font-size: 11pt" size="2">In addition the
                  precision checks were changed in </font><font
                  style="font-size: 11pt" size="2"><b>sprep96</b></font><font
                  style="font-size: 11pt" size="2">, </font><font
                  style="font-size: 11pt" size="2"><b>sdisp96</b></font><font
                  style="font-size: 11pt" size="2">,</font> <font
                  style="font-size: 11pt" size="2"><b>sregn96</b></font><font
                  style="font-size: 11pt" size="2">,</font> <font
                  style="font-size: 11pt" size="2"><b>slegn96</b></font><font
                  style="font-size: 11pt" size="2">, </font><font
                  style="font-size: 11pt" size="2"><b>tprep96</b></font><font
                  style="font-size: 11pt" size="2">, </font><font
                  style="font-size: 11pt" size="2"><b>tdisp96</b></font><font
                  style="font-size: 11pt" size="2">, </font><font
                  style="font-size: 11pt" size="2"><b>tregn96 </b></font><font
                  style="font-size: 11pt" size="2">and</font> <font
                  style="font-size: 11pt" size="2"><b>tlegn96. </b></font><font
                  style="font-size: 11pt" size="2">In addition output
                  formats for the -TXT and -ASC output of </font><font
                  style="font-size: 11pt" size="2"><b>sdpegn96,</b></font>
                <font style="font-size: 11pt" size="2"><b>sdpder96,</b></font>
                <font style="font-size: 11pt" size="2"><b>sdpsrf96,</b></font>
                <font style="font-size: 11pt" size="2"><b>tdpegn96,</b></font>
                <font style="font-size: 11pt" size="2"><b>tdpder96</b></font>
                <font style="font-size: 11pt" size="2">and </font><font
                  style="font-size: 11pt" size="2"><b>tdpsrf96</b></font>
                <font style="font-size: 11pt" size="2">so that output
                  would work for all possible model formats. Thus the
                  codes are more robust. IT is recommended that the km,
                  km/s and gm/cm</font><sup><font style="font-size:
                    11pt" size="2">3 </font></sup><font
                  style="font-size: 11pt" size="2">be used. The purpose
                  of the exercise of using different units was to
                  understand the units of the final synthetics.</font></font></font></p>
        </li>
        <li>
          <p style="font-variant: normal; letter-spacing: normal;
            font-style: normal; orphans: 2; widows: 2"> <font
              color="#000000"><font face="Times"><font style="font-size:
                  11pt" size="2"><b>tregn96</b></font> <font
                  style="font-size: 11pt" size="2"><span
                    style="font-weight: normal">previously worked for a
                    solid TI model. The inclusion of a fluid layer at
                    the surface was not implemented correctly. Thus the
                    eigenfunctions and synthetics were not correct. This
                    has been fixed.</span></font></font></font></p>
        </li>
        <li>
          <p><font style="font-size: 11pt" size="2"><b>gsac</b></font> –
            <font style="font-size: 11pt" size="2"><span
                style="font-weight: normal">modified the routines </span></font><font
              style="font-size: 11pt" size="2"><i><span
                  style="font-weight: normal">gsac_env.c</span></i></font><font
              style="font-size: 11pt" size="2"><span style="font-weight:
                normal">, </span></font><font style="font-size: 11pt"
              size="2"><i><span style="font-weight: normal">gs
                  c_plotsp.c</span></i></font><font style="font-size:
              11pt" size="2"><span style="font-weight: normal">,</span></font>
            <font style="font-size: 11pt" size="2"><i><span
                  style="font-weight: normal">gsac_psppk.c, gsac_whit.c
                </span></i></font><font style="font-size: 11pt" size="2"><span
                style="font-weight: normal">and</span></font> <font
              style="font-size: 11pt" size="2"><i><span
                  style="font-weight: normal">gsac_writesp.c </span></i></font><font
              style="font-size: 11pt" size="2"><span style="font-weight:
                normal">avoid underflow</span></font><font
              style="font-size: 11pt" size="2"><i><span
                  style="font-weight: normal">. </span></i></font><span
              style="text-decoration: none"><font style="font-size:
                11pt" size="2"><span style="font-weight: normal">As an
                  example, in </span></font></span><span
              style="text-decoration: none"><font style="font-size:
                11pt" size="2"><i><span style="font-weight: normal">gsac_plotsp.c















                  </span></i></font></span><span style="text-decoration:
              none"><font style="font-size: 11pt" size="2"><span
                  style="font-weight: normal">the following change was
                  made:</span></font></span></p>
        </li>
      </ul>
      <pre class="western" style="margin-left: 0.94in; margin-top: 0in; margin-bottom: 0in">From
float tr, ti;
...
temp = sqrt(tr*tr + ti*ti);

To
double tr, ti;
...
temp = (float)sqrt(tr*tr + ti*ti);</pre>
      <p style="margin-left: 0.79in; margin-top: 0.04in; margin-bottom:
        0in"> The problem was that some spectra that should have been
        non-zero, e.g., tr and ti = 1.0e-20, were set to zero because of
        the multiplication inside the square root, even thought the
        square root is a double. </p>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>March 9, 2022</b></font></font></h3>
      <ul>
        <li>
          <p style="orphans: 2; widows: 2"><span style="font-variant:
              normal"><font color="#000000"><font face="Times"><font
                    style="font-size: 14pt" size="4"><span
                      style="letter-spacing: normal"><span
                        style="font-style: normal"><span
                          style="font-weight: normal">The current
                          release is&nbsp;</span></span></span></font></font></font></span><a
href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html"><span
                style="font-variant: normal"><font color="#000000"><font
                    face="Times"><font style="font-size: 14pt" size="4"><span
                        style="letter-spacing: normal"><span
                          style="font-style: normal"><b>NP330.Mar-09-2022.tgz</b></span></span></font></font></font></span></a><span
              style="font-variant: normal"><font color="#000000"><span
                  style="letter-spacing: normal"> </span></font></span>
          </p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>March 6, 2022</b></font></font></h3>
      <ul>
        <li>
          <p style="font-variant: normal; letter-spacing: normal;
            font-style: normal; font-weight: normal; orphans: 2; widows:
            2"> <font color="#000000"><font face="Times">To avoid
                problems with two programs using a file with the same
                name, <b>hspec96strain, tspec96strain </b>and <b>hpulse96strain
































                </b>use the binary file <i>hspec96ss.grn</i> while <b>hspec96
































                </b>and <b>hpulse96</b> continue to use the binary file
                <i>hspec96.grn. </i>The reason for the difference is
                that <b>hspec96</b> computes the Green’s functions but
                the <b>strain</b> codes also compute the partial
                derivatives of the Green’s functions with respect to
                receiver coordinates.</font></font></p>
        </li>
        <li>
          <p style="font-variant: normal; letter-spacing: normal;
            font-style: normal; orphans: 2; widows: 2"> <font
              color="#000000"><font face="Times"><b>spulse96strain </b><span
                  style="font-weight: normal">did not correctly define
                  the moment tensor. Thus output did not agree with that
                  of </span><b>hpulse96strain. </b></font></font> </p>
        </li>
        <li>
          <p style="font-variant: normal; letter-spacing: normal;
            font-style: normal; orphans: 2; widows: 2"> <font
              color="#000000"><font face="Times"><b>hspec96, tspec96,
                  hspec96p </b><span style="font-weight: normal">and</span>
                <b>tspec96p </b><span style="font-weight: normal">were
                  slightly changed as follows. If the source is in a
                  fluid, do not compute an S time through the fluid,
                  e.g., an S→P time. Change the screen out put to use a
                  “g” format which is useful for high frequencies and
                  short distances. Also pass this precision to
                  subsequent codes.</span></font></font></p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>February 7, 2022</b></font></font></h3>
      <ul>
        <li>
          <p><b>sdisp96</b> - Phase velocity search limits can be
            defined using the flags <i>-cmin cmin -cmax cmax</i><span
              style="font-variant: normal"> </span><span
              style="font-variant: normal"><span style="font-style:
                normal">or </span></span><i>-CMIN cmin -CMAX cmax.</i></p>
        </li>
        <li>
          <p style="font-variant: normal; font-style: normal"><b>hspec96
              tspec96 rspec96 tspec96strain hspec96strain</b> – <span
              style="font-weight: normal">change the format that shows
              the frequencies computed so that very high frequencies can
              be displayed. The computations were not changed.</span></p>
        </li>
        <li>
          <p style="font-variant: normal; font-style: normal"><b>tspec96strain</b>
            <b>hspec96strain</b> <span style="font-weight: normal">- if
              the source is in a fluid do not compute an S first arrival</span></p>
        </li>
        <li>
          <p><span style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><b>hpulse96</b></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><span
                  style="letter-spacing: normal"> – </span></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><span
                        style="font-weight: normal">corrected the PEX
                        PSS PDS etc Green’s functions for
                        stress/traction in a fluid </span></span></span></font></font></span>
          </p>
        </li>
        <li>
          <p><span style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><b>hpulse96strain – </b></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><span
                        style="font-weight: normal">distinguish between</span></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><span
                  style="letter-spacing: normal"> </span></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><i><span
                        style="font-weight: normal">-Z (zero phase) </span></i></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><span
                        style="font-weight: normal">and </span></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><i><span
                        style="font-weight: normal">-ZZ (moment tensor
                        component). </span></i></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><span
                        style="font-weight: normal">Also use first
                        arrival times from </span></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><b>hspec96strain</b></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><span
                  style="letter-spacing: normal"> </span></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><span
                        style="font-weight: normal">instead of computing
                        them here.</span></span></span></font></font></span></p>
        </li>
        <li>
          <p><span style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><b>gsac – </b></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><span
                        style="font-weight: normal">in the </span></span></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><i><span
                        style="font-weight: normal">fileid</span></i></span></font></font></span><span
              style="font-variant: normal"><font color="#000000"><span
                  style="letter-spacing: normal"> </span></font></span><span
              style="font-variant: normal"><font color="#000000"><font
                  face="Times"><span style="letter-spacing: normal"><span
                      style="font-style: normal"><span
                        style="font-weight: normal">command, there was a
                        problem in displaying the DEPMIN and DEPMAX
                        header variables because the initial DE was
                        interpreted as DEfault. Now to invoke the
                        default presentation, one must use DEFault.
                        Because of this all routines permitting a
                        default reset of parameters must use DEFault!</span></span></span></font></font></span></p>
        </li>
        <li>
          <p style="font-variant: normal; letter-spacing: normal;
            font-style: normal; font-weight: normal"> <font
              color="#000000"><font face="Times"><b>gsac</b>, <b>do_mft</b>
                and <b>do_pom</b>: On an older PC running LINUX, there
                was a problem in using the X11 Cursor in that there was
                a lag in presentation as the cursor moved. This was
                obvious for these codes (refr command under gsac) where
                a push-button menu was implemented in software. The
                modification was to replace the call <i>gcursor(“Arrow”)
















                </i>by <i>gcursor(“XORArrow”) </i>to make the display
                more responsive.</font></font></p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2021</h2>
      <hr>
      <hr>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>December 11, 2021</b></font></font></h3>
      <ul>
        <li>
          <p style="font-variant: normal; letter-spacing: normal;
            font-weight: normal; orphans: 2; widows: 2"> <font
              color="#000000"><font face="Times"><i>mtsubs.f </i><span
                  style="font-style: normal">was modified to correctly
                  define the isotropic moment to agree with Ben-Zion and
                  Zhu paper for the implementation of the full moment
                  tensor grid search program wvf</span><span
                  style="font-style: normal"><b>mtgrd96.</b></span></font></font></p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>September 20, 2021</b></font></font></h3>
      <ul>
        <li>
          <p>Modified <i>gsac_fileid.c&nbsp; </i>of <b>gsac</b>.&nbsp;
















            When the command&nbsp;&nbsp; <i>GSAC&gt; fileid list fname
              dist az baz concat on format colon</i> was previously
            issued, the annotation in the plot window had a lot of
            blanks.&nbsp;&nbsp; Not there are not repeated blanks, which
            improves the presentation.</p>
        </li>
        <li>
          <p><b>gsac </b><span style="font-weight: normal">routine </span><i><span
                style="font-weight: normal">refr</span></i><span
              style="font-variant: normal"> </span><span
              style="font-variant: normal"><span style="font-style:
                normal"><span style="font-weight: normal">had the
                  display modified to include some white space on the
                  edges of the trace plot to permit easier use with the
                  “Zoom” command. Previously it was difficult to pick a
                  region bear the edges.</span></span></span></p>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>September 19, 2021</b></font></font></h3>
      <ul>
        <li>
          <p>The previous output from <b>wvfmt96 </b>and <b>wvfmtd96
            </b>(PROGRAMS.330/VOLVII/src/wvfmt96.f and
            PROGRAMS.330/VOLVII/src/wvfmtd96.f) used to denote the best
            solution was not informative enough. The output has been
            changed. Because of this <b>fmdfit </b>(PROGRAMS.330/VOLV/src/fmdfit.f)
































            were modified.&nbsp; The previous output of <b>wvfmt96</b>
            for the best solution&nbsp; was </p>
        </li>
      </ul>
      <pre class="western" style="margin-left: 0.84in; margin-right: 0.39in">WVFMT96    1.0  288.   74.  -91.   4.15     1.000 0.186E-12     1.000     1.000 0.154E-12  54.5 </pre>
      <blockquote> where the columns are</blockquote>
      <pre class="western" style="margin-left: 0.84in; margin-right: 0.39in"> 1 WVFMT96 if created by wvf96.f
 WVFMTD96 if created by wvfmtd96
 The next four columns describe the best (major) double couple derived from the moment tensor
 2  depth - depth of the Greens functions
 3 stk - strike of best double couple
 4 dip - dip of best double couple
 5  rake - rake of best double couple
 6  Mw  - moment magnitude of best double couple
 7 Reduction of Variance: 1.0-total_err/total_sum_sq - raw data 0 zero is best
 8 Std Error of fit: sqrt(total_err*tmpsig) 
 9 xy/sqrt(xx*yy) - cosine of angle between observed and predicted
10  Weighted reduction of variance: 1.0-total_wtd/total_sum_sq_wt 
11  Weighted Std error of fit: sqrt(total_wtd*tmpsig) 
12  Percent CLVD - 0 means pure double couple</pre>
      <p> <br>
        <br>
      </p>
      <blockquote>The new output is </blockquote>
      <pre class="western" style="margin-left: 0.84in; margin-right: 0.39in">WVFMT961    1.0  288.   74.  -91.   4.15     1.000 0.186E-12     1.000     1.000 0.154E-12  54.5 -0.1010000E+23 -0.1060000E+23  0.3000003E+21  0.8799998E+22  0.2799999E+22 -0.2190001E+23</pre>
      <blockquote style="font-variant: normal; letter-spacing: normal;
        font-style: normal; font-weight: normal; orphans: 2; widows: 2">
        <font color="#000000"><font face="Times">The program name in the
            first column changes and there are 6 additional columns</font></font></blockquote>
      <blockquote style="orphans: 2; widows: 2"><br>
        <br>
      </blockquote>
      <pre class="western" style="margin-left: 0.84in; margin-right: 0.39in; orphans: 2; widows: 2"><font color="#000000">        <span style="font-variant: normal"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">1 WVFMT961  if</span></span></font></span></font>
<font color="#000000">        <span style="font-variant: normal"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">created by the updated wvf96.f</span></span></font></span></font>

<font color="#000000">          <span style="font-variant: normal"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">WVFMTD961  if</span></span></font></span></font>
<font color="#000000">        <span style="font-variant: normal"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">created by the updated wvfmtd96</span></span></font></span></font>

<font color="#000000">        </font><span style="font-variant: normal"><font color="#000000"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">Columns 2 - 12 are the </span></span></font></font></span>
<font color="#000000">        </font><span style="font-variant: normal"><font color="#000000"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">13  Mxx dyne-cm)</span></span></font></font></span>
<font color="#000000">        </font><span style="font-variant: normal"><font color="#000000"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">14  Myy (dyne-cm)</span></span></font></font></span>
<font color="#000000">        </font><span style="font-variant: normal"><font color="#000000"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">15  Mxy (dyne-cm)</span></span></font></font></span>
<font color="#000000">        </font><span style="font-variant: normal"><font color="#000000"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">16  Mxz (dyne-cm)</span></span></font></font></span>
<font color="#000000">        </font><span style="font-variant: normal"><font color="#000000"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">17  Myz (dyne-cm)</span></span></font></font></span>
<font color="#000000">        <span style="font-variant: normal"><font face="Times"><span style="font-style: normal"><span style="font-weight: normal">18  Mzz (dyne-cm)</span></span></font></span></font>

<font color="#000000">      </font></pre>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal"> <font color="#000000"><font
            face="Times"><b>September 15, 2021</b></font></font></h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">A examination of CPS moment
            tensor code and documentation was initiated. The results
            will be updated documentation in
            PROGRAMS.330/DOC/SOURCE.pdf/cps330s.pdf, and new on-line
            tutorial for source inversion that focuses on using a
            synthetic data set. at&nbsp;<a
            The impetus for this effort was the need to perform full
            moment tensor inversions for a mining collapse. To assist in
            characterizing a source, the resultant moment tensor is used
            to place the event on a lune diagram generated by the
            revised <b>mtinfo</b> and <b>fmplot </b>programs. The
            lune diagram is discussed in many papers, such as <i>Tape,
              W. and Tape, C. (2012). A geometric comparison of
              source-type plots for&nbsp; moment tensors, Geophys. J.
              Int. 190, 499-510. </i> </p>
        </li>
        <li>
          <p><b>mtinfo </b>was modified in two was. First the printer
            plot in the <a href="msg.ext">msg.txt</a>&nbsp; create by
            the program now has a representation of the lune to the
            right of the beachball plot. The second change is that the
            standard output of the program, named here as&nbsp; <a
              href="LUNE/mtinfo.txt">mtinfo.txt</a> &nbsp; , gives the
            lune angles corresponding to the moment tensor at lines 37
            and 38.&nbsp; These were created using the command </p>
          <pre class="western" style="margin-right: 0.39in">mtinfo -XX -2.29E+21 -XY -6.34E+20 -XZ 3.53E+21 -YY -1.56E+21 -YZ 2.11E+21 -ZZ -1.35E+22 &gt; mtinfo.txt</pre>
        </li>
        <li>
          <p><b>fmplot </b>was modified to now provide the CALPLOT
            graphics file <i>LUNE.PLT </i>in addition to the
            previously provided <i>FMPLOT.PLT</i> . The command&nbsp; </p>
          <pre class="western" style="margin-right: 0.39in">fmplot -st -XX -2.29E+21 -XY -6.34E+20 -XZ 3.53E+21 -YY -1.56E+21 -YZ 2.11E+21 -ZZ -1.35E+22 -FMPLMN -P</pre>
          <p> gives the following plots using the default equal area
            projection:</p>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <p align="center">FMPLOT.PLT</p>
                </td>
                <td style="border: none; padding: 0in">
                  <p align="center">LUNE.PLT</p>
                </td>
              </tr>
              <tr>
                <td style="border: none; padding: 0in">
                  <p align="center"><img src="LUNE/FMPLOTeq.png"
                      name="Image11" width="292" border="0"
                      align="bottom" height="292"> </p>
                </td>
                <td style="border: none; padding: 0in">
                  <p align="center"><img src="LUNE/LUNEeq.png"
                      name="Image12" width="175" border="0"
                      align="bottom" height="318"> </p>
                </td>
              </tr>
            </tbody>
          </table>
          <ul>
            <ul>
              <h3 class="western" style="margin-right: 0.39in;
                font-variant: normal; letter-spacing: normal;
                font-style: normal; font-weight: normal; orphans: 2;
                widows: 2"> <font color="#000000"><font face="Times">Note















                    that the command syntax gave the moment tensor
                    elements in units of <i>dyne-cm.</i> This is only
                    important in the computation of Mw! If other units
                    are used, the plots will be the same, and text
                    output will be given in the moment <b>tensor units.</b></font></font></h3>
            </ul>
          </ul>
        </li>
      </ul>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>September 4, 2021</b></font></font></h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>shwmod96 </b>was modified by
            adding a <i>-XY </i>switch.&nbsp; The purpose is to create
            a file of&nbsp; depth-model parameter.&nbsp; If the model96
            file name is Model.mod, then the x-y output file is named </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">Model.mod.VP.xy&nbsp; if the
                -P&nbsp; flag is used </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">Model.mod.VS.xy&nbsp; if the
                -S&nbsp; flag is used </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">Model.mod.DEN.xy if the
                -D&nbsp; flag is used </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">Model.mod.QPI.xy if the -QP
                flag is used to plot 1/Q </p>
            </li>
            <li>
              <p>Model.mod.QSI.xy if the -QS flag is used to plot 1/QS </p>
            </li>
          </ul>
        </li>
      </ul>
      <blockquote>The reason for this option is that users may wish to
        use another program to plot the model parameters as a function
        of depth.<br>
        <br>
        Examples of the plots created are given in <a
          href="SHWMOD96/index.html">SHWMOD96/index.html</a> </blockquote>
      <h3 class="western" style="font-variant: normal; letter-spacing:
        normal; font-style: normal; orphans: 2; widows: 2"> <font
          color="#000000"><font face="Times"><b>August 31, 2021</b></font></font></h3>
      <ul>
        <li>
          <p style="orphans: 2; widows: 2"><span style="font-variant:
              normal"><font color="#000000"><font face="Times"><font
                    style="font-size: 14pt" size="4"><span
                      style="letter-spacing: normal"><span
                        style="font-style: normal"><span
                          style="font-weight: normal">The current
                          release is&nbsp;</span></span></span></font></font></font></span><a
href="http://eqinfo.eas.slu.edu/eqc/eqc_cps/CPS/cpslisc.html"><span
                style="font-variant: normal"><font color="#000000"><font
                    face="Times"><font style="font-size: 14pt" size="4"><span
                        style="letter-spacing: normal"><span
                          style="font-style: normal"><b>NP330.Aug-31-2021.tgz</b></span></span></font></font></font></span></a><span
              style="font-variant: normal"><font color="#000000"><span
                  style="letter-spacing: normal"> </span></font></span>
          </p>
        </li>
      </ul>
      <h3 class="western">June 2, 2021</h3>
      <ul>
        <li>
          <p><b>These codes have been compiled and tested using
              gcc/gfortran 10.2.0 and 11.1. </b>Starting with
            gcc/gfortran 9.3.0 the compilers note problems that were
            ignored by previous versions. An example is that if two
            source files that are part of a larger program and an
            #include "local.h" and if the "local.h" had a declaration
            such as "int j;", then gcc would note that there were two
            global values of "j" and would then stop the compile. The
            solution is to remove the declaration "int j;" from the
            include file or to make careful if of "local" or "extern"
            attributes.&nbsp;&nbsp; The new compilers caught problems
            with some of the <b>rdseed</b> and <b>gsac</b> source
            files.&nbsp; I also noted that <b>gfortran </b>note the
            incorrect use of variables that were not defined.</p>
          <p>On Manjaro LINUX, rdseed compiled in <i>PROGRAMS.330/IRIS/rdseedv5.3.slu</i>
            required a change in the Makefile in order to access the RPC
            code for XDR. After doing </p>
          <pre class="western">      ./Setup LINUX6440</pre>
          <p> edit the PROGRAMS.330/IRIS/rdseedv5.3.slu/Makefile to
            modify the INCLUDE and LDFLAGS line as indicated here </p>
          <pre class="western">[cps@cps-virtualbox rdseedv5.3.slu]$ diff Makefile Makefile.orig. 
39c39
&lt; INCLUDE    = -I../Include -I/usr/include/tirpc
---
&gt; INCLUDE    = -I../Include
46c46
&lt; LDFLAGS = -lm -lc -ltirpc
---
&gt; LDFLAGS = -lm -lc</pre>
          <p> Now continue the compile with the command </p>
          <pre class="western">./C &amp;tt; C.txt 2&gt;&amp;1</pre>
        </li>
        <li>
          <p style="margin-bottom: 0in">The <i>readline</i> code was
            ugraded from <i>readline-5.0</i> to <i>readline-8.1</i>.
            This library is used by <b>gsac</b>. </p>
        </li>
        <li>
          <p><b>f96tosac</b> was updated to permit additional naming of
            the Sac files, The old command line options were </p>
          <pre class="western">      f96tosac  [-A] [-B] [-G] [-T] [-?] file_name
       file_name   Name of file96 file to be converted
                   If not given, input is stdin
       -A          SAC alphanumeric file, else binary
       -B          SAC binary (default)
       -G          Output names in form DDDDdHHHh.grn (binary)
       -T          Output names in form DDDDDdHHHh.grn(binary)
       -E          Output names in form DDDdddHhhh.grn(binary)
       -?          This online help
       -h          This online help</pre>
          <p> The new options permit the file name to also depend on the
            receiver depth. This is useful for VSP synthetics. The
            options are show below. Note that the output naming may not
            be good if a source or receiver depth is negative or if the
            field exceeds the available space. FORTRAN is not forgiving.
          </p>
          <pre class="western">     f96tosac  [-A | -B | -G | -T  | -E | -FMT ifmt ] [ -? | -h ] file_name
            file_name   Name of file96 file to be converted
                  If not given, input is stdin
     OUTPUT FILE NAME
      -A           SAC alphanumeric file, else binary
      -B           SAC binary (default)
      -G (default) Output names in form DDDDdHHHh.grn (binary)
      -T           Output names in form DDDDDdHHHh.grn(binary)
      -E           Output names in form DDDdddHhhh.grn(binary)
      The format for the name of the binary output attempts to
      give information on epicentral distance (km), 
      source depth (km), and receiver depth(km). The options are
      -FMT 1      DDDDDd_HHHh_ZZZz.grn
                  e.g. 005001_1234_0045.Uz
      -FMT 2      DDDDDddd_HHHhhh_ZZZzzz.grn
                  e.g. 00500123_123456_004578.ZVF
      -FMT 3      DDDDDdHHHh.grn  (same as -T)
                  e.g. 0050010041.ZVF
      -FMT 4      DDDDdHHHh.grn   (same as -G)
                  e.g. 050010045.ZVF
      -FMT 5      DDDdddHhhh.grn  (same as -E)
                  e.g. 5001234578.ZVF
      where D is for epicentral distance, H source depth, and
      Z receiver depth. The lower case indicates the digits 
      to the right of the decimal place.  The examples above
      are for an epicentral distance is 500.123 km, source
      depth 123.456 km and receiver depth 4.578 km.
      -?          This online help
      -h          This online help</pre>
        </li>
        <li>
          <p>New codes are introduced to make synthetic stress, strain,
            dilatation and rotation time series. The theory of how this
            was accomplished is described in <a
              href="STRAIN/strain.pdf">strain.pdf</a>. There is also a
            tutorial at <a href="../TUTORIAL/CPSstrain/index.html">../TUTORIAL/CPSstrain</a>.
          </p>
          <p>The <b>hspec96</b> and wavenumber integration codes and
            the isotropic media modal superposition codes were adapted
            to create the new programs <b>tspec96strain</b>, <b>hspec96strain</b>
            and <b>hpulse96strain</b> to create strain, stress,
            rotation and dilation time series through wave number
            integration for a given moment tensor or point force source.
            The <b>spulse96strain</b> can create synthetics for
            isotropic media using modal superposition. As part of the
            upgrade the output files are in Sac binary form rather than
            the older <i>file10</i> format. There are also more options
            to the naming of the output files. In addition <b>srotate96</b>
            is used to rotate the strains, stresses or rotations to a
            different Cartesian coordinate system at the receiver. </p>
          <p>The command line options of <b>hspec96strain</b> and are
            the same as for <b>hspec96</b> and <b>tspec96</b>,
            respectively. The difference in the codes is that the <i>strain</i>
            versions output partial derivatives of the Green's functions
            with respect to source depth and epicentral distance. </p>
          <p>The command line options are as follow: </p>
          <pre class="western"> USAGE: tspec96 [-H] [-A arg] [-K] [-SU] [-SD] [-SPUP] [-SSUP] [-SPDN] [-SSDN] [-RU] [-RD] [-RPUP] [-RSUP] [-RPDN] [-RSDN] [-?] [-h]
 -H (default false)   Use Hankel function not Bessel
 -A arg (default arg=3.0) value of kr where Hn(kr) replaces
             Jn(kr) in integration - only used when -H is used
 -K      (default Futterman) use Kjartansson Causal Q
 The following govern wavefield at source. The default is the entire wavefield
 -SU      (default whole wavefield) Compute only upgoing                wavefield from the source
 -SD      (default whole wavefield) Compute only downgoing                wavefield from the source
  -SPUP  Include upward P at source
  -SSUP  Include upward S at source
  -SPDN  Include downward P at source
  -SSDN  Include downward S at source
 The following govern wavefield at receiver. The default is the entire wavefield
  -RD    Only downgoing waves at receiver
  -RU    Only upgoing waves at receiver
  -RPUP  Include upward P at receiver
  -RSUP  Include upward S at receiver
  -RPDN  Include downward P at receiver
  -RSDN  Include downward S at receiver
 -?                   Display this usage message
 -h                   Display this usage message

 USAGE: hspec96 [-H] [-A arg] [-K] [-N][-SU] [-SD] [-SPUP] [-SSUP] [-SPDN] [-SSDN] [-RU] [-RD] [-RPUP] [-RSUP] [-RPDN] [-RSDN] [-?] [-h]
 -H (default false)   Use Hankel function not Bessel
 -A arg (default arg=3.0) value of kr where Hn(kr) replaces
             Jn(kr) in integration - only used when -H is used
 -K      (default Futterman) use Kjartansson Causal Q
 -N      (default causal) use non-causal Q
 The following govern wavefield at source. The default is the entire wavefield
 -SU      (default whole wavefield) Compute only upgoing                wavefield from the source
 -SD      (default whole wavefield) Compute only downgoing                wavefield from the source
  -SPUP  Include upward P at source
  -SSUP  Include upward S at source
  -SPDN  Include downward P at source
  -SSDN  Include downward S at source
 The following govern wavefield at receiver. The default is the entire wavefield
  -RD    Only downgoing waves at receiver
  -RU    Only upgoing waves at receiver
  -RPUP  Include upward P at receiver
  -RSUP  Include upward S at receiver
  -RPDN  Include downward P at receiver
  -RSDN  Include downward S at receiver
 -?                   Display this usage message
 -h                   Display this usage message

 hpulse96strain:Help
USAGE: 
hpulse96strain -d Distance_File [ -t -o -p -i ] [-a alpha]
    -l L [ -D|-V |A]  [-F rfile ] [ -m mult] [-STEP|-IMP]
    [-STRESS  -STRAIN -ROTATE -GRN] [-FUND] [-HIGH] [-Z] 
    [-LAT] [-2] [ -M mode ] [-LOCK] -FMT ifmt 
    [-M0 moment ] [-MW mw] [-STK stk -DIP dip -RAKE rake]
    [-FX fx -FY fy -FZ fz] 
    [-XX Mxx ... -ZZ Mzz] [-?] [-h]
 TIME FUNCTION SPECIFICATION
  -t           Triangular pulse of base 2 L dt
  -p           Parabolic Pulse of base  4 L dt
                  -p -l 1 recommended
  -l L         (default 1 )duration control parameter
  -o           Ohnaka pulse with parameter alpha
  -i           Dirac Delta function
  -a alpha     Shape parameter for Ohnaka pulse
  -F rfile     User supplied pulse
  -m mult      Multiplier (default 1.0)
  -STEP        (default)
  -IMP         
              By default the source time function is 
              steplike. -IMP forces impulse like. -D -IMP is Green s function
 OUTPUT FILE NAME
  The format for the name of the binary output attempts to
  give information on epicentral distance (km), 
  source depth (km), and receiver depth(km). The options are
  -FMT 1      DDDDDd_HHHh_ZZZz.cmp
              e.g. 005001_1234_0045.Uz
  -FMT 2      DDDDDddd_HHHhhh_ZZZzzz.cmp
              e.g. 00500123_123456_004578.Erf
  -FMT 3      DDDDDdHHHh.grn(default)
              e.g. 0050010041.ZVF
  -FMT 4      DDDDdHHHh.grn
              e.g. 050010045.Srz
  -FMT 5      DDDdddHhhh.grn
              e.g. 5001234578.Err
  where D is for epicentral distance, H source depth, and
  Z receiver depth. The lower case indicates the digits 
  to the right of the decimal place.  The examples above
  are for an epicentral distance is 500.123 km, source
  depth 123.456 km and receiver depth 4.578 km.
 OUTPUT TIMESERIES FOR SOURCE as Ur, Ut, Uz components with strain, stress optional
  -D           Output is ground displacement        (m)
  -V           Output is ground velocity (default) (m/s)
  -A           Output is ground acceleration       (m/s^2)
  -STRESS (default .false. ) output stress for mechanism
    units are Pa, with suffix Srr, Srf, Srz, Stt, Sfz, Szz
  -STRAIN (default .false. ) output strain for mechanism
       with suffix, Err, Erf, Erz, Eff, Efz, Ezz
  -ROTATE (default .false. ) output rotation for mechanism
       with suffix, Wfz, Wrz, Wrf
  -GRN    (default false) Output Green;s functions
    hpulse96strain -STEP -V -p -l 1 -GRN -FMT 4  is same as
     hpulse96 -V -p -l 1 | f96tosac -G . For KM,KM/S,GM/CM^3
     model, output will be CM/S for moment of 1.0e+20 dyne-cm
     of force of 1.0e+15 dyne

  -TEST1  (default .false.) output CPS Green functions ,e.g.,
       ZDS RDS ... RHF THF for use with moment tensor codes
       and gsac MT command. This is equivalent to 
       hpulse96 -V -p -l 1 | f96tosac -G if -FMT 4 is used 
       with hpulse96strain
 COMPUTATIONS
  -Z         (default false) zero phase 
 SOURCE MECHANISM SPECIFICATION
  -DIP dip               dip of fault plane
  -STK Strike            strike of fault plane
  -RAKE Rake              slip angle on fault plane
  -M0 Moment (def=1.0) Seismic moment in units of dyne-cm
  -MW mw            Moment Magnitude  
            moment (dyne-cm) from log10 Mom = 16.10 + 1.5 Mw
            For strike,dip,rake source mw or Moment must be specified
  -EX                  Explosion
  -AZ Az                Source to Station Azimuth
  -BAZ Baz               Station to Source azimuth
  -fx FX -fy Fy -fZ fz  Point force amplitudes  (N,E,down) in  dynes
  -XX Mxx -YY Myy -ZZ Mzz  Moment tensor elements in units of
  -XY Mxy -XZ Mxz -YZ Myz    dyne-cm
 The moment tensor coordinates are typically X = north Y = east and Z = down
 If by accident more than one source specification is used,
 the hierarchy is Mij &gt; Strike,dip,rake &gt; Explosion &gt; Force
 --------------------------------------------------------------
 NOTE: The output units are related tot he model specification.
 To have the desired units the model must be in KM, KM/S  and GM/CM^3
 --------------------------------------------------------------
  -?           Write this help message
  -h           Write this help message

 spulse96strain:Help
USAGE: 
spulse96strain -d Distance_File [ -t -o -p -i ] [-a alpha]
    -l L [ -D|-V |A]  [-F rfile ] [ -m mult] [-STEP|-IMP]
    [-STRESS  -STRAIN -ROTATE -GRN] [-FUND] [-HIGH] [-Z] 
    [-LAT] [-2] [ -M mode ] [-LOCK] -FMT ifmt 
    [-M0 moment ] [-MW mw] [-STK stk -DIP dip -RAKE rake]
    [-FX fx -FY fy -FZ fz] 
    [-XX Mxx ... -ZZ Mzz] [-?] [-h]
 TIME FUNCTION SPECIFICATION
  -t           Triangular pulse of base 2 L dt
  -p           Parabolic Pulse of base  4 L dt
                  -p -l 1 recommended
  -l L         (default 1 )duration control parameter
  -o           Ohnaka pulse with parameter alpha
  -i           Dirac Delta function
  -a alpha     Shape parameter for Ohnaka pulse
  -F rfile     User supplied pulse
  -m mult      Multiplier (default 1.0)
  -STEP        (default)
  -IMP         
              By default the source time function is 
              steplike. -IMP forces impulse like. -D -IMP is Green s function
 OUTPUT FILE NAME
  The format for the name of the binary output attempts to
  give information on epicentral distance (km), 
  source depth (km), and receiver depth(km). The options are
  -FMT 1      DDDDDd_HHHh_ZZZz.cmp
              e.g. 005001_1234_0045.Uz
  -FMT 2      DDDDDddd_HHHhhh_ZZZzzz.cmp
              e.g. 00500123_123456_004578.Erf
  -FMT 3      DDDDDdHHHh.grn(default)
              e.g. 0050010041.ZVF
  -FMT 4      DDDDdHHHh.grn
              e.g. 050010045.Srz
  -FMT 5      DDDdddHhhh.grn
              e.g. 5001234578.Err
  where D is for epicentral distance, H source depth, and
  Z receiver depth. The lower case indicates the digits 
  to the right of the decimal place.  The examples above
  are for an epicentral distance is 500.123 km, source
  depth 123.456 km and receiver depth 4.578 km.
 OUTPUT TIMESERIES FOR SOURCE as Ur, Ut, Uz components with strain, stress optional
  -D           Output is ground displacement        (m)
  -V           Output is ground velocity (default) (m/s)
  -A           Output is ground acceleration       (m/s^2)
  -STRESS (default .false. ) output stress for mechanism
    units are Pa, with suffix Srr, Srf, Srz, Stt, Sfz, Szz
  -STRAIN (default .false. ) output strain for mechanism
       with suffix, Err, Erf, Erz, Eff, Efz, Ezz
  -ROTATE (default .false. ) output rotation for mechanism
       with suffix, Wfz, Wrz, Wrf
  -GRN    (default false) Output Green;s functions
    spulse96strain -STEP -V -p -l 1 -GRN -FMT 4  is same as
     spulse96 -V -p -l 1 | f96tosac -G . For KM,KM/S,GM/CM^3
     model, output will be CM/S for moment of 1.0e+20 dyne-cm
     of force of 1.0e+15 dyne
  -TEST1  (default .false.) output CPS Green functions ,e.g.,
       ZDS RDS ... RHF THF for use with moment tensor codes
       and gsac MT command. This is equivalent to 
       spulse96 -V -p -l 1 | f96tosac -G if -FMT 4 is used 
       with strainspulse96
 COMPUTATIONS
  -d Distance_File {required}    Distance control file 
   This contains one of more lines with following entries
   DIST(km) DT(sec) NPTS T0(sec) VRED(km/s) 
            first time point is T0 + DIST/VRED
            VRED=0 means do not use reduced travel time, e.g.
            500.0 0.25 512 -23.33 6.0
            500.0 0.25 512  60    0.0 
            both have first sample at travel time of 60s
  -LAT       (default false) Laterally varying eigenfunctions
  -2         (default false) Use double length  internally
  -M  nmode  (default all) mode to compute [0=fund,1=1st]
  -Z         (default false) zero phase triangular/parabolic pulse
  -FUND       (default all) fundamental modes only  
  -HIGH       (default all) all higher modes only  
  -LOCK       (default false) locked mode used  
 SOURCE MECHANISM SPECIFICATION
  -DIP dip               dip of fault plane
  -STK Strike            strike of fault plane
  -RAKE Rake              slip angle on fault plane
  -M0 Moment (def=1.0) Seismic moment in units of dyne-cm
  -MW mw            Moment Magnitude  
            moment (dyne-cm) from log10 Mom = 16.10 + 1.5 Mw
            For strike,dip,rake source mw or Moment must be specified
  -EX                  Explosion
  -AZ Az                Source to Station Azimuth
  -BAZ Baz               Station to Source azimuth
  -fx FX -fy Fy -fZ fz  Point force amplitudes  (N,E,down) in  dynes
  -XX Mxx -YY Myy -ZZ Mzz  Moment tensor elements in units of
  -XY Mxy -XZ Mxz -YZ Myz    dyne-cm
 The moment tensor coordinates are typically X = north Y = east and Z = down
 If by accident more than one source specification is used,
 the hierarchy is Mij &gt; Strike,dip,rake &gt; Explosion &gt; Force
 --------------------------------------------------------------
 NOTE: The output units are related tot he model specification.
 To have the desired units the model must be in KM, KM/S  and GM/CM^3
 --------------------------------------------------------------
  -?           Write this help message
  -h           Write this help message

Usage: srotate96 -AZ az [-U|-STRESS|-STRAIN] -FILE prototype
  -AZ az (required) angle between r- and x-axes
  -FILE prototype (required) identifier for filename 
       for the example below this could be ../NEW/005000_0100_0010
 -U  Rotate the Ur Ut Uz from [sh]pulse96strain to Ux Uy Uz
       if they exist, e.g., ../NEW/005000_0100_0010.Ur etc
       to create 005000_0100_0010_Ux etc in the current directory
 -STRAIN  Rotate the Err Erf .. Ezz  from [sh]pulse96strain to Exx Eyy ..
       if they exist, e.g., ../NEW/005000_0100_0010.Err etc
       to create 005000_0100_0010_Exx etc in the current directory
 -STRESS  Rotate the Srr Srf .. Szz  from [sh]pulse96strain to Sxx Syy ..
       if they exist, e.g., ../NEW/005000_0100_0010.Srr etc
       to create 005000_0100_0010_Sxx etc in the current directory
 -ROTATE  Rotate the Wrf Wrz Wfz  from [sh]pulse96strain to Wxy Wxz Wyz
       if they exist, e.g., ../NEW/005000_0100_0010.Wrf etc
       to create 005000_0100_0010_Wxy etc in the current directory
 -h           (default false) online help</pre>
        </li>
        <li>
          <p><b>hpulse96</b> was updated to be more consistent with the
            options of <b>hpulse96strain</b>. The changes are evident
            in the usage page. More information is provide about units
            and the meaning of the output. </p>
          <pre class="western"> hpulse96:Help
 USAGE: hpulse96   [ -t -o -p -i ] -a alpha -l L [ -D -V -A]  [-F rfile ] [ -m mult] [-STEP|-IMP]   [-Z] [-?] [-h]
 Output time series in ASCII file96 format
 TIME FUNCTION SPECIFICATION
  -t           Triangular pulse of base 2 L dt
  -p           Parabolic Pulse of base  4 L dt
  -l L          (default 1 )duration control parameter
  -o           Ohnaka pulse with parameter alpha
  -i           Dirac Delta function
  -a alpha     Shape parameter for Ohnaka pulse
  -F rfile     User supplied pulse
  -m mult      Multiplier (default 1.0)
  -Z           (default false) zero phase triangular/parabolic pulse
               By default the source time function is 
  -STEP        (default) steplike integral of above pulses
  -IMP                   impulse like pulse with unit area
               steplike. -IMP forces impulse like. -D -IMP is Green s function
               These do not define the shape but rather the 
               shape of the source pulse. For earthquake 
               studies use the default steplike
 OUTPUT and UNITS
  -D           Output is ground displacement
  -V           Output is ground velocity (default)
  -A           Output is ground acceleration
       If the model is km, km/s, gm/cm^3 then the output is
       Option    units   
       -A       cm/s/s for a moment of 1.0e+20 dyne-cm   
                       or a force of 1.0e+15 dyne
       -V       cm/s   for a moment of 1.0e+20 dyne-cm   
                       or a force of 1.0e+15 dyne
       -D       cm     for a moment of 1.0e+20 dyne-cm   
                       or a force of 1.0e+15 dyne
       In a fluid the stress is in Pa for a 
                moment of 1.0e+16 dyne-cm or force 1.0e+14 dyne
       If the  model is MKS, e.g, m, m/s, kg/m^3, then 
       ZRT Greens functions are for moment 1.0 N-m, force 
       1.0 N with units m, m/s, m/s/s. The P stress are in Pa

  -?           Write this help message
  -h           Write this help message</pre>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>mtinfo</b> was corrected
            since the M12 element was not printed. </p>
        </li>
        <li>
          <p><b>fmlpr</b> The compiler did not like </p>
          <pre class="western">sprintf(m.evtime,"%2.2d:%2.2d:%2.2d:%1.1d",hour,minute,second,millisecond/100);</pre>
          <p> which was replaced by </p>
          <pre class="western">sprintf(m.evtime,"%2.2d:%2.2d:%2.2d:%1.1d",hour,minute,second,(int)((millisecond%1000)/100));</pre>
        </li>
        <li>
          <p><b>sdpegn96</b> was extended to display the results of
            acoustic gravity codes which are experimental. </p>
        </li>
      </ul>
      <h3 class="western">February 1, 2021</h3>
      <ul>
        <li>
          <p>The use of the GNU Fortran 9.3.0 flagged some
            inconsistencies in some of the FORTRAN codes that were
            changed. These were mostly in the Lawson and Hanson routines
            used in inversion. Thus lines such as </p>
          <pre class="western">          do 1000 i=1,10
          do 1000 j=1,10
  1000    a(i,j) = 0.0</pre>
          <p> were replaced by either </p>
          <pre class="western">          do 1000 i=1,10
               do 1001 j=1,10
                  a(i,j) = 0.0
  1001         continue
  1000    continue</pre>
          <p> or </p>
          <pre class="western">          do i=1,10
             do j=1,10
                a(i,j) = 0.0
             enddo
          enddo</pre>
          <p> The following were ugraded to avoid compiler warnings: </p>
          <pre class="western">          VOLII/src/sacmat96.f
          VOLIII/src/scomb96.f
          VOLIII/src/tcomb96.f
          VOLIII/src/tdisp96.f
          VOLIV/src/modls.f
          VOLIV/src/srfdrr96.f
          VOLIV/src/srfinv96.f
          VOLIV/src/twofft.f
          VOLV/src/fbutt96.f
          VOLV/src/fmdfit.f
          VOLV/src/fmplot.f
          VOLV/src/mrs.f
          VOLV/src/mtinfo.f
          VOLV/src/prfmod96.f
          VOLVI/src/rspec96p.f
          VOLVII/src/mrs.f
          VOLIX/src/cprep96.f
          VOLIX/src/cray96.f
          VOLIX/src/cseis96.f
          VOLX/src/modlt.f</pre>
        </li>
      </ul>
      <h3 class="western">January 31, 2021</h3>
      <ul>
        <li>
          <p>Updated <i>SUBS/grphsubf.f</i> and <i>SUBS/grphsubc.c</i>
            in an attempt to have better linear axis labeling, so that
            sequences such as 50 100 150 150 appear rather than 70 140
            210. Yet to be done is to modify the logarithmic axis
            routines to handle a range such as 200 to 600 in which case
            no 10<sub>2 symbol would be currently plotted. This often
              arises with interactive graphics. </sub> </p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2020</h2>
      <hr>
      <hr>
      <h3 class="western">October 29, 2020</h3>
      <ul>
        <li>
          <p>The current release is <a
              href="/eqc/eqc_cps/CPS/cpslisc.html"><b>NP330.Oct-29-2020.tgz</b></a>
          </p>
        </li>
      </ul>
      <h3 class="western">October 1, 2020</h3>
      <ul>
        <li>
          <p>Added the option <i>-E ecmdfil </i>to <b>genplt</b>.&nbsp;&nbsp;&nbsp;

































            <i>ecmdfil</i> consists of lines with lines 'File Kolor
            Width Psymb Size Legend' , such as </p>
        </li>
      </ul>
      <blockquote>'eml_H.xy' 0 0.01 'CI' 0.05&nbsp; '1 sig' <br>
        where eml_H.xy has entries &nbsp;&nbsp; <br>
        &nbsp;&nbsp; 2.5000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        3.3192308&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        0.0000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        0.40308103&nbsp;&nbsp;&nbsp; <br>
        &nbsp;&nbsp; 2.7000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        3.3750000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        0.0000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        0.29140610&nbsp;&nbsp;&nbsp; <br>
        &nbsp;&nbsp; 2.9000001&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        3.4560604&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        0.0000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        0.28769836&nbsp;&nbsp;&nbsp; <br>
        <br>
        The result is shown in the next figure:</blockquote>
      <p><img src="FIGURES/genplt20201010.png" name="Image13"
          alt="genplt" width="443" border="0" align="bottom"
          height="403"> </p>
      <blockquote>This figure was created by concatenating the CALPLOT
        files of three invocations of <b>genplt</b>:</blockquote>
      <pre class="western" style="margin-left: 1.23in; margin-right: 0.79in">#####
#   plot the local earthquake Mw vs ML
#####cat &gt; lcmdfil &lt;&lt; EOF
'local.xy' 4 0.01 'CI' 0.05 'Local'
EOF
genplt -XLEN 5 -YLEN 5 -X0 2 -Y0 1 -XMIN 1.0 -XMAX 7.5 -YMIN 1.0 -YMAX 7.5 -TX "ML (H)" -TY "Mw" -L lcmdfi
mv GENPLT.PLT LSLU.PLT
#####
# plot the SLU Mw vs ML
#####
cat &gt; ecmdfil &lt;&lt; EOF
'eml_H.xy' 0 0.01 'CI' 0.05 '1 sig'
EOF
genplt -XLEN 5 -YLEN 5 -X0 2 -Y0 1 -XMIN 1.0 -XMAX 7.5 -YMIN 1.0 -YMAX 7.5 -TX "ML (H)" -TY "Mw" -E ecmdfil
mv GENPLT.PLT ESLU.PLT
#####
# plot the SMSIM bounds as a polynomial. The first line says use the file SMSIMML.xy, plot in red, and fill
#    The second line says use the file SMSIMML.xy, use the color black, and only plot the outline of the polygon
#    The result is a shaded red area outlined in black
#####
cat &gt; pcmdfil &lt;&lt; EOF
'SMSIMML.xy' 2 1
'SMSIMML.xy' 1 0
EOF
#####
#    note that since there was no -LPOS "TR" on the command line, no legend is plotted.
genplt -XLEN 5 -YLEN 5 -X0 2 -Y0 1 -XMIN 1.0 -XMAX 7.5 -YMIN 1.0 -YMAX 7.5 -TX "ML (H)" -TY "Mw" -P pcmdfil
mv GENPLT.PLT SMSIM.PLT
#####
#      concatenate placing red on bottom, then results with error bars and then the local
#####
cat SMSIM.PLT ESLU.PLT LSLU.PLT &gt; ALL.PLT</pre>
      <p> <br>
        <br>
      </p>
      <h3 class="western">September 16, 2020</h3>
      <ul>
        <li>
          <p>Corrected the <i>fileid </i>command of <b>gsac</b> to
            correctly do concat.&nbsp; Previously &nbsp; <i>fileid list
              fname dist format colon concat on</i> would not
            concatenate while &nbsp; <i>fileid list fname dist
              format&nbsp; on format colon</i> would. The solution was
            to require a match to <i>CONcat </i>instead of <i>COncat.</i></p>
        </li>
      </ul>
      <h3 class="western">May 20, 2020</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified <b>srfpre96</b> and <b>jntpre96</b>
            in VOLIV/srfpre96.f and jntpre96.f to avoid exceeding array
            dimensions. Currently there are NM=12000 observations
            permitted at NP=512 unique periods. If the data set exceeds
            these limits an error message is written, and the code uses
            the truncated data set. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">At the request of a user, <b>sacmft</b>
            was modified in VOLII/src/sacmft96.f to introduce the -OE
            and -OF options to output the real and imaginary parts of
            the analytic filtered trace and the envelope. If the trace
            is CCM.BHZ then the output will be of the form
            CCM.BHZ_10.0_E, for example where the 10.0 is the period.
            This is mostly for those who need to see the results of the
            Hilbert transform. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>genplt</b> in
            CALPLOT/Utility/genplt.f now permits a polygon draw or fill
            with the -P pcmdfil which consists of lines "filename color
            fill/no_fill". Thus one could fill in read and then with a
            second line in pcmdfil draw the boundary in black. </p>
        </li>
        <li>
          <p>Added more precision to epoch time stamp in the <i>plotpk</i>
            command of <b>gsac.</b></p>
        </li>
      </ul>
      <h3 class="western">February 24, 2020</h3>
      <ul>
        <li>
          <p>Corrected gsac_fileid.c&nbsp; in
            PROGRAMS.330/VOLVIII/gsac.src.&nbsp; The <i>list </i>option
















            was not implemented correctly.&nbsp; A an array dimension
            was corrected. In addition there is a <i>"list bname" </i>option
















            which strips the directory information to just display the
            file name.</p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2019</h2>
      <hr>
      <hr>
      <h3 class="western">December 30, 2019</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">The current release is <a
              href="/eqc/eqc_cps/CPS/cpslisc.html"><b>NP330.Dec-31-2019.tgz</b></a>
          </p>
        </li>
        <li>
          <p>Modified <b>surf96</b> <b>joint96</b> <b>rftn96</b> in <b>VOLV</b>
            to introduce a Menu option 51 - Change the maximum depth of
            inversion. This also required a change to <b>rftndr96</b>
            which computes the receiver function partial derivatives.
            There were two objectives here. First to be able to focus on
            shallow structure while maintaining the fit to dispersion
            and receiver functions that depended on deeper structure and
            to make the computation of the RFTN's faster.&nbsp; Note
            that the program <b>rftndr96</b> can be run from the
            command to make Sac files of the RFTN and&nbsp; its
            derivatives.&nbsp; Fortunately the binary format of control
            files had sufficient fields for growth so that binary
            control files from previous runs could continue to be used.
            The change was prompted to model data sets consisting of
            global, regional and local dispersion as well as teleseismic
            and local earthquake P-wave receiver functions.</p>
        </li>
      </ul>
      <ul>
        <li>
          <p>The programs <b>rspec96</b> and <b>rspec96p </b>were
            written and placed in PROGRAMS.330/VOLVI/src. These programs
            solve the wave propagation program in plane layered
            isotropic media using generalized reflection and
            transmission matrices, using the development of Pei et al
            (2008) [Pei, D. and Louie, J. N. and Pullammanappallil, S.
            K. (2008). Improvements on computation of phase velocities
            of (Rayleigh) waves based on the generalized R/T coefficient
            method, Bull. Seism. Soc. Am. 98,&nbsp; 280-287.] The
            methodology was extended to work with SH and fluid layers.
            In addition the codes will compute synthetics for a mixed
            fluid - solid layer media. The only problem is that the low
            frequency static terms may not be correctly computed.&nbsp;
            The <b>hspec96&nbsp; </b>and <b>hspec96p</b> codes will
            only permit a fluid layer stack at the top or bottom of the
            layered elastic structure but not at both.&nbsp; Some
            initial testing indicates that the <b>hspec96&nbsp; </b>and

































            <b>hspec96p </b>codes could be used to solve the mixed
            fluid - solid problem if the S-wave velocity is set to some
            small value, e.g., perhaps 0.001 km/s instead of 0.0 km/s. </p>
          <p>A presentation of the theory and test cases are given in <a
              href="RSPEC/index.html">RSPEC</a></p>
          <p>The sequence of operations to make synthetics is similar to
            that using <b>hspec96</b>:</p>
        </li>
      </ul>
      <dl>
        <dd>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <pre class="western">hprep96 -M model -d dfile 
hspec96
hpulse96 -V -p -l 1</pre>
                </td>
                <td style="border: none; padding: 0in">
                  <pre class="western">hprep96 -M model -d dfile
rspec96
hpulse96 -V -p -l 1</pre>
                </td>
              </tr>
            </tbody>
          </table>
        </dd>
      </dl>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>Utility/genplt.f </b>- add
            -E ecmdfil which plots error bar the data file which has
            entries of the form &nbsp; x y dx dy and the bar is plotted
            at (x+-dx,y) and (,y+-dy)</p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVI/hudson96.f</b> - Now
            computes the Green's functions for a point force </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/sdpsrf96.f - </b>When
            plotting error bars with shaded circles, plot circular
            outline last for the solid symbol </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIV/srfpre96.f -</b> Change
            dimension on line 445 to avoid abort with a large data set
            instead of a graceful truncation </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/sdisp96.f</b>- online
            help shows usage of <i>-cmin cmin -cmax cmax </i>arguments</p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/sdpder96.f - </b>add
            -V verbose flag to output the values as a function of depth
            for use with other codes </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/sdpdsp96.f </b>- when
            plotting error bars and shaded circles, plot outline last</p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>gsac - </b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">gsac_in.c and
                gsac_conv.c.&nbsp; I incremented the storage for the
                temporary arrays used by the interpolation routine, by
                slightly changing the arguments to the calloc() and
                realloc() calls. </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">gsac_mt.c - </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">gsac_writesp.c - DEPMIN
                DEPMAX DEPMEN are correctly set now for the command <i>writesp</i>
              </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">gsac_conv.c - to remove
                number randomness, and as a hack, the calloc and realloc
                counts at line 231-232 were incremented by one </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">gsac_in.c - to remove number
                randomness, and as a hack, the calloc and realloc counts
                at line 129-133 were incremented by one </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">gsac_mt.c - the <i>mt</i>
                command assumes that the Green's functions were computed
                using a model given in terms of km, km/s and gm/cm3. For
                a step-like moment tensor source, the Green's functions
                will be cm, cm/s, cm/s/s depending on the spulse/hpulse
                argument for a seismic moment of 1.0e+20 dyne-cm. This
                command accounts for this scaling to give the output in
                m, m/s, m/s/s for the desired seismic moment. When
                computing the response for a force, a factor of 1.0e+15
                is used. This fix ensures that the output units are
                correct when the forces are&nbsp; in dynes.</p>
            </li>
            <li>
              <p style="margin-bottom: 0in">gsac_fileid.c&nbsp;&nbsp;&nbsp;

































                The FILEID command, which has been there for a long
                time, now permits the output of the USER0, USER1, ...,
                USER9 header values which the LIST option is invoked. In
                addition the filename can be output under the LIST
                option FNAME.&nbsp; Finally the output under the LIST
                option can be concatenated horizontally rather than the
                default vertical.&nbsp; The reason for this change was
                the need to have more information.&nbsp; The following
                images show the use of these options </p>
              <table width="100%" cellspacing="2" cellpadding="2">
                <tbody>
                  <tr valign="top">
                    <td style="border: 1px double #808080; padding:
                      0.02in">
                      <p align="center"> <img src="20190930/P001.png"
                          name="Image14" width="648" border="0"
                          align="bottom" height="468"> </p>
                    </td>
                    <td style="border: 1px double #808080; padding:
                      0.02in">
                      <p align="center"> <img src="20190930/P002.png"
                          name="Image15" width="648" border="0"
                          align="bottom" height="468"> </p>
                    </td>
                    <td style="border: 1px double #808080; padding:
                      0.02in">
                      <p align="center"> <img src="20190930/P003.png"
                          name="Image16" width="648" border="0"
                          align="bottom" height="468"> </p>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <blockquote> GSAC&gt; sort up evdp<br>
                        GSAC&gt; fileid list fname evdp format equals</blockquote>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <blockquote> GSAC&gt; sort up evdp<br>
                        GSAC&gt; fileid list fname evdp format equals
                        concat on</blockquote>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <blockquote> GSAC&gt; color rainbow<br>
                        GSAC&gt; sort up evdp<br>
                        GSAC&gt; fileid list fname evdp gcarc format
                        equals concat on<br>
                        GSAC&gt; p overlay on</blockquote>
                    </td>
                  </tr>
                </tbody>
              </table>
            </li>
            <li>
              <p>gsac_fg.c&nbsp; The FG or FUNCGEN command supports
                three new pulses: SIN2, SIN4 and PAR2. The functions are
                defined: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SIN2: &nbsp;
                &nbsp; &nbsp; &nbsp; (2/T) sin^2 ( pi t / T) where T is
                duration<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                SIN4 : &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sin^4 ( pi t
                / T)<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                PAR2: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Day,
                Rimer, Cherry double integral of the spall force
                function with duration T.&nbsp; Mathematically this is
                defined as</p>
              <blockquote style="margin-right: 3.91in">t H(t) + (t-T)
                H(t - T) - t<sup>2</sup> H(t) - (t -T)<sup>2</sup> H(t -
                T)</blockquote>
              <blockquote>These pulse have the option NORM ON or NORM
                OFF.NORM ON will ensure that the area under the pulse,
                e.g., the zero frequency level of the spectrum is 1.0.
                Thus these pulses as low pass filtered impulses.&nbsp;
                The figures below display the pulses, their spectra and
                the second derivative of the pulses. The next table
                displays the peak pulse amplitude as a function of
                duration, T, and whether the NORM is ON or OFF. </blockquote>
              <table width="100%" cellspacing="2" cellpadding="2">
                <tbody>
                  <tr>
                    <td colspan="3" style="background: #ffff66; border:
                      none; padding: 0in" valign="top" bgcolor="#ffff66">
                      <p align="center"> Peak Amplitude of SIN2, SIN4
                        and PAR2 source pulses as a function of duration
                        T</p>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> Pulse</p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> NORM OFF </p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> NORM ON</p>
                    </td>
                  </tr>
                </tbody> <tbody>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> SIN2</p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> 1</p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> 2/T</p>
                    </td>
                  </tr>
                </tbody> <tbody>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> SIN4</p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> 1</p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> 8 / (3 T)</p>
                    </td>
                  </tr>
                </tbody> <tbody>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> PAR2</p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> (1/8) T<sup>2</sup></p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p align="center"> 3 / ( 2 T )</p>
                    </td>
                  </tr>
                </tbody>
              </table>
              <table width="100%" cellspacing="2" cellpadding="2">
                <tbody>
                  <tr>
                    <td colspan="3" style="background: #ffff66; border:
                      none; padding: 0in" valign="top" bgcolor="#ffff66">
                      <p align="center"> <font style="font-size: 14pt"
                          size="4"><b>NORM OFF</b></font></p>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <img src="20190930/FG_1.png" name="Image17"
                          width="469" border="0" align="bottom"
                          height="471"> </p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <img src="20190930/FG_2.png" name="Image18"
                          width="464" border="0" align="bottom"
                          height="463"> </p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <img src="20190930/FG_3.png" name="Image19"
                          width="462" border="0" align="bottom"
                          height="468"> </p>
                    </td>
                  </tr>
                </tbody> <tbody>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <br>
                      </p>
                      <p>fg&nbsp; delta 0.02 npts 256 sin2 1.0 <br>
                        fg&nbsp; delta 0.02 npts 256 sin4 1.0 <br>
                        fg&nbsp; delta 0.02 npts 256 par2 1.0 </p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <br>
                      </p>
                      <p>Amplitude spectra of traces to the left </p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <br>
                      </p>
                      <p>Second derivative of the traces to the left </p>
                    </td>
                  </tr>
                </tbody>
              </table>
              <p style="margin-bottom: 0in"><br>
                The following displays the pulses and spectra for <i>NORM
















                  ON</i>. Note that the spectral amplitude at zero
                frequency is 1.0. </p>
              <table width="100%" cellspacing="2" cellpadding="2">
                <tbody>
                  <tr>
                    <td colspan="3" style="background: #ffff66; border:
                      none; padding: 0in" valign="top" bgcolor="#ffff66">
                      <p align="center"> <font style="font-size: 14pt"
                          size="4"><b>NORM ON</b></font></p>
                    </td>
                  </tr>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <img src="20190930/FG_5.png" name="Image20"
                          width="469" border="0" align="bottom"
                          height="468"> </p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <img src="20190930/FG_6.png" name="Image21"
                          width="464" border="0" align="bottom"
                          height="463"> </p>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <img src="20190930/FG_7.png" name="Image22"
                          width="462" border="0" align="bottom"
                          height="468"> </p>
                    </td>
                  </tr>
                </tbody> <tbody>
                  <tr valign="top">
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <br>
                      </p>
                      <blockquote>fg&nbsp; delta 0.02 npts 256 sin2 1.0
                        norm on <br>
                        fg&nbsp; delta 0.02 npts 256 sin4 1.0 norm on <br>
                        fg&nbsp; delta 0.02 npts 256 par2 1.0 norm on </blockquote>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <br>
                      </p>
                      <blockquote>Amplitude spectra of traces to the
                        left </blockquote>
                    </td>
                    <td style="border-top: none; border-bottom: 1px
                      double #808080; border-left: 1px double #808080;
                      border-right: 1px double #808080; padding-top:
                      0in; padding-bottom: 0.02in; padding-left: 0.02in;
                      padding-right: 0.02in">
                      <p> <br>
                        <br>
                      </p>
                      <p>Second derivative of the traces to the left </p>
                    </td>
                  </tr>
                </tbody>
              </table>
              <p><a href="SPALL/index.html">Spall modeling</a>. The
                scripts and discussion of the spall modeling is given in
                this link. </p>
            </li>
          </ul>
        </li>
      </ul>
      <h3 class="western">February 19, 2019</h3>
      <ul>
        <ul>
          <ul>
            <ul>
              <li>
                <h4 class="western" style="margin-top: 0in;
                  margin-bottom: 0in"> The current release is <a
                    href="/eqc/eqc_cps/CPS/cpslisc.html">NP330.Feb-19-2019.tgz</a>
                </h4>
              </li>
              <li>
                <h4 class="western" style="margin-top: 0in;
                  margin-bottom: 0in"> The version of rdseed (v5.3) is
                  old code from IRIS. IRIS currently uses FetchData to
                  provide waveforms and responses and does not support
                  rdseed.&nbsp; The modern clang&nbsp; compiler will not
                  compile rdseed because of many errors in the
                  code.&nbsp; rdseed&nbsp; is provided here for use with
                  historical SEED volumes.</h4>
              </li>
            </ul>
          </ul>
        </ul>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2018</h2>
      <hr>
      <hr>
      <h3 class="western">November 30, 2018</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>CALPLOT/Utilities/genplt.f&nbsp;

































            </b>Added 'DO' for line plotting to plot dotted line. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLII/src/do_pom4.c </b>which
















            had an improper sequence in reading a string </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/src/sdpegn96.f </b>Added

































            the flag -ZF to plot the ratio of Z/R which is just
            1/ellipticity </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLV/src/fmplot.f&nbsp; </b>Added

































            -NOSYMMETRIC flag to permit plotting radiation pattern of a
            non-symmetric moment tensor. This was part of an exercise to
            understand how M13 and M31, for example, contribute to the
            symmetric moment tensor. </p>
        </li>
        <li>
          <p><b>VOLV/src/fmech96.f </b>Because of current interest in
            the wavefield in a fluid,&nbsp; This then required a
            discussion of the physical units. The comment in the source
            code is as follows: </p>
          <pre class="western" style="margin-right: 0.79in">&lt; c       02 JUL 2018 - if the sensor is in the fluid and the source is in the
&lt; c         solid, it is possible to compute the pressure wavefield for a
&lt; c         given moment tensor in the solid.
&lt; c        
&lt; c         Assuming that the model file is given in terms of km, km/s and
&lt; c         gm/cm^3, then the P?? Green's functions output by the CPS codes`
&lt; c         must be multiplied by the factor of 10000 to get the output in
&lt; c         units of Pascal (Pa = nt-m). In addition the output is
&lt; c         multiplied by -1 to convert from stress (traction) to pressure).
&lt; c
&lt; c         This is understood by comparing the vector amplitude of the ground
&lt; c         velocity of the P wave in a fluid to PEX Green function for a
&lt; c         step source time function.
&lt; c
&lt; c         AmpEX = (i omega)      1     PEX = - (i omega)      1
&lt; c                 ----------     _             -------------- _
&lt; c                 4 pi rho Vp^3  R             4 pi     Vs^2  R
&lt; c         Thus the far-field ZEX and REX will have the same shape as
&lt; c         the PEX.  Since the Fourier transforms differ by the factor
&lt; c         (rho Vp), the peak displacement and peak (-PEX) will differ by
&lt; c         the same factor.
&lt; c
&lt; c         Model Parameters     Unit of source moment ZRT     P
&lt; c  CGS    cm, cm/s, gram       dyne-cm               cm      dyne/cm^2
&lt; c  MKS    m , m/s , kilogram   Nt-m                  m       NT/m^2
&lt; c  MIX    km, km/s, gram       10^20 dyne-cm         cm      10^4 Pa
&lt; c
&lt; c         for the last entry, consider AmpEx. If we convert these units to
&lt; c         CGS, then everything will be 10^20 time smaller than if we had computed
&lt; c         using the MIXed units. So for the MIXed units, fmech96 assumes that the output
&lt; c         is for a moment of 10^20 dyne-cm. If the user asks for results for a moment
&lt; c         of 10^25 dyne-cm, the Green s functions are multiplied by the factor of 10^5.
&lt; c
&lt; c         Likewise the factor (rho Vp) in (gram * km/s) MIXed units will be
&lt; c         10^6 larger in MKS units but the particle velocity is still in cm/s =
&lt; c         (0.01 m/s). Multiplying together, this gives a factor of 10^4.  So
&lt; c         for the MIXed units, when the user asks for synthetics with moment Mo,
&lt; c         the output Green s functions for the P?? are multiplied by a factor of
&lt; c         (Mo/10^20) (10^4) to get the result in Pascal.
&lt; c
&lt; c </pre>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVI/src/hspec96.f </b>Use
            double precision to specify source/receiver depth in when
            converting spherical model to flattened model </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVI/src/hstat96.f </b>Correct

































            output flags for the <i>file96</i> format for the case
            -EQEX. The -ALL had worked properly/ </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVII/src/wfdly96.f </b>Corrected

































            formatting at line 168 </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVIII/gsac.src/gsac: </b>To
















            permit the use of <b>gsac </b>with exploration data, it is
            necessary to be very careful about the use of the <i>lcalda
            </i>header value. If <i>lcalda</i> is <i>false</i>, then
            the distance and azimuths are not computed or recomputed
            based on the values of the <i>stla, stlo, evla </i>and <i>evlo















            </i>fields. See the discussion for changes on December 31,
            2017, below.&nbsp; Now if <i>lcalda</i> is set to be <i>true</i>,
            the distance and azimuth are computed before the <i>write</i>&nbsp;

































            <i>(w) </i>or <i>write header (wh).</i> </p>
        </li>
        <li>
          <p><b>CALPLOT/Utility/genplt.f</b>&nbsp;&nbsp; By default axes
            are marked with tics and have numbers. Also the x-axis is
            horizontal and the y-axis is vertical on the page.&nbsp; I
            had the need to plot a function of (depth,value) with depth
            downward. I also did not want the amplitude axis
            labeled.&nbsp; The command to do this is </p>
          <pre class="western" style="margin-right: 0.39in"> <font style="font-size: 10pt" size="2"><b>genplt -NOTICY -X0 1.9 -XLEN 5.0 -YLEN 7.6 -XMIN -100 -XMAX 100 -YMIN 0 -YMAX 8.0 -TX 'z (km)' -TY '' -C cmdfil -XDOWN</b></font></pre>
          <p style="margin-bottom: 0in"> with the resulting plot show on
            the left. The plot on the right is without the -XDOWN flag.
            To use the -XDOWN feature, compose the plot assuming
            assuming X is horizontal. Thus the X-axis is longer than the
            Y-axis. The -XDOWN just rotates this figure, and correctly
            handles the presentation of the axis notation.&nbsp; The
            purpose of this figure was to show normalized eigenfunction
            shapes as a function of depth, but plotting tics and
            amplitudes would distract from the desire to show the
            symmetric and anti-symmetric nature of the eigenfunctions. </p>
        </li>
      </ul>
      <dl>
        <dd>
          <table width="999" cellspacing="2" cellpadding="2">
            <tbody>
              <tr valign="top">
                <td style="border: none; padding: 0in" height="647">
                  <p style="margin-bottom: 0in"> <br>
                    <img src="20181130/genplt20181130.png"
                      name="Image23" width="614" border="0"
                      align="bottom" height="364"> </p>
                  <p align="center">With the -XDOWN flag</p>
                </td>
                <td style="border: none; padding: 0in">
                  <p style="margin-bottom: 0in"> <br>
                    <img src="20181130/genplt20181130a.png"
                      name="Image24" width="365" border="0"
                      align="bottom" height="590"> </p>
                  <p align="center">Without the -XDOWN flag</p>
                </td>
              </tr>
            </tbody>
          </table>
        </dd>
      </dl>
      <h3 class="western">June 5, 2018</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVIII/gsac.src/gsac_trapezoid.c

































            </b>The <b>gsac&nbsp; </b><i>boxcar, triangle </i>and <i>trapezoid

































            </i>commands did not work properly for dt &lt; 1 sec. The
            line in routine gsac_pulconv() was changed from <i>np = 1 +
              (int)(t1 + t2 + t3)/dt ; </i>to <i>np = 1 + (int)((t1 +
              t2 + t3)/dt) ; </i>The lesson is to be careful with type
            casting, e.g., the (int) and parentheses</p>
        </li>
        <li>
          <p><b>VOLVIII/src/sacspc96.f&nbsp; </b>Added options to plot
            dashed lines for the spectra. This was because when plotting
            with the gray scale, the lines could not be distinguished
            when the user tried different colors.&nbsp; The user can now
            specify the type of line and the basic dash length. For
            example, a dotted line would be implemented as ^_^_^_&nbsp;
            where the ^ indicates a space. Each space and each _ is of
            length on one dash length unit.&nbsp; The default behavior
            is a solid curve for the spectra, but a dotted, dot-dash or
            a dashed curve can be implemented by one of the following
            command line arguments. </p>
        </li>
      </ul>
      <blockquote>&nbsp;<i>-LDOT ldot </i>(default none ) dotted line
        with length <i>ldot</i><br>
        &nbsp;<i>-LDOTDASH ldotdash</i> (default none ) dash dotted line
        with length <i>ldotdash</i><br>
        &nbsp;<i>-LDASH ldash</i> (default none ) dashed line with
        length <i>ldash</i></blockquote>
      <blockquote>For the default axes lengths, a value of ldot,
        ldotdash or ldash = 0.05 is OK, e.g., <i>-LDOT 0.05</i></blockquote>
      <ul>
        <li>
          <p><b>VOLVIII/gsac.src/gsac_ch.c, gsac_help.h, </b>and <b>mklhdr.c</b>
            The header values were incorrectly named IDHR12 etc instead
            of IHDR12. In addition the <i>ch</i> command can now be
            used to change the value of IHDR11.&nbsp; Whenever the <b>gsac</b>
            <i>sort</i> command is used, it will set the value of IHDR11
            to the number of traces stacked. This change permits the use
            of <b>sac</b> stacking and then a manual entry of the
            number of traces stacked. This is for compatibility with use
            of <b>do_mft</b> when ambient noise cross-correlations are
            processed. </p>
        </li>
      </ul>
      <h3 class="western">May 1, 2018</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVII/src/wvfdly96.f </b>Corrected

































            format at line 168 </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/src/sdpegn96.f </b>Changed

































            format label for Love output from ARE to ALE and ENERGY to
            AL and AR for Love and Rayleigh </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/src/sregn96.f </b>and
            <b>slegn96.f</b>&nbsp; The -V (verbose flag) also gives the
            Lagrangian/(omega^2 I0). This was done for testing the
            correctness of the eigenfunctions for some extreme models. A
            perfect solution must have a Lagrangian = 0, but when the
            Lagrangian is very large, a relative error may be a better
            indicator. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIV/src/rftnpv96.f </b>The
            -SAC flag creates sac files of observed and predicted
            eigenfunctions for use with other plotting routines. The
            KSTNM USER0 (gauss alpha parameter) and USER4 (ray parameter
            in s/km) are placed in the headers. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIV/src/rftnr96.f&nbsp; </b>A
            feature was added that only permits the computation of a
            P-wave receiver function for the upper part of the model
            where the ray parameter is LESS than the P-wave slowness.
            This was added to permit computation of receiver functions
            from local earthquake data. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLV/src/refmod96.f </b>Correctly

































            implements -HS source_depth for computation of reflection
            multiples </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVI/src/hrftn96.f </b>A
            feature was added that only permits the computation of a
            P-wave receiver function for the upper part of the model
            where the ray parameter is LESS than the P-wave slowness.
            This was added to permit computation of receiver functions
            from local earthquake data. </p>
        </li>
        <li>
          <p><b>VOLVI/src/hudson96.f </b>Corrected a time shift
            computation which attempted to correct for the delay (or
            advance) in the tstar pulse. This is not needed for the code
            to agree with the hspec96 computations.</p>
        </li>
      </ul>
      <h3 class="western">April 15, 2018</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>gsac
              (VOLVIII/gsac.src/gsac_wh.c and gsac_write.c) </b>In
            December, 2017 gsac_ch.c was changed so that the values of
            DIST and GCARC are not overwritten when lcalda = false. This
            was to permit the sac file to be used for exploration
            without out the subterfuge of creating pseudo
            latitude/longitude values for the computation of the
            distances. The problem introduced because lcalda was not set
            to true. By placing the fix in gsac_wh.c and gsac_write.c, A
            side effect is that lcalda must be set before the <br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            sequence must not be exactly<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            ch lcalda true<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            ch evla 12 evlo 34 stla 45 stlo 56<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            but can be<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            ch evla 12 evlo 34 stla 45 stlo 56<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            ch lcalda true<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            The wh and write checks this. </p>
        </li>
        <li>
          <p><b>VOLV/src/time96.f </b>- Added a verbose flag to print
            the velocity model for debugging models.</p>
        </li>
      </ul>
      <h3 class="western">March 1, 2018</h3>
      <ul>
        <li>
          <p><b>CALPLOT/Utilities/calplt.f&nbsp;</b> Removed tabs from
            source code, and added the command SUBSC90 to plot a string
            with subscript rotated 90 degrees to be parallel to the
            y-axis.</p>
        </li>
      </ul>
      <h3 class="western">February 22, 2018</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVIII/src/sacpol.f&nbsp; </b>Corrected
































            labeling error for -X1RT and draw 4 arrows at end of segment</p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2017</h2>
      <hr>
      <hr>
      <h3 class="western">December 31, 2017</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>VOLV/src/shwmod96.f</b>
            -&nbsp; removed extraneous NLAY and NBDY </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLV/src/refmod96.f -&nbsp;</b>
            correctly implemented the -HS source_depth for reflection
            multiples. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVI/src/hrftn96.f </b>-
            cleaned usage text for -h command </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVI/src/hudson96.f </b>-&nbsp;

































            added -V flag for verbose output </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVIII/src/sacpol.f </b>-
            related the arrow length to the length of the axes </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVIII/gsac.src/gsac_ch.c </b>-
            Previously if the epicenter and station latitudes are
            defined, then the distance, azimuth and back azimuth are
            calculated. However when working with exploration data, one
            may want to enter these coordinates as kilometers instead of
            as degrees and to manually specify the distance and not to
            compute these values. The behavior is now controlled by the
            LCALDA header variable. If LCALDA == TRUE, then it is
            assumed that the coordinates are in degrees and the distance
            and azimuths are computed for the Earth. Now if LCALDA ==
            FALSE, then the EVLA, EVLO and STLA, STLO fields are not
            used to compute the distance and azimuth. Instead the user
            must compute these separately and enter them with the
            ChangeHeader command. </p>
        </li>
        <li>
          <p><b>VOLVIII/gsac.src/gsac_corr.c </b>- added the LCALDA ==
            TRUE to the computation of distances and azimuths for the
            following reason. One use of cross-correlation is to obtain
            the empirical Green's functions from ambient noise. In this
            case it is desired to get the distance between the two
            stations. So the EVAL EVLO fields of the original waveforms
            are ignored, the coordinates of the master station&nbsp; are
            used for the&nbsp; EVLA and EVLO for all traces, and the
            distances are computed for the Earth. This is the case for
            LCALDA == TRUE.&nbsp;&nbsp;&nbsp; Another use is to&nbsp;
            focus on the great circle distance from the earthquake to
            each station. In this case we are interested in the
            difference in great circle distances between the two
            stations. This is accomplished by setting LCALDA = FALSE.</p>
        </li>
      </ul>
      <h3 class="western">October 16, 2017</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Because of a request to estimate
            phase velocities using two two stations on the same great
            circle path, changes were made to <b>do_mft</b>, <b>sacmft96</b>,
            and <b>gsac</b>: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>gsac </b>- the
                correlation command now correctly outputs the difference
                in epicentral distance between the master trace and the
                other traces </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>sacmft96 </b>-&nbsp;
                supports the command line flag <b>-P0 </b>( p zero )
                for the computation of phase.&nbsp; Given the CPS
                definition of the Fourier transform, the phase velocity
                is defined by c = omega * dist / (tphase + N 2 pi ). </p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in">For interstation Greens
                    functions from ambient noise, tphase is -phase +
                    pi/4 + omega*dist/U, where phase is the
                    instantaneous phase at the maximum of the envelope
                    and U is the corresponding group velocity. For the
                    derivation of this refer to <a href="../TUTORIAL/EMPIRICAL_GREEN/MFT.pdf">../TUTORIAL/EMPIRICAL_GREEN/MFT.pdf</a>
                  </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">For the
                    cross-correlation of two stations on the same great
                    circle path, tphase is -phase + omega*dist/U </p>
                </li>
              </ul>
            </li>
            <li>
              <p><b>do_mft </b>- supports the command <b>-P0 </b>( p
                zero ) to activate the interactive phase velocity module
                that calls the modified <b>sacmft96</b></p>
            </li>
          </ul>
        </li>
      </ul>
      <h3 class="western">September 12, 2017</h3>
      <ul>
        <li>
          <p>Corrected logic error in the file <i>PROGRAMS.330/VOLII/src/do_mft4.c
































            </i>which caused the phase match filter NOT to execute. The
            old code was </p>
        </li>
      </ul>
      <pre class="western" style="margin-right: 0.39in">#ifdef DEBUG
fprintf(stderr,"ModeSelect: %d pathname: %s\n",ModeSelect, pathname);
sprintf(ostr,"%s -F %s -D disp.d -AUTO",pathname, fname);
#endif</pre>
      <blockquote> The corrected code&nbsp; removes the ifdef/endif
        which caused this important section to be bypassed.</blockquote>
      <pre class="western" style="margin-right: 0.39in">fprintf(stderr,"ModeSelect: %d pathname: %s\n",ModeSelect, pathname);
sprintf(ostr,"%s -F %s -D disp.d -AUTO",pathname, fname);</pre>
      <blockquote> Thanks to Leticia Duca, Universidad Nacional de La
        Plata, Argentina</blockquote>
      <h3 class="western">July 7, 2017</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected <b>spulse96</b> for
            use with <b>slat2d96</b>.&nbsp; The description in&nbsp;<a
              href="../TUTORIAL/SLAT2D/index.html">../TUTORIAL/SLAT2D/index.html</a>&nbsp;&nbsp;&nbsp;&nbsp;
            is correct. The implementation in <b>spulse96</b> was
            not.&nbsp; The problem was that there was a geometrical
            spreading term sqrt(wvno r)&nbsp;&nbsp; where the wvno must
            be the wavenumber at the receiver, and not the average
            wavenumber over the path.&nbsp; The documentation is
            correct. the example has been rerun. </p>
        </li>
        <li>
          <p>On 29 JUL 2017 corrected <b>sregn96 slegn96 tregn96
              tlegn96 </b>to handle the case of a source in the
            halfspace. The code splits a layer to place the source at a
            layer boundary. However this was not done properly in the
            halfspace when the thickness was 0 or less that required to
            place the source depth there. The correction involved making
            sure the the halfspace thickness (which is of course
            infinite) can define a layer to the split.</p>
        </li>
      </ul>
      <h3 class="western">May 27, 2017</h3>
      <ul>
        <li>
          <p>Modified the routines <i>ramat.f,&nbsp; jramat.f,
              rftndr96.f</i> and&nbsp; <i>modls.f </i>and the program
            <b>rftndr96.f </b>to add the command line option <i>-SAC </i>or















            <i>-sac </i>to be able to run the program from the command
            line to output both the observed and predicted receiver
            functions as sac files. The sac files will be of the format
            CCM_____2017122212232.5, e.g.,
            SSSSSSSS_YYYYMMDDHHMMalp&nbsp; where alp is the Gaussian
            filter parameter. The purpose is to permit the user another
            way to compare the observed and predicted receiver functions
            instead of using the graphics in the <b>joint96</b> or <b>rftn96</b>
            programs. Basically normal operation of the inversion is
            performed, the inversion is paused, and then one executes <b>rftndr96















              -sac </b>from the command line.</p>
        </li>
      </ul>
      <h3 class="western">May 1, 2017</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>The current release is <a
                href="/eqc/eqc_cps/CPS/cpslisc.html">NP330.Apr-12-2017.tgz</a></b>
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><font color="#ff0000"><b>CRITICAL:</b></font>
            The subroutine <i>varsv </i>used by&nbsp; <b>sdisp96,
              scomb96, sregn96 </b>did not handle correctly the case of
            vertical wavenumber = 0 in the propagator matrices. The
            problem arose with the evaluation of <i>sin (ν z )/ ν&nbsp;
            </i>as&nbsp; &nbsp;&nbsp; <i>ν→ 0 .&nbsp;&nbsp; The
              correct&nbsp; </i>limit&nbsp; of the ratio is&nbsp; <i>z.</i>
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIII: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">Subroutine <i>wrdisp.f </i>now

































                works. </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>sdisp96, scomb96,
                  sregn96:</b> </p>
            </li>
            <li>
              <p style="orphans: 2; widows: 2" align="left"><b>tdisp96,
                  tregn96, tcomb96:&nbsp; </b>The problem here was that
                whereas the vertical wavenumber <i>ν</i>&nbsp;&nbsp;
                for isotropic media is either real or imaginary, it can
                also can be <i><b>complex</b></i> for some transversely
                isotropic media. Credit is due to Prof. S. N.
                Bhattacharya of New Delhi for pointing this out
                [Bhattacharya, S. N (2017). Rayleigh wave dispersion
                equation with real terms&nbsp; in layered transversely
                isotropic media, Annals of Geophysics, 60, No 6
                (Sup),&nbsp;
                <meta name="" content="">
                <span style="font-variant: normal"><font color="#000000"><font
                      face="Verdana, Geneva, sans-serif"><font
                        style="font-size: 6pt" size="1"><span
                          style="letter-spacing: normal"><span
                            style="font-style: normal"><span
                              style="font-weight: normal">doi:
                              10.4401/ag-7444&nbsp;</span></span></span></font></font></font></span><span
                  style="font-variant: normal"><font color="#000000"><span
                      style="letter-spacing: normal"> </span></font></span>].
































                This realization required a major code rewrite to handle
                the complex vertical wavenumbers. Prof. Bhattacharya
                showed that the propagator matrix and its compound
                version are always real, however the boundary conditions
                for a halfspace may introduce a complex condition. For
                surface waves, the period equation can be complex, but
                it seems is if the real part has a zero, the complex
                number is also a zero for a dispersion value. The
                surface wave eigenfunctions and dispersion values are
                real though.; </p>
              <p>To start the search for dispersion curves in isotropic
                media, one can search between&nbsp; 0.9 β<sub>min</sub>
                ≦ c ≦ β<sub>max</sub>. For a model for which velocity
                increases with depth, the first value would be slightly
                less than the classical Rayleigh wave phase velocity in
                a halfspace, while the second limit would permit higher
                modes. For a general TI media, the following is done:</p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in">For the minimum value,
                    the topmost solid layer is used to find the zero of
                    the Rayleigh-wave period equation&nbsp; at a
                    frequency of 1 Hz. Since this is treated as a
                    halfspace, there is no dispersion. </p>
                </li>
                <li>
                  <p>For the maximum value, we start at the highest S
                    velocity, and then search for lower phase velocities
                    until both the quasi-P and quasi-SV vertical
                    wavenumbers have a positive real part. There is no
                    requirement that the imaginary part be
                    zero.&nbsp;&nbsp; This must be tested more. </p>
                </li>
              </ul>
              <p><a href="VTI/index.html">Tests of the new code and a
                  illustration of strange things that can occur in VTI
                  media.</a></p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>sdpdsp96, sdpegn96,
                  tdpegn96 tdpsrf96, sdpsrf96: </b>Changed label from <i>sec</i>
                to <i>s</i>.</p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>do_mft: </b>To speed
                processing of a lot of waveforms, the <i>AutoFeed</i>
                feature has been extended so that much less user
                interaction is required - previous processing choices
                are remembered. The original sequence, which is still
                the processing default, is to pick the Sac file, then
                set the units, then set the processing parameters,
                and&nbsp; interactively pick the group velocities or
                phase velocities, and then return to the first page.
                When <i>AutoFeed </i>is selected, then it is assumed
                that the units and processing parameters are to be the
                same, the next file is then automatically processed.
                This speeds the processing by not having to display
                three menu pages with the required interaction for many
                selection.</p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLV: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>mtinfo: </b>in
                subroutine <i>mteig</i>, the array real*8 z(3,3) was
                not defined. This cause a memory problem </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVI: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>tspec96: </b>Accounted
                for&nbsp; the problem in the ratio &nbsp; <i>sin (nu z
                  ) / nu </i>as <i>nu → 0 </i>. </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/src </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>sacpol:&nbsp; </b>Introduced

































                <i>-ARROW </i>flag to indicate direction of increasing
                time</p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/gsac.src: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">Changed the following source
                code for <b>gsac.</b> </p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in"><i>gsac_prs.c:</i> If
                    the reduction velocity is used, e.g., ' p pval' then
                    the PRS???.CTL will covert that to the proper VRED
                    for refmod96 </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">gsac_trans.c:&nbsp;
                    Changed NCHAR from 200 to 300 to permit long names
                    for files </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>gsac_map.c:</i>
                    Change the <i>gmtset</i> line to read<br>
                    <i>gmtset BASEMAP_TYPE FANCY _DEGREE_FORMAT -D
                      MEASURE_UNIT cm</i> <br>
                    to be compatible with GMT4.3.1 and to set the degree
                    format to vary from -180 to + 180 for longitude. </p>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">CALPLOT/Utility: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>genplt: </b>Make the
                length of the line segments slightly longer for the NO
                and DA legends. </p>
            </li>
          </ul>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2016</h2>
      <hr>
      <hr>
      <h3 class="western">May 8, 2016</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>The current release is
              NP330.May-08-2016.tgz</b> </p>
        </li>
        <li>
          <p>New program: <b>mtinfo</b>&nbsp;&nbsp; This program is an
            implementation of Jost, M. L., and R. B. Herrmann (1989). A
            student's guide to and review of moment tensors, Seism. Res.
            Letters 60, 37-57. <a
href="http://www.eas.slu.edu/People/RBHerrmann/VITA/PUB/SRL_60_2_37-57.pdf">SRL_60_2_37-57.pdf</a>.
            This program decomposes a moment tensor into different
            representations, e.g., isotropic, major and minor double
            couple, etc.&nbsp;&nbsp; The program is invoked as </p>
          <pre class="western">mtinfo -h
 Usage: mtinfo 
  -XX Mxx -YY Myy -ZZ Mzz -XY -Mxy -XZ Mxz -YZ Myz
  [-dc|-mc|-cc|-vd|-clvd|-a|-crack]
  
  -XX Mxx -YY Myy -ZZ Mzz  Moment tensor elements in units of
  -XY Mxy -XZ Mxz -YZ Myz    dyne-cm
                Note -xy Mxy works as well as -yx Mxy
  -dc               3 double couples
  -mc               major couple  
  -cc               double couple and  CLVD
  -vd               3 vector dipoles   
  -clvd             3 CLVDs  
  -crack            opening crack
  -a                all of the above
      Note: if none are set, -a is the default
  -?                   This online help
  -h                   This online help</pre>
          <p> <br>
            As an example, </p>
          <pre class="western">mtinfo -XX 0.264E+22 -YY -0.219E+22 -XY -0.195E+21 -XZ 0.188E+21 -YZ 0.100E+22 -ZZ -0.454E+21 &gt; mtinfo.txt</pre>
          <p> produces the file <a href="MTINFO/mtinfo.txt">mtinfo.txt</a>.
          </p>
        </li>
      </ul>
      <h3 class="western">April 28, 2016</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected <b>sac2eloc</b> which
            got information from the header by using the call to <i>brsac</i>
            in <i>sacsubf.f </i>to a call to <i>brsach</i>. The
            problem was that <i>brsac</i> required a data array
            dimension that was not used since no data were required.
            This caused the program <b>sac2eloc</b> to fail for a file
            with many data points. Thanks to George França from Brazil.
          </p>
        </li>
        <li>
          <p>Fixed error in <i>sacsubf.f </i>n which the character
            header was not read using a call to <i>brsach.</i></p>
        </li>
      </ul>
      <h3 class="western">March 17, 2016</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>gsac</b> <i>writesp </i>now
            supports the options <i>am, ph, rl, im </i>to output the
            amplitude and phase spectra and the real and imaginary parts
            of the complex spectrum. Previously only the amplitude
            spectrum was written. The result is placed in the same
            directory as the original file, but with .am, ph, .rl or .im
            appended to the name. </p>
        </li>
        <li>
          <p>Corrected the routine <i>errelp</i> in <b>elocate.</b>
            The code now follows&nbsp; Flinn,&nbsp; E. A. (1965).
            Confidence regions and error determination for seismic event
            location, Rev. Geophysics 3, 157-185. Note that the code
            does not multiply the error estimate by the F-statistic for
            the confidence region or by the t-statistic for the error in
            latitude, longitude, depth and origin time. </p>
        </li>
      </ul>
      <h3 class="western">February 17, 2016</h3>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected an error in the
            FORTRAN routine <i>etoh </i>in <i>SUBS/sacsubf.f </i>and
            <i>VOLVIII/src/elocate.f</i>. This routine converts epoch
            time (time measured with respect to 1970/01/01 00:00:00.00 )
            to a human form of Year, Month, Day, Hour, Minute, Second,
            Day Of Year. The routine did not give the proper conversion
            for times prior to the reference epoch.&nbsp; This was
            discovered by writing MATLAB/Octave routines. The code
            snippets for testing the conversion are as follow: </p>
          <ul>
            <li>
              <p>FORTRAN - using sacsubf.f for the time routines </p>
            </li>
          </ul>
        </li>
      </ul>
      <pre class="western" style="margin-right: 0.79in"> real*8 epoch
 character str*40
 integer year,month,day,hour,minute,date,doy
 real second
 year = 1969
 month = 01
 day = 01
 hour = 18
 minute = 27
 second = 23.408
 WRITE(6,*)year,month,day,hour,minute,second
 call htoe(year,month,day,hour,minute,second,epoch)
 write(6,'(f20.3)')epoch
 call etoh(epoch,date,str,doy,
 1 year,month,day,hour,minute,second)
 WRITE(6,*)year,month,day,hour,minute,second,doy,str
 end
        1969           1           1          18          27   23.4080009    
       -31469556.592
        1969           1           1          18          27   23.4080009               1 1969/001 1969/01/01 18:27:23.408</pre>
      <ul>
        <ul>
          <li>
            <p>C - using csstim.c in PROGRAMS.330/SUBS </p>
          </li>
        </ul>
      </ul>
      <pre class="western" style="margin-right: 0.79in">#include "csstim.h"
main()
{
        double epoch ;
        char str[40] ;
        int year,month,day,hour,minute,date,doy ;
        int sec, msec;
        float second ;
        year = 1969 ;
        month = 01 ;
        day = 01 ;
        hour = 18 ;
        minute = 27 ;
        sec = 23;
        msec = 408;
        second = 23.408 ;
        printf("%4.4d %2.2d %2.2d %2.2d %2.2d %2d %3d\n",year,month,day,hour,minute,sec,msec);
        htoe2(year,month,day,hour,minute,sec,msec,&amp;epoch);
        printf("%20.3f\n",epoch);
        etoh(epoch,&amp;year,&amp;doy,&amp;month,&amp;day,&amp;hour,&amp;minute,&amp;sec,&amp;msec);
        printf("%4.4d %2.2d %2.2d (%3.3d) %2.2d %2.2d %2.2d %3.3d  \n",year,month,day,doy,hour,minute,sec,msec);
}
1969 01 01 18 27 23 408
       -31469556.592
1969 01 01 (001) 18 27 23 408</pre>
      <ul>
        <ul>
          <li>
            <p>C - using csstime.c in PROGRAMS.330/SUBS </p>
          </li>
        </ul>
      </ul>
      <pre class="western" style="margin-right: 0.79in">#include "csstime.h"
struct date_time T;
main()
{
        double epoch ;
        char str[40] ;
        int year,month,day,hour,minute,date,doy ;
        float second ;
        T.year = 1969 ;
        T.month = 01 ;
        T.day = 01 ;
        T.hour = 18 ;
        T.minute = 27 ;
        T.second = 23.408 ;
        printf("%4.4d %2.2d %2.2d %2.2d %2.2d %6.3f\n",T.year,T.month,T.day,T.hour,T.minute,T.second);
        mdtodate(&amp;T);
        htoe(&amp;T);
        printf("%20.3f\n",T.epoch);
        etoh(&amp;T);
        timeprintstr(&amp;T,str);
        printf("%4.4d %2.2d %2.2d %2.2d %2.2d %6.3f %s \n",T.year,T.month,T.day,T.hour,T.minute,T.second,str);
}
1969 01 01 18 27 23.408
       -31469556.592
1969 01 01 18 27 23.408  1969001 Jan  1,1969 18:27:23.408</pre>
      <ul>
        <li>
          <p>Corrected error in computing dT/dh for direct arrivals in <b>elocate.f</b>.&nbsp;
































            This dT/dh is the change in travel time for a change in
            source depth. For the direct arrival for a general layered
            structure, there is no simple T(X) relationship. Instead we
            must compute an X(p) and T(p) where p is the ray
            parameter.&nbsp; Formally </p>
        </li>
      </ul>
      <blockquote style="margin-right: 3.91in">T(p) =
        ∑iNHiVi(1-p2Vi2)12∑_i^N \frac{H_i}{V_i (1 -
        p^2V_i^2)^\frac{1}{2}}&nbsp;&nbsp;&nbsp;&nbsp; </blockquote>
      <pre class="western" style="margin-right: 0.79in">X(p)=∑iHipVi(1-p2Vi2)12X(p) = ∑_i \frac{H_i p V_i}{ ( 1 - p^2 V_i^2) ^  \frac{1}{2} }    </pre>
      <blockquote> When we try to compute a dT/dh for the direct arrival
        to a fixed distance, we&nbsp; must note that the ray parameter
        changes for the ray to the station.&nbsp; Thus we cannot just
        take a partial with respect to the source depth. To resolve this
        consider the general case when both the source depth, h, and the
        ray parameter, p, both change. Thus to first order<br>
        &nbsp;</blockquote>
      <blockquote style="margin-right: 3.91in">T(p+Δp,h+Δh)=T(p,h)+(∂T/∂p)Δp+(∂T/∂h)Δh
































      </blockquote>
      <blockquote style="margin-right: 3.91in">X(p+Δp,h+Δh)=X(p,Δ)+(∂X/∂p)Δp+(∂X/∂h)ΔhX(p+Δp,
h+Δh)
































        = X(p,Δ) + (∂X/∂p) Δp + (∂X/∂h) Δ</blockquote>
      <blockquote>Since we do not want the X to <b>change</b>, the <b>change
in
































          p </b>is related to the <b>change in h</b>, and thus</blockquote>
      <blockquote style="margin-right: 3.91in">(∂T∂h)fixedX=(∂T∂h)fixedp-(∂T∂p)fixedh(∂X∂p)fixedh-1(∂X∂h)fixedp(\frac{∂T}{∂h})_{fixed
X}
































        = (\frac{∂T}{∂h})_{fixed_p} - (\frac{∂T}{∂p})_{fixed_h } (
        \frac{∂X}{∂p})_{fixed_h}^{-1} (\frac{∂X}{∂h})_{fixed_p}</blockquote>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Added new feature to <b>gsac</b>
            <i>cut </i>command.&nbsp; If the origin time and the
            distance are defined in the sac header, then the window can
            be defined using the syntax </p>
        </li>
      </ul>
      <p>&nbsp;&nbsp;&nbsp; &nbsp; <i>VEL vref offset </i>, where
        absolute time of the cut is given by Origin time + Distance/vref
        + offset.&nbsp; One can also use a group slowness with <i>P
          pref&nbsp; offset</i> </p>
      <blockquote>I have been doing group velocity cuts for moment
        tensor inversion by using awk to compute start and end times by
        the commands&nbsp;
        <meta name="" content="">
      </blockquote>
      <pre class="western" style="margin-right: 0.39in; font-variant: normal; letter-spacing: normal; widows: 1"><font color="#000000">        <span style="font-style: normal"><span style="font-weight: normal">CUTL=`echo $DIST $VEL $TB | awk '{print $1/$2 -$3}' `</span></span></font>
<font color="#000000">        <span style="font-style: normal"><span style="font-weight: normal">CUTH=`echo $DIST $VEL $TE | awk '{print $1/$2 +$3}' `</span></span></font>
<font color="#000000">and then</font>
<font color="#000000">        <span style="font-style: normal"><span style="font-weight: normal">CUT o ${CUTL} o ${CUTH}</span></span></font></pre>
      <blockquote> within <b>gsac</b> to implement something like <i>cut
















          o DIST/3.3 -30 o DIST/3.3 +70</i>.&nbsp;&nbsp; The other
        reason for introducing this option is to be able to look at
        segments of empirical Green's functions without having to also
        include the noise.&nbsp; An example of the use of this command,
        some Green's functions were read and displayed. </blockquote>
      <center>
        <table width="50%" cellspacing="2" cellpadding="2">
          <tbody>
            <tr>
              <td style="border-top: 1.15pt double #808080;
                border-bottom: 1px double #808080; border-left: 1.15pt
                double #808080; border-right: 1.15pt double #808080;
                padding: 0.02in" valign="top">
                <p align="left"> <img src="GSACCUTXLIM/GSACcut.png"
                    name="Image25" alt="example of cut vel command"
                    width="648" border="0" align="bottom" height="493">
                </p>
              </td>
            </tr>
            <tr>
              <td style="border-top: none; border-bottom: 1.15pt double
                #808080; border-left: 1.15pt double #808080;
                border-right: 1.15pt double #808080; padding-top: 0in;
                padding-bottom: 0.02in; padding-left: 0.02in;
                padding-right: 0.02in" valign="top">
                <p align="left"> Use of cut to select a 30 second window
                  about a group velocity of 3.5 km/s</p>
              </td>
            </tr>
          </tbody>
        </table>
      </center>
      <ul>
        <li>
          <p>Added new feature to <b>gsac</b> <i>xlim </i>command.&nbsp;

































            If the origin time and the distance are defined in the sac
            header, then the window can be defined using the syntax <i>VEL
































              vref offset </i>, where absolute time of the cut is given
            by Origin time + Distance/vref + offset.&nbsp; One can also
            use a group slowness with <i>P pref&nbsp; offset. </i>The
            next figure gives and example of the use of this command
            with the same traces displayed above. Note the <i>markt on</i>
            command was used to add group velocity markers to each plot.
          </p>
        </li>
      </ul>
      <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>NOTE:
















          This only works with </b><i><b>plot relative</b></i> <b>and
          will not work if the computed beginning of the trace occurs
          before the fist sample point.</b></p>
      <table width="50%" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="border-top: 1.70pt double #808080; border-bottom:
              1px double #808080; border-left: 1.70pt double #808080;
              border-right: 1.70pt double #808080; padding: 0.02in"
              valign="top">
              <p align="center"> <img src="GSACCUTXLIM/GSACxlim.png"
                  name="Image26" alt="example of xlim command"
                  width="652" border="0" align="bottom" height="493"> </p>
            </td>
          </tr>
          <tr>
            <td style="border-top: none; border-bottom: 1.70pt double
              #808080; border-left: 1.70pt double #808080; border-right:
              1.70pt double #808080; padding-top: 0in; padding-bottom:
              0.02in; padding-left: 0.02in; padding-right: 0.02in"
              valign="top">
              <p align="center"> Use of the xlim command to display a 30
                second window about a group velocity of 3.5 km/s</p>
            </td>
          </tr>
        </tbody>
      </table>
      <hr>
      <hr>
      <h2 class="western">2015</h2>
      <hr>
      <hr>
      <h4 class="western">September 11, 2015</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>The current release is
              NP330.Sep-11-2015.tgz</b>. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">CALPLOT/Utility/genplt.f - Now
            have a -3 option where the data file has 3 columns, x, y,
            pen_color </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIII/src/sdpegn96.f - Now has
            -E flag to plot Rayleigh wave ellipticity. Must be called as
            -R -E </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIII/src/sdpspc96.f &nbsp; -
            cleaned up the code.&nbsp; If the -O observed -STA sta -COMP
            cmp&nbsp; are given on the command line, the observed and
            theoretical spectral amplitudes are compared. The
            theoretical is attenuated to the distance of the
            observation, and then both are correct for geometrical
            spreading to the -DIST dist reference<br>
            <br>
            If -O observed is not declared, then the theoretical spectra
            is attenuated using the&nbsp; Q model (gamma) and corrected
            for geometrical spreading to the distance in -DIST dist.<br>
            <br>
            &nbsp;In all case, the standard output shows all command
            lines and gives a tabulation of period spectral amplitude<br>
            <br>
            &nbsp; If one does not want the Q effect, just use&nbsp;
            -DIST 1.0 to get the spectra at 1 km for earthquake studies.
            The spectral at another distance is found by multiplying by
            sqrt ( 1 / desired_distance) </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVI/src/hudson96.f - fixed
            error in subroutine modmerge in which the number of layers
            for the source and receiver models were not specified
            correctly.&nbsp; Also reworked the logic on modrange for k
            &lt; 0 return </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/src/elocate.f - added -C
            flag to output covariance matrix. Also documented and
            corrected the determination of the rotation angle for the
            confidence ellipse. Note the confidence ellipse is 1 sigma
            and the result must be multiplied by sqrt (2 var F(2,2,N-2))
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/do_mft4.c
            VOLII/src/sacamft96.f&nbsp;&nbsp; - fixed XOR problem when
            displaying phase velocities. Also added a yellow background
            to the phase velocity pick</p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/gsac.src - added new
            features </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">Implemented the command <b>map5</b>.
                This has the same syntax as <b>map</b>. The two
                programs create the shell scripts <i>map5.sh</i> and <i>map.sh</i>,
                respectively. The former uses GMT5
                (href="http://gmt.soest.hawaii.edu/"&gt;
                http://gmt.soest.hawaii.edu/) and the latter used
                GMT3/4. There is a difference in the syntax of the
                codes. Both shell scripts are heavily commented to
                permit the user to modify the presentations. The
                following shows the output of scripts: </p>
              <table cellspacing="2" cellpadding="2">
                <tbody>
                  <tr>
                    <td style="border: none; padding: 0in">
                      <p align="center">GSAC› map kstnm on<br>
                        GSAC&gt; sh
                        map.sh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      </p>
                    </td>
                    <td style="border: none; padding: 0in">
                      <p align="center">GSAC› map5 kstnm on<br>
                        GSAC&gt; sh
                        map5.sh&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
                    </td>
                  </tr>
                  <tr>
                    <td style="border: none; padding: 0in">
                      <p><img src="GSAC20150824/map.png" name="Image27"
                          width="463" border="0" align="bottom"
                          height="474"> </p>
                    </td>
                    <td style="border: none; padding: 0in">
                      <p><img src="GSAC20150824/map5.png" name="Image28"
                          width="380" border="0" align="bottom"
                          height="378"> </p>
                    </td>
                  </tr>
                </tbody>
              </table>
              <p style="margin-bottom: 0in"><br>
                The comments in <i>map5.sh</i> indicate how to change
                the precision of the latitude/longitude markers. The
                size of the PNG file is different since GMT3/4 attempts
                to create a BoundingBox based on the plot, while GMT5
                does not, and instead relies on the media size. </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">Added Smooth [ON|OFF] option
                to <b>psp </b>or <b>plotsp</b></p>
            </li>
            <li>
              <p>Implemented the command <b>psppk</b> or <b>plotsppk</b>
                to permit interactive picking on the spectra. This was
                required to plot the amplitude spectrum of instrument
                responses and then to select the gain at a given
                frequency. This will be used to check the instrument
                responses of networks. The syntax is a subset of that
                used for the command <b>ppk</b> oe <b>plotpk</b>. One
                difference with respect to <b>plotpk</b> is that pick
                information is written onto the terminal window for
                other use.&nbsp; </p>
            </li>
          </ul>
        </li>
      </ul>
      <blockquote style="margin-right: 3.91in">The <b>help psppk </b>give
the
































        following:&nbsp;&nbsp; </blockquote>
      <pre class="western" style="margin-right: 1.18in">SUMMARY:
     Interactive spectra pick
PlotSPPK
     The options are
   AMplitude          : Plot amplitude spectrum (default)
   PHase              : Plot phase spectrum
   PErplot [n|OFF]    : Plot n spectra per frame (default off)
   Overlay [ON|OFF]   : Overlay all spectra (default off)
   SMooth [ON|OFF]    : Apply 5 point smoothing to spectra
                        (default OFF)
   XLIn               : X-axis is linear
   XLOg               : X-axis is logarithmic (default)
   YLIn               : Y-axis is linear
   YLOg               : Y-axis is logarithmic (default)
   FMIn               :  Minimum  frequency for plot 
                        (default: DF for XLOG 0 for XLIN)
   FMAx               : Maximum frequency for plot (default: Nyquist)
   AMIn               : Minimum spectral amplitude to plot (default:
                             0 for YLIN  and 0.0001 Amax for YLOG)
   AMAx               : Maximum spectral amplitude to  plot  (default:
        maximum)
   Default            : Do not put up a phase menu, turn off marking
DESCRIPTION:
     The cursor responds to the following commands:
     -         : compress frequency scale by factor of 2, recenter trace
     _         : compress frequency scale by factor of 2, recenter trace
     +         : expand frequency scale by factor of 2, recenter trace
     =         : expand frequency scale by factor of 2, recenter trace
     (space) : recenter trace
     B         : move to the previous page of traces
     L         : give frequency and amplitude of point beneath cursor
     N         : move to next set of traces
     O         : return to original trace scaling
     Q         : end interactive trace picking
     X         : Define trace window by entering X two times
     Z         : define frequency range for linear regression to get t*
SEE ALSO
     PLOTSP</pre>
      <blockquote style="margin-right: 3.91in"> You will notice that the
        commands are a subset of the <b>ppk </b>or <b>plotpk </b>commands.































        To use this command, read the traces, <b>fft</b>, and then <b>psppk.</b>
        The output of the 'L' command in interactive cursor mode, is the
        following:</blockquote>
      <pre class="western" style="margin-right: 0.79in">        0.030174  2.8778e+01 W60ABHRS55ABHR.WSTK</pre>
      <blockquote style="margin-right: 3.91in"> where the first column
        is the frequency in Hz, the second is the spectral amplitude,
        and the last is the name of the file. If the 'overlay' mode is
        sued, then the spectral amplitude for all spectra displayed is
        given, e.g.,</blockquote>
      <pre class="western" style="margin-right: 0.79in">        0.030174  2.8778e+01 W60ABHRS55ABHR.WSTK
        0.030174  9.3662e+01 W60ABHTS55ABHT.WSTK
        0.030174  2.8613e+02 W60ABHZS55ABHZ.WSTK
An example of the use of the Z-Z option of <b>pkppk </b>is in the following image</pre>
      <blockquote style="margin-right: 3.91in"> <img
          src="GSAC20150824/psppk.png" name="Image29" alt="example of t*
          determination" width="800" border="0" align="bottom"
          height="662"> <br>
        <br>
        This image was made with the shell script commands: </blockquote>
      <pre class="western" style="margin-right: 0.79in">#!/bin/sh
#####

#    Alaska event 2015/09/27 Mw=6.3 H=110, recorded
#####
gsac &lt;&lt; EOF
#####
#    cut about pP
#####
cut a 20 a 40
r *Z
fileid name
background on color 1
color rainbow
fileid name
sort up dist
#p relative
rtr
taper w 0.25
#####
#    differentiate ground velocity to get
#    acceleration. For large earthquake
#    acceleration spectrum is flat, any trend
#    is due to tstar
dif
fft
psppk xlin fmin 0 fmax 4 overlay on  smooth on
q
EOF</pre>
      <blockquote style="margin-right: 3.91in"> The terminal output is </blockquote>
      <pre class="western" style="margin-right: 0.79in">lnA = a + bf : a=-10.794666 b=-1.466224 t*=0.466714  TPHLB02HHZ SMOOTH YES
lnA = a + bf : a=-11.126728 b=-0.823330 t*=0.262074  TPNVUS00BHZ SMOOTH YES
lnA = a + bf : a=-11.227097 b=-1.524203 t*=0.485169  SHPNN__HHZ SMOOTH YES
lnA = a + bf : a=-11.111622 b=-1.161991 t*=0.369873  GSCCI__BHZ SMOOTH YES
lnA = a + bf : a=-10.466206 b=-1.192656 t*=0.379634  LDFCI__BHZ SMOOTH YES
lnA = a + bf : a=-9.526356 b=-1.321453 t*=0.420632  OK029GS00HHZ SMOOTH YES
lnA = a + bf : a=-9.342464 b=-1.841290 t*=0.586101  WMOKUS00BHZ SMOOTH YES
lnA = a + bf : a=-9.339035 b=-1.845053 t*=0.587299  WMOKUS10BHZ SMOOTH YES
lnA = a + bf : a=-9.279791 b=-1.345738 t*=0.428362  OK025GS00HHZ SMOOTH YES</pre>
      <blockquote style="margin-right: 3.91in"> which gives the
        regression line, the t* and information about the trace and
        whether it was smoothed.<br>
        <br>
        <b>TO DO: </b>Clean up the output of map/map5 so that event and
        stations are not repeated. This will make the scripts and
        resulting PostScript smaller in size</blockquote>
      <p><br>
        <br>
        <br>
      </p>
      <hr>
      <hr>
      <h2 class="western">2014</h2>
      <hr>
      <hr>
      <h4 class="western">November 11, 2014</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">VOLIII/src/sdpspc96.f&nbsp; -
            made sure it worked. Also added -AZ az option so that a plot
            can be made without a data set </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIII/src/sdprad96.f - At
            request of Rachel Noriega implemented -V&nbsp;&nbsp; to
            output theoretical amp(azimuth) radiation pattern </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/do_pom.c -&nbsp;
            checked with gcc -c -Wall </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIV/src/trftn96.f&nbsp; -
            checked with gfortran -c -Wall </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/do_mft.c - Fixed so
            that if distance is negative, e.g., not defined if -12345,
            the program will not crash, but will rather flag the entry
            with a RED instead of BLUE color in the routine Pick_file()_
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIV/src/jntpre96.f - Put in a
            safety check if the number of dispersion data exceed the
            defined limit, currently parameter (NM=12000) </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIV/src/srfpre96.f - Put in a
            safety check if the number of dispersion data exceed the
            defined limit, currently parameter (NM=12000) </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/do_mft1.c - check with
            gcc -c -Wall </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/fmenunod.c - checked
            with gcc -c -Wall </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/do_pom1.c -
            checked&nbsp; with gcc -c -Wall </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/do_pom4.c -
            checked&nbsp; with gcc -c -Wall&nbsp; </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIV/src/rftndr96.f - changed
            the screen output to provide sufficient space for the fit.
            Previously if the fit was negative, we might have something
            like ...T-99.5 . Now there is ...T -99.5. I wanted to be
            able to parse the 8'th or 11 columns of output to automate
            an external script to eliminate bad RFTN's from the
            inversion </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLIV/src/ramat.f - checked with
            gfortran -c -Wall </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVI/src/jamat.f - hacked with
            gfortran -c Wall </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLII/src/do_mft4.c -
            checked&nbsp; with gcc -c -Wall&nbsp; </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/gsac.src - Implemented
            QDP capability to plots&nbsp; created using the <i>refr</i>
            or <i>prs</i> commands at the request of&nbsp; Marcus
            Vinicius Lima, Federal University of Pampa, Brazil. This
            speeds up the display for very long time series. On many
            displays the number of pixels is about 1000 vertically. Thus
            trying to plot 30000 points, for example, requires a lot of
            computation but does not lead to anything useful on the
            display. This option can be invoked using the <i>QDP</i>
            command or by clicking on the QDP button under the <i>refr
            </i>display.</p>
        </li>
        <li>
          <p>Modified the <i>gsac_prs.c </i>and <i>gsac_refr.c</i>
            codes to work correctly when the distances are
            negative.&nbsp; We can examine exploration data by setting <i>lcalda















              false</i> and then entering negative distances for the
            spread. When the ray parameter is now given for a reduced
            travel time plot, the plots look better</p>
          <p style="margin-bottom: 0in">The images below show the effect
            of the change and also the "QDP" button. </p>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <p style="margin-bottom: 0in"> <img
                      src="20141111/gsacrefr01.png" name="Image30"
                      width="800" border="0" align="bottom" height="662">
                  </p>
                  <p align="center">Normal display showing split profile</p>
                </td>
                <td style="border: none; padding: 0in">
                  <p style="margin-bottom: 0in"> <img
                      src="20141111/gsacrefr02.png" name="Image31"
                      width="800" border="0" align="bottom" height="662">
                  </p>
                  <p align="center">Split profile after using a
                    reduction velocity of 6 km/s</p>
                </td>
              </tr>
            </tbody>
          </table>
        </li>
        <li>
          <p>The current release is NP330.Nov-11-2014.tgz. </p>
        </li>
      </ul>
      <h4 class="western">June 10,2014</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected the VOLII/src/nfmenu.h
            and VOLII/src/fmenunod.c&nbsp; to handle the initialization
            of strings correctly. Under MacOS-X, the gcc 4.9 compiler
            led to SIGABRT after the phase match filter was used. This
            was traced to improper memory allocation for strings in the
            linked list. I read Kernighan and Ritchie, The C Programming
            Language 2nd Edition, 1988, pages 139-143 and use
            strdup().&nbsp; I had the pointers messed up. </p>
        </li>
        <li>
          <p>The current release is NP330.Jun-11-2014.tgz.</p>
        </li>
      </ul>
      <h4 class="western">May 24, 2014</h4>
      <ul>
        <li>
          <p>Modified <b>sacmft96 </b>work around problems with
            improper station and component specifications in Sac
            files.&nbsp; <b>sacmft96</b> is called by <b>do_mft </b>for















            interactive analysis of group velocities and spectral
            amplitudes. The output file of <b>sacmft96</b>, <i>mft96.disp</i>,
            is used by <b>do_mft</b> for picking. Since a <i>fscanf</i>
            is used to read <i>mft96.disp</i>, the column entries must
            be exact and not corrupted. </p>
        </li>
      </ul>
      <blockquote>The Sac KSTNM and KCMPNM header fields are 8
        characters long. Usually these are of the form SLM and BHZ,
        respectively. Recently there were two examples of Sac files that
        had more complicated entries in these header fields, which cause
        the KSTNM to be effectively two columns, and this broke the <i>scanf</i>
        in <b>do_mft</b>. To see what happened, the command <b>od </b><i><b>-c
































          </b></i>was used to look at the binary contents of the Sac
        file:</blockquote>
      <blockquote>od -c&nbsp; COR_RNAK_RNSG.ZZ_p</blockquote>
      <pre class="western" style="margin-right: 0.39in">         0000640  307 317 377 377 001  \0  \0  \0  \0  \0  \0  \0 001  \0  \0  \0
         0000660  001  \0  \0  \0  \0  \0  \0  \0   R   N   S   G  \0   s        
         0000700    R   N   A   K  \0   5          \0   -   1   2   3   4   5    
         0000720    -   1   2   3   4   5           -   1   2   3   4   5        </pre>
      <blockquote> Note that KSTNM is R N S G \0 s&nbsp;&nbsp;&nbsp; and
        KEVNM is R N A K \0 5<br>
        Note the Null Characters in KEVNMC<br>
        To make everything work, <b>sacmft96</b> now reformats the
        KSTNM and KCMPNM to replace non-printing character by an
        underscore, _, and to replace spaces between printing characters
        by an underscore.&nbsp; Now <i>mft96_disp </i>contains RNSG_s
        for KSTNM. The previous line of mft96.disp looked like</blockquote>
      <blockquote>MFT96 R U -1&nbsp;&nbsp;&nbsp;&nbsp;
        0.10000&nbsp;&nbsp;&nbsp; 0.43319&nbsp;&nbsp;&nbsp;
        0.00967&nbsp;&nbsp;&nbsp; 1.94096&nbsp;&nbsp;&nbsp;&nbsp; 36.9
        0.7675E-05&nbsp;&nbsp; 39.531769 -119.850060&nbsp;&nbsp;
        39.545757 -119.836517 0 10&nbsp;
        0.1074&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        50.00&nbsp;&nbsp;&nbsp;&nbsp; COMMENT: <font color="#ff0000">RNSG
















          s&nbsp;</font> -12345&nbsp;&nbsp; 1970&nbsp;&nbsp; 1&nbsp;
        0&nbsp; 0</blockquote>
      <blockquote>and the new, corrected line, now is</blockquote>
      <blockquote>MFT96 R U -1&nbsp;&nbsp;&nbsp;&nbsp;
        0.10000&nbsp;&nbsp;&nbsp; 0.43319&nbsp;&nbsp;&nbsp;
        0.00967&nbsp;&nbsp;&nbsp; 1.94096&nbsp;&nbsp;&nbsp;&nbsp; 36.9
        0.7675E-05&nbsp;&nbsp; 39.531769 -119.850060&nbsp;&nbsp;
        39.545757 -119.836517 0 10&nbsp;
        0.1074&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        50.00&nbsp;&nbsp;&nbsp;&nbsp; COMMENT: <font color="#ff0000">RNSG_s</font>&nbsp;
-12345&nbsp;&nbsp;
































        1970&nbsp;&nbsp; 1&nbsp; 0&nbsp; 0</blockquote>
      <blockquote>The change affects the <i>mft96.disp </i>and <i>phv96.disp
































        </i>files created by <b>sacmft96 </b>as well as the selected
        dispersion contained in the <i>XXX.dsp</i> and <i>YYY.phv</i>
        files created by <b>do_mft</b>. The number of columns is now
        correct.&nbsp; Thanks to J. Bonner and R. Noriega for noticing a
        problem and sending me the Sac files.</blockquote>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Fixed problems in <b>do_mft </b>routines
































            due to bad programming. The problem was a crash on MacOS-X
            on return from match filtering</p>
        </li>
        <li>
          <p>The current release is NP330.May-24-2014.tgz.</p>
        </li>
      </ul>
      <h4 class="western">May 6, 2014</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Larry Baker, USGS, traced down
            the problem in compiling rdseed using gcc4.8 under
            MacOS-X&nbsp; that we noticed August 22, 2013. This was in
            PROGRAMS.330/IRIS/rdseedv5.3.slu/Utilities/strlst.c.&nbsp;&nbsp;&nbsp;
            rdseed now creates Sac files&nbsp; using gcc4.8 and 4.9
            compilers on on the current MacOS-X and Ubuntu 14.04.</p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/gsac.src/csstim.h&nbsp;&nbsp;

































            - fixed the funding on the milliseconds. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/src/pltsac.f - fixed
            error originally documented 09 AUG 2013 </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">VOLVIII/src/sacpol.f - added <font
              color="#000000">character sta2*8, comp2*8, cdate2*12. This
              is a new program to plot polarizations. A description will
              be posted.</font></p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><font color="#000000">Many of
              the C programs required <i>int main() </i>to return the
              status. </font> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><font color="#000000">Programs
              changed are given in <a href="20140506/bugfix.txt">20140506/bugfix.txt

































              </a></font> </p>
        </li>
        <li>
          <p><font color="#000000">The current release is
              NP330.May-06-2014.tgz&nbsp; </font> </p>
        </li>
      </ul>
      <h4 class="western">April 28, 2014</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Larry Baker, USGS, found two
            problems in the low level graphics: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">PROGRAMS.330/CALPLOT/src/cmd/plotxvig.c

































                line 2167 <font color="#000000"><i>} else if(iy0 =
                    iy1){&nbsp;</i></font><font color="#000000"> should
                  be&nbsp; } else if(iy0 == iy1){</font> </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><font color="#000000">PROGRAMS.330/CALPLOT/src/clib/grd.c

































                  lines 496 and 516: At line 496 the old code is
                  commented out and replaced:</font> </p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in"><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                      /*<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for( ;
                      *s = (char )getc(fin); s++)<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; */<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for( ;;
                      s++){<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                      *s = (char )getc(fin);<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                      if(*s == '\n')<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                      break;<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</font>
                  </p>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
      <p style="margin-bottom: 0in"><font color="#000000">&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;
































          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; at line516</font></p>
      <ul>
        <ul>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><font color="#000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  /*&nbsp; for(nread=0 ; s[nread] = (char
                  )getc(fin);&nbsp; nread++, nread &lt; n){<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  */<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  for(nread=0 ; nread &lt; n ;&nbsp; nread++){<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  s[nread] = (char )getc(fin);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  if(s[nread] == '\n'){<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  break;<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  }<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  }<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                  s[nread] = '\0';</font> </p>
            </li>
            <li>
              <p><font color="#000000">Corrections were also made
                  PROGRAMS.330/CALPLOT/src/cmd/plotdriv.c and reframe.c</font></p>
            </li>
          </ul>
        </ul>
      </ul>
      <h4 class="western">March 28, 2014</h4>
      <ul>
        <li>
          <p>Fixed bug in griding for plotsp. The lower part of the
            x-axis often had colored dashes instead of the solid black
            line.&nbsp; Fixed by moving the gbox(...) after the axes
            were plotted.</p>
        </li>
      </ul>
      <h4 class="western">March 13, 2014</h4>
      <ul>
        <li>
          <p>Added safety checks in the routine <i>sacdatchk()</i>.&nbsp;
















            I created a simple sac file using <i>wsac1()</i> in <i>sacsubc.c</i>.
            The file had "-12345" for the station name, component name,
            etc. This broke the call to <i>sprintf();</i></p>
        </li>
      </ul>
      <h4 class="western">February 7, 2014</h4>
      <ul>
        <li>
          <p>Fixed minor error in <b>fmplot</b>.&nbsp; When plotting
            first motions, <b>fmplot</b> lists the observations and
            compares the theoretical P-wave amplitude for that ray to
            the input first motion. If there is a sign difference, the
            phrase "Inconsistent" is printed.&nbsp; This did not work
            correctly for&nbsp; upper hemisphere projections.&nbsp; The
            problem only affected the listing and did <b>not</b> affect
            the plots.</p>
        </li>
      </ul>
      <h4 class="western">February 6, 2014</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Makefiles for VOLV/src for the
            program <b>ttime96</b> use the isotropic model
            specification <i>igetmod.f </i>instead of <i>tgetmod.f</i>&nbsp;















            This meant that only isotropic models could be used. By
            changing the entry in the Makefiles the code will actually
            computer travel times for TI and Isotropic models.</p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2013</h2>
      <hr>
      <hr>
      <h4 class="western">November 8, 2013</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>redodate </b>in VOLI/src
            changed. The offset for time computation was changed
            from&nbsp; integer seconds to floating point seconds for
            more precision </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">PROGRAMS/VOLIV/src:&nbsp;
            Changed rftndr96.f output format to be able to display more
            precision in sample interval. surf96.f, rfth96.f and
            joint96.f have had the density relation modified to be able
            to go to about 900 km in depth. srfpre96.f changed to
            accomodate the relation between velocity and density to
            greater depths. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">PROGRAMS/VOLV/src/fmlpr.c:
            &nbsp; Updated with latest reference to the NDK format. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">PROGRAMS/VOLIV/src/hspec96.f:
            &nbsp; Corrected code at line 452 to with with Solaris f77
            compiler </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">PROGRAMS/VOLVIII/gsac.src/gsac_markt.c:&nbsp;

































            The markt&nbsp; option now shows a 0.3 km/s group speed for
            looking at air waves </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">PROGRAMS/VOLX/src/shallow96.f
            and shalpr96.f:&nbsp; The density relation was modified to
            be consistent with surf96/joint96/rftn96 </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>do_mft </b>and <b>sacmft96</b>
            were significantly revised for the purpose of being able to
            get phase velocities from the interstation Green's functions
            obtained from noise cross-correlation. See the tutorial on
            this subject. There is no difference in the program output
            for group velocity analysis. </p>
        </li>
        <li>
          <p>The current release is NP330.Nov-16-2013.tgz</p>
        </li>
      </ul>
      <h4 class="western">August 22, 2013</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Fixed a bug in the
            Makefile.OSX40 OSX40-32 in
            PROGRAMS.330/IRIS/rdseedv5.3.slu.&nbsp;&nbsp; I had
            installed the latest gcc 4.8 compilers into /usr/local/bin
            on a new MacBook Air. rdseed seemed to work but did not
            create SAC files.&nbsp; In the Makefiles I changed "CC = gcc
            " to "CC = /usr/bin gcc" </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">I changed the routines <i>gtrofa()</i>
            and <i>gtaofr()</i> in the surface wave, receiver function
            inversion codes to add some higher velocities, so that the
            codes would work for the Earth to about 900 km</p>
        </li>
        <li>
          <p>The current release is NP330.Aug-22-2013.tgz</p>
        </li>
      </ul>
      <h4 class="western">August 8, 2013</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Completed a tutorial on modeling
            static deformations from finite fault models. This is given
            at <a href="../TUTORIAL/FINITE_STATIC/index.html">../TUTORIAL/FINITE_STATIC/index.html</a>
          </p>
        </li>
        <li>
          <p>The current release is NP330.Aug-09-2013.tgz. </p>
        </li>
      </ul>
      <h4 class="western">July 26, 2013</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified <i>PROGRAMS.330/VOLVIII/gsac.src/gsac_plotsub.c
































            </i>to test if twin == 0.0 to make a cleaner plot. A one
            point time series is used by the new programs <b>hstat96</b>
            <b>hanal96</b> to provide the Greens functions for step
            source. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Finally released the programs to
            create the Green's functions for static step change in the
            moment tensor for point sources. These programs are used in
            the sequence:&nbsp; <b>hprep96, hstat96/hanal96,
              fmech96/f96tosac </b>in the same manner for creating
            synthetics, e.g., <b>hprep96, hspec96, hpulse96</b>. The
            new programs create an output file with the name <i>file96</i>
            which can be converted to Sac files using the command <i>cat
















              file96 | f96tosac -G</i> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>hsanal96 </b>gives the
            static deformation (cm) for a moment 1.0E+20 dyne-cm step
            function.&nbsp; This a uses an analytical expression for
            halfspace and a wholespace. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>hstat96 </b>solves the
            problem of a source and receiver any where in a stack of
            elastic layers by numerical integration of an expression
            derived using propagator matrices. The program <b>hsanal96
            </b>was written to provide an analytic solution for testing
            this wavenumber integration code. </p>
        </li>
        <li>
          <p><b>f96list </b>reads a file96 waveform file and outputs
            the value of the first sample. This was useful for the
            static deformation programs. There is no on-line help. This
            program is run as </p>
        </li>
      </ul>
      <pre class="western">        <b>f96list &lt; file96</b>      
        Units: CM/SEC      
        Created by None      
        Comment: ak135Q  
        R = 964.00000 AZ = 0.0000000       
        BAZ = 180.00000  
        ZDD 1.17266125E-12  
        ........................    
        RHF -9.01416372E-11
        THF 9.20795995E-10
    </pre>
      <h4 class="western"> July 22, 2013 </h4>
      <ul>
        <li>
          <p>Change dimension in two parameter statements of <b>spulse96</b>
            from NLAY=100 to NLAY 200 to be compatible with other
            surface-wave programs</p>
        </li>
      </ul>
      <h4 class="western">May 22, 2013</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected an error in <b>do_pom
            </b>(VOLII/src/do_pom.c) in procedure <i>Inquire_file </i>which















            to replace the line <i>for(i=0;i&lt; aargc; i++){</i> by <i>for(i=0;i&lt;=aargc;















              i++){</i>.&nbsp; This mistake caused the file list to be
            truncated by not showing the last file on the command
            line.&nbsp; This error was detected when I attempted to us <b>do_pom















            </b>with only two traces. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Because I was frustrated using
            the <b>gsac </b>* and / commands of the <i>ppk (plotpk) </i>command,
































            I now permit the mouse scroll wheel to change the
            amplitudes.&nbsp;&nbsp; Basically, because of the default
            trace scaling, it was difficult to see the true first
            arrival and to pick the first motions without re-scaling the
            amplitudes.&nbsp; For regional earthquakes, I band pass the
            waveform between 1 and 5 Hz using the commands <i>hp c 1 n
              2 </i>and <i>lp c 5 n 2</i>.&nbsp; When I have the
            arrival suitably placed in the window, using the <i>x x</i>
            sequence, I then move the wheel forward to increase the
            amplitude and backward to decrease the amplitude.&nbsp; The
            source code changes were in the following routines:&nbsp; <i>CALPLOT/src/plotxvig.c</i>
            and <i>VOLVIII/gsac.src/gsac_plotpk.c</i>, changing one
            line in each file - a trivial change for major new
            capability. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Modified <b>pltsac</b> to
            support an overlay mode ( -O&nbsp; flag ) so overlay
            predicted onto observed waveforms. Current SLU moment tensor
            solutions use the overlay now to show the fits.&nbsp; </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>f96tosac</b> has a new
            command line flag for the naming of the output file ( <i>-E
            </i>) which gives the Green function a name in the pattern
            DDdddHhhh.grn&nbsp; so that the name can characterize the
            distance and depth to the nearest meter. This is useful to
            exploration data sets.&nbsp; With this format the file name
            can represent distances between 0.000 and 99.999 km, and
            source depth between 0.0 and 9.999 km. </p>
        </li>
        <li>
          <p>Luis Rivera noted an error in the computations of first
            arrival times in <b>hspec96. </b>This occurred in the
            iterative computation for the direct (non-refracted)
            arrival, which had the entry&nbsp;&nbsp; </p>
        </li>
      </ul>
      <blockquote style="margin-right: 4.3in">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
































        if(iter.lt.20)then<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
pnew
































        = 0.999d+00 * pupper<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
































        else</blockquote>
      <blockquote>Also the command line argument to <i>subroutine
          frstar</i> was changed by adding the logical parameter dogeom,
        which indicates whether to compute the geometrical
        spreading.&nbsp; This is only needed for teleseisms in the <b>time96</b>
        and <b>hudson96</b> codes. The modification was to change
        0.999d+00 to 0.99d+00. Changes were made to <b>VOLIII/src/spulse96.f,
















          VOLVI/src/hspec96.f, VOLVI/src/hudson96.f, VOLV/src/time96.f,
          VOLV/src/refmod96.f and VOLV/src/timmod96.f.</b></blockquote>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified the output for the <i>-z
















            </i>and&nbsp; <i>-r </i>options of <b>hrftn96</b>. The
            seismograms are now for a unit area P- or SV-pulse incident
            in the halfspace. This change does not affect the receiver
            function, but permits a comparison of surface amplitude to
            incident amplitude. The comparison is actually done in the
            frequency domain, where a factor of two free surface effect
            is seen for vertically incident rays at zero
            frequency.&nbsp;&nbsp; </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">In <b>plotnps</b>, the
            initialization <i>1 setlinecap 1 setlinejoin newpath </i>is
















            changed to <i>1 setlinecap 2 setlinejoin newpath</i>. When
            plotting a almost horizontal line, the image seems to
            consist of filled overlaps half circles which give a jagged
            edge. This&nbsp; was observed when the command <b>plotnps
              -W10</b> was given to set the linewidth. It was bad for
            -W5 but not for -W50.&nbsp; The <i>1 setlinejoin </i>indicates















            that a round join be used when joining lines.&nbsp; The <i>0
              setlinejoin </i>and <i>2 setlinejoin </i>indicate miter
            and bevel joins, respectively.&nbsp; Hopefully the bevel
            join leads to a pleasing image.</p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The current release is
            NP330.Sep-20-2012.tgz. </p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2012</h2>
      <hr>
      <hr>
      <h4 class="western">December 15, 2012</h4>
      <ul>
        <li>
          <p>Corrected compile warnings in VOLIII/src/sdisp96.f,
            VOLIII/src/tdisp96.f, VOLIX/src/cprep96.f,
            VOLIX/src/cpulse96.f and VOLVIII/src/sacfilt.f</p>
        </li>
      </ul>
      <h4 class="western">December 10, 2012</h4>
      <ul>
        <li>
          <p>Modified <b>surf96</b>, <b>rftn96</b> and <b>joint96</b>.
            Justin Ball of the University of Colorado was using the
            'negative' layer thickness flag but this choice was not
            maintained for the temporary output files.&nbsp; The
            'negative' layer thickness is a way to set the reference
            level and to control the assignment of depths. It introduced
            for the atmosphere - solid earth problem. Rather than define
            source and receiver positions with respect to the top of the
            model, one can define the reference level as the atmosphere
            - solid interface, and, as a consequence, positive values of
            source or receiver depths indicate positions in the solid
            while negative ones indicate elevations above the
            surfece.&nbsp;&nbsp;&nbsp; </p>
          <p style="margin-bottom: 0in">While fixing the code, I use the
            opportunity to modify the dispersion display program <b>srfphv96</b>
            so that plots of Love and Rayleigh dispersion use the same
            scales:</p>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <p><img src="cpsbug_html_65f0bb97280a467a.png"
                      name="Image3" width="50%" border="0"
                      align="bottom" height="50%"> </p>
                </td>
              </tr>
              <tr>
                <td style="border: none; padding: 0in">
                  <p><img src="cpsbug_html_43c6cdc11312a392.png"
                      name="Image4" width="50%" border="0"
                      align="bottom" height="50%"> </p>
                </td>
              </tr>
            </tbody>
          </table>
        </li>
        <li>
          <p>Modified <b>genplt</b> to permit placing a legend within
            the plot. This is implemented using two new command line
            flags: <i>-L lcmdfil -LPOS position. </i>The command line
            syntax now has&nbsp; </p>
          <p>&nbsp;&nbsp;&nbsp; <b>-C </b><i>cmdfil</i><br>
            &nbsp;&nbsp;&nbsp; <b>-A </b><i>acmdfil</i><br>
            &nbsp;&nbsp;&nbsp; <b>-L </b><i>lcmdfil</i><br>
            <br>
            where the following are examples of the different files:</p>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <pre class="western">cmdfil:
'HAM.RDD.val' 1 0.01 'CI' 
'CUS.RDD.val' 1000 0.01 'CI' 
'R41.RDD.val' 1025 0.01 'CI' 
'S42.RDD.val' 1050 0.01 'CI' 
'S43.RDD.val' 1075 0.01 'CI' 
acmdfil:
'HAM.RDD.val' 1 0.01 'CI' 0.04 
'CUS.RDD.val' 1000 0.01 'CI' 0.04 
'R41.RDD.val' 1025 0.01 'CI' 0.04 
'S42.RDD.val' 1050 0.01 'CI' 0.04 
'S43.RDD.val' 1075 0.01 'CI' 0.04 
cmdfil:
'HAM.RDD.val' 1 0.01 'CI' 0.04 'HAM'
'CUS.RDD.val' 1000 0.01 'CI' 0.04 'CUS'
'R41.RDD.val' 1025 0.01 'CI' 0.04 'R41'
'S42.RDD.val' 1050 0.01 'CI' 0.04 'S42'
'S43.RDD.val' 1075 0.01 'CI' 0.04 'S43'</pre>
                </td>
                <td style="border: none; padding: 0in">
                  <p><img src="20121210/GENPLT/rdd.png" name="Image5"
                      width="435" border="0" align="bottom" height="408">
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
          <p><br>
            The position parameter is a string of the form 'TL', 'ML',
            'BL', 'TR', 'MR' or 'BR' for top-left, middle-left,
            bottom-left, top-right, middle-right and bottom-right,
            respectively. The legends plotted to the right are indented
            so that the entire string fits within the image frame. </p>
          <p>Note that one can use all three commands. To make the plot
            shown, the following command line was used: </p>
          <pre class="western">genplt -XMIN 100 -XMAX 1000 -YMAX 0.0001 -YMIN 0.000001 -XLOG -YLOG -L cmdfil -TX 'distance (km)' -TY 'Filtered Velocity'  -LPOS 'BL'
      </pre>
        </li>
        <li>
          <p>Modified <b>do_mft </b>to be more efficient and added
            additional command line flags. </p>
          <p>The new set of command line flags are as as follow:</p>
          <pre class="western"> 
-G           The default name of the  final dispersion file is StaCmp.dsp. 
             With this flag, the output dispersion file is the original filename with
             .dsp appended, e.g., NMSLMBHZ01.dsp
-T           Show the 'Tomo' button
-DMIN dmin   only use traces with distances ≥ dmin km
-DMAX dmax   only use traces with distances ≤ dmax km
-11MIN 11min only use traces with IHDR11 ≥ 11min
-11MAX llmax only use traces with IHDR11 ≤ 11max</pre>
          <p> When processing there are several steps that are performed
            on different pages: select the trace on page 1, set the
            units on page 2, set the multiple filter analysis and
            display parameters on page 3 and then select the dispersion
            on page 4. Then repeat the entire process for the next
            waveform. Normally the parameters on pages 2 and 3 are not
            changed. The new <b>Autofeed</b> button permits one to skip
            pages 2 and 3. This small change saves a lot of time and
            mouse movements when working with large data sets.</p>
          <p>The second change was specifically written for use with
            inter-station Green's functions computed by
            cross-correlating ground noise. Since <b>gsac</b> is used,
            the <i>stack</i> function saves the number of traces in the
            <i>ihdr11</i> variable. The command line of <b>do_mft</b>
            can be used to use only traces with a range of <i>ihdr11</i>
            values. The command line can also select distance ranges
            now, a feature of use for earthquake data. Finally a new <i>-T</i>
            flag introduces a <b>Tomo</b> button. </p>
          <p>The <b>Tomo</b> button executes the script <b>MFTDOOVERLAY</b>
            that is in the users PATH. It is currently used to determine
            the tomographically predicted dispersion between the station
            and epicenter for earthquakes or two stations for
            cross-correlation, and then to overlay this onto the MFT
            image. The two figures show the buttons and the predicted
            dispersion. </p>
          <p style="margin-bottom: 0in"><img
              src="cpsbug_html_d681272d711f6c36.png" name="Image6"
              width="796" border="0" align="bottom" height="636"> </p>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <p><img src="cpsbug_html_a5c6c97417f0115c.png"
                      name="Image7" width="796" border="0"
                      align="bottom" height="636"> </p>
                </td>
              </tr>
            </tbody>
          </table>
          <p style="margin-bottom: 0in">The purpose of making this
            overlay is to assist in determining the proper period range
            for dispersion. For earthquake data, the spectral shape is
            often used as a guide, but the comparison may be useful.
            Another obtain is to overlay model predicted dispersion
            curves created from the -S flag of <b>sdpegn96</b>. The
            script <a href="20121210/DOMFT/MFTDOOVERLAY">MFTDOOVERLAY</a>
            can be programmed to do a lot of things. For example a
            combination of <b>gsacGMT</b> can be used to create the
            file <i>map.eps</i> which can be viewed using <b>gv</b> or
            other PostScript view: </p>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: none; padding: 0in">
                  <p><img src="cpsbug_html_6187de40500e82ff.png"
                      name="Image8" width="444" border="0"
                      align="bottom" height="414"> </p>
                </td>
              </tr>
            </tbody>
          </table>
          <p>Tomography results and display scrips will be provided
            shortly.</p>
        </li>
        <li>
          <p>The current release is NP330.Dec-10-2012.tgz.</p>
        </li>
      </ul>
      <h4 class="western">October 22, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected an error in the <b>gsac</b>
            interpolation routine in&nbsp; <i>gsac_in.c</i>. The
            problem was a spurious value for the last point. Shaoqian Hu
            fixed the error. The following image compares the original
            trace in red to the interpolated trace in blue. In order to
            make the presentation, the observed trace was read using a
            cut, and the cut version saved. The cut trace was then
            interpolated and saved. Finally both traces were red using
            the command <i>cuterr fillz </i>and <i>cut</i> with wider
            limits to focus on the behavior at the end. Thus is why both
            traces are zero at the end. The problem has long been
            noticed in waveform plots from the moment tensor inversion -
            however since only one point was involved, the moment tensor
            inversion results do not change.</p>
        </li>
      </ul>
      <dl>
        <dd>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border-top: 1px double #808080;
                  border-bottom: 1px double #808080; border-left: 1px
                  double #808080; border-right: none; padding-top:
                  0.02in; padding-bottom: 0.02in; padding-left: 0.02in;
                  padding-right: 0in">
                  <p align="center"> Original code</p>
                </td>
                <td style="border: 1px double #808080; padding: 0.02in">
                  <p align="center"> Corrected code</p>
                </td>
              </tr>
              <tr>
                <td style="border-top: none; border-bottom: 1px double
                  #808080; border-left: 1px double #808080;
                  border-right: none; padding-top: 0in; padding-bottom:
                  0.02in; padding-left: 0.02in; padding-right: 0in">
                  <p> <img src="cpsbug_html_f76c5e524a05718.png"
                      name="Image9" width="50%" border="0"
                      align="bottom" height="50%"> </p>
                </td>
                <td style="border-top: none; border-bottom: 1px double
                  #808080; border-left: 1px double #808080;
                  border-right: 1px double #808080; padding-top: 0in;
                  padding-bottom: 0.02in; padding-left: 0.02in;
                  padding-right: 0.02in">
                  <p> <img src="cpsbug_html_e83cea660a4ae8b0.png"
                      name="Image10" width="50%" border="0"
                      align="bottom" height="50%"> </p>
                </td>
              </tr>
            </tbody>
          </table>
        </dd>
      </dl>
      <h4 class="western">September 20, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Upgraded the distributed IRIS
            program <b>rdseed</b> from&nbsp; 5.2 to 5.3.&nbsp; In order
            to support the CPS architectures, e.g., CYGWIN (Windows),
            MacOS-X, LINUX and Solaris, changes were made to these
            codes. The changes are given in the links in this
            section.Only minor changes are made. The comments in the Sac
            pole-zero files are a super set of rdseedv5.3 and
            rdseedv5.0.slu. </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><i>Main/output_resp.c</i>
                -&nbsp; modify to permit extra output for use in seismic
                network QC </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Main/output_sac.c </i>-
                modified comments in Sac pole-zero file </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Main/summary.c </i>-
                changed the call to <i>fabsl</i> to <i>fabs </i>since
                there was no <i>fabsl</i> in CYGWIN and since the use
                of the code only required <i>double </i>and not <i>long
















                  double.</i> </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Parsers/parse_50.c </i>-
                eliminate non-printing characters in the site name </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Utilities/log_errors.c </i>-
                add <i>#include &lt;string.h&gt;</i> </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><a
                  href="IRIS/diffrdseedv5.3.html">Detailed changes</a></p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">Modified the <b>gsac </b><i>ppk</i>
            to recognize the use of the 'm' key as the same as the '*'
            key to make the trace amplitudes larger. </p>
        </li>
        <li>
          <p>The current release is NP330.Sep-20-2012.tgz.</p>
        </li>
      </ul>
      <h4 class="western">September 9, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">The include file <i>calplot.h </i>now

































            has prototypes for the routines <i>void gcont(float x,
              float y);<br>
              void gmove(float x, float y); </i>(Thanks to Shaoqian Hu)</p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Fixed the <i>bsort</i> and <i>dbsort</i>
            subroutines in <i>sprep96.f, sdisp96.f</i>, <i>tprep96.f,
              tdisp96.f, scomb96.f </i>and <i>tcomb96.f</i>. The
            problem was that the bsort routine sorts and array, and then
            keeps only the unique values. Thus the length of the array
            returned can be smaller than the initial array.&nbsp; The
            last line of the subroutine was written as&nbsp; <i>n=n-m </i>instead















            of <i>nn=n-m. </i>(Thanks to Ruoshan at USTC) </p>
        </li>
        <li>
          <p>The current release is NP330.Sep-09-2012.tgz.</p>
        </li>
      </ul>
      <h4 class="western">August 6, 2012</h4>
      <ul>
        <li>
          <p>Fixed an error in the Setup script so that the <b>rdseed </b>now

































            compiles under Cygwin. The current release is
            NP330.Aug-06-2012.tgz</p>
        </li>
      </ul>
      <h4 class="western">July 26, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>hpulse96</b> now uses list
            direction IO instead of formatted IO for user defined source
            time function </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The program <b>srfker96 </b>is
            now part of the package. This program reads the temporary
            files from <b>surf96</b> to list all partial derivatives as
            a function of depth.&nbsp; A tutorial on the use of this
            program is available at the tutorial web page <a
              href="../TUTORIAL/SWKERNELS/index.html">../TUTORIAL/SWKERNELS/index.html</a>
            . </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">After creating the above
            tutorial, I realized that I cannot compute the partials of
            the anelastic attenuation coefficient γ &nbsp; with respect
            to changes in P- and S-wave velocity or layer thickness.
            These partials created in subroutine
            PROGRAMS.330/VOLIV/src/jsamat.f&nbsp;&nbsp; now set dgdv = 0
            for each layer. </p>
        </li>
        <li>
          <p>The current distribution is NP330.Jul-26-2012.tgz</p>
        </li>
      </ul>
      <h4 class="western">April 9, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Upgraded the distributed IRIS
            program <b>rdseed</b> from&nbsp; 5.0 to 5.2.&nbsp; In order
            to support the CPS architectures, e.g., CYGWIN (Windows),
            MacOS-X, LINUX and Solaris, changes were made to these
            codes. The changes are given in the links in this
            section.Only minor changes are made. The comments in the Sac
            pole-zero files are a super-set of rdseedv5.2 and
            rdseedv5.0.slu. </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><i>Main/output_resp.c</i>
                -&nbsp; modify to permit extra output for use in seismic
                network QC </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Main/output_sac.c </i>-
                modified comments in Sac pole-zero file </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Main/summary.c </i>-
                changed the call to <i>fabsl</i> to <i>fabs </i>since
                there was no <i>fabsl</i> in CYGWIN and since the use
                of the code only required <i>double </i>and not <i>long
















                  double.</i> </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Parsers/parse_50.c </i>-
                eliminate non-printing characters in the site name </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>Utilities/log_errors.c </i>-
                add <i>#include &lt;string.h&gt;</i> </p>
            </li>
            <li>
              <p><a href="IRIS/diffrdseedv5.2.html">Detailed changes</a></p>
            </li>
          </ul>
        </li>
      </ul>
      <h4 class="western">March 26, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Changes to gsac: </p>
          <ul>
            <ul>
              <ul>
                <li>
                  <h4 class="western"><i><span style="font-weight:
                        normal">outcsv</span></i> <span
                      style="font-weight: normal">command&nbsp; adds a
                      column header which now indicates Freq(Hz) for
                      spectral files in addition to the previous
                      Time(sec) for time series.</span>&nbsp;</h4>
                </li>
              </ul>
            </ul>
            <li>
              <p style="margin-bottom: 0in"><i>prs </i>(<i>plotrecordsection)</i>
                permits annotation using the <i>title </i>command.
                However this is not perfect since the location of a
                title at the top of the page conflicts with the <i>annotate















                </i>option of <i>prs</i> and the location on the left
                conflicts with the y-axis label </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><i>prs </i>command now
                behaves better with the use of the <i>prs title
                  title_text </i>command to supersede the normal axis
                label. The annotation is required since the Sac header
                only permits a few of the variables to have associated
                text strings, and if the USER1 happens to be set for a
                user defined Angle, one can arrange the record section
                accordingly with the command <i>prs user1 title "Angle
                  (deg)"</i> </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>tregn96, tdisp96, sregn96,
              scomb96, tcomb96: </b>cleaned up compiler warnings </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>hspec96</b>: Fixed a problem
            with flagging a receiver position is a fluid to compute the
            pressure fields in the fluid for the different sources. This
            only appeared with an atmosphere model was used which
            required <i>refdep </i>to be other than 0.0 </p>
        </li>
        <li>
          <p><b>tspec96</b>: Fixed a problem with flagging a receiver
            position is a fluid to compute the pressure fields in the
            fluid for the different sources. This only appeared with an
            atmosphere model was used which required <i>refdep </i>to
            be other than 0.0. However I have to check the travel times
            for a fluid.</p>
        </li>
      </ul>
      <h4 class="western">February 8, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified genplt to have
            additional plotting controls on the size for the symbol
            shape. This means that the other program <i>tgenplt </i>is
            deprecated. The syntax of the current program and an example
            of its use is given in the line <a
              href="GENPLT/nindex.html">GENPLT/nindex.html</a>. genplt
            will run as before. The new capabilities are invoked with
            the <i>-A acmdfil </i>command-line option. </p>
        </li>
        <li>
          <p>The current distribution of Computer Programs in Seismology
            is now NP330.Feb-09-2012.tgz</p>
        </li>
      </ul>
      <h4 class="western">January 14, 2012</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Increased the size of the <i>outstr

































            </i>string in <b>do_mft</b> to prevent overflow with long
            file names </p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2011</h2>
      <hr>
      <hr>
      <h4 class="western">November 23, 2011</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Fixed an error in the <i>synchronize

































            </i>command of <b>gsac. </b>The problem arose when reading
            just the headers and then synchronizing.&nbsp; The code has
            been fixed. The current version of <b>gsac</b> is now <i>V1.1.44
































              21 NOV 2011. </i> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The command line parsing of the
            program <b>fmplot</b> was rewritten,&nbsp; </p>
        </li>
        <li>
          <p>The current distribution of Computer Programs in Seismology
            is now NP330.Dec-01-2011.tgz</p>
        </li>
      </ul>
      <h4 class="western">November 1, 2011</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">In response to user requests the
            following changes were made to <b>gsac. </b>The current
            version of <b>gsac</b> is now <i>V1.1.43 31 OCT 2011.</i>
          </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">At the request of H. Benz, <b>gsac</b>
                now sets a header value corresponding to the time of the
                maximum (<i>depmax</i>) and minimum (<i>depmin</i>)
                amplitudes.&nbsp; The previously unused float/real
                header values in the 70 position real header, FHDR65 and
                FHDR66, are now called TIMMAX, TIMMIN, respectively.
                This request was made to use the times of the maximum
                and minimum points of a trace in external
                programs.&nbsp; </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">These other codes were
                changed to reflect these new parameters:&nbsp; <i>scmxmn</i>
                routine in <i>SUBC/sacsubc.c, SUBS/sacsubc.h,
                  SUBS/sacsubf.f</i> . The programs that use these
                general Sac I/O routines were re-compiled. </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">A new command, <b>ricker</b>,
                was added to <b>gsac</b>.&nbsp; This permits one to
                convolve a time series with a Ricker wavelet of a given
                frequency. This was implemented because of difficulties
                with the <b>spulse96 -f wavelet_file</b> &nbsp; and <b>hpulse96
































                  -f wavelet_file </b>implementation.</p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">The current use of Sac header
            variables by Computer Programs&nbsp; in Seismology is as
            follows: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">USER0 - Gaussian filter
                parameter, alpha, used in <b>saciterd</b>, <b>saciterdc,
















                  rftn96</b> and <b>joint96</b></p>
            </li>
            <li>
              <p style="margin-bottom: 0in">USER1 - minimum period of
                filter. This is introduced so that users do not falsely
                accept dispersion values outside the bandpass of a
                filter</p>
            </li>
            <li>
              <p style="margin-bottom: 0in">USER2 - maximum period of
                filter.</p>
            </li>
            <li>
              <p style="margin-bottom: 0in">USER4 - ray parameter for <b>joint96</b>
                and <b>rftn96.&nbsp; </b>Set from command line by <b>saciterd</b>
                and <b>saciterdc.</b></p>
            </li>
            <li>
              <p style="margin-bottom: 0in">USER5 - percent fit value.
                Appears in <b>pltsac, wvfgrd96, wvfmt96, wvfmtd96,
                  hrftn96,</b> <b>trftn96, joint96</b> and <b>rftn96.</b></p>
            </li>
            <li>
              <p style="margin-bottom: 0in">USER9 - time shift for
                waveform fit. Used by pltsac and set by <b>wvfgrd96,
                  wvfmt96 and wvfmtd96.</b></p>
            </li>
            <li>
              <p style="margin-bottom: 0in">TIMMAX - offset with respect
                to reference time indicating time of trace maximum</p>
            </li>
            <li>
              <p style="margin-bottom: 0in">TIMMIN - offset with respect
                to reference time indicating time of trace minimum </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">IHDR20 - set by <b>gsac</b>
                as part of the <i>ppk qc</i> command to indicate
                whether a trace passed QC.&nbsp; I obtain this value
                from a sac file in a shell script with a call to <b>saclhdr</b>,
                which is then use in an <b>awk</b> script.</p>
            </li>
          </ul>
        </li>
        <li>
          <p>The current version of Computer Programs in Seismology is <b>NP330.Nov-01-2011.tgz</b>.
          </p>
        </li>
      </ul>
      <h4 class="western">October 20, 2011</h4>
      <ul>
        <li>
          <p>C. Buffoni noted a problem with the presentation shaded
            area seismic trace plots in PostScript using the command <b>plotnps</b>.
            It took a while to track this down, but the problem was
            repaired. In addition the shaded area plot correctly for the
            command <b>plotxvig -R</b>, although this would rarely be
            used.&nbsp; In addition <b>plotgif -R </b>works correctly.</p>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: 1px double #808080; padding: 0.02in">
                  <p align="center"> OLD (problem)</p>
                </td>
                <td style="border: 1px double #808080; padding: 0.02in">
                  <p align="center"> NEW (Repaired)</p>
                </td>
              </tr>
              <tr>
                <td style="border-top: none; border-bottom: 1px double
                  #808080; border-left: 1px double #808080;
                  border-right: 1px double #808080; padding-top: 0in;
                  padding-bottom: 0.02in; padding-left: 0.02in;
                  padding-right: 0.02in">
                  <p> <font color="#000080"><a
                        href="PLOTNPS/npsbad.png"> <font
                          color="#000080"> <img
                            src="PLOTNPS/npsbad.png" name="Image32"
                            width="242" border="1" align="bottom"
                            height="320"> </font> </a> <a
                        href="PLOTNPS/npsbad.png"> </a></font> </p>
                </td>
                <td style="border-top: none; border-bottom: 1px double
                  #808080; border-left: 1px double #808080;
                  border-right: 1px double #808080; padding-top: 0in;
                  padding-bottom: 0.02in; padding-left: 0.02in;
                  padding-right: 0.02in">
                  <p> <font color="#000080"><a href="PLOTNPS/npsok.png">
                        <font color="#000080"> <img
                            src="PLOTNPS/npsok.png" name="Image33"
                            width="242" border="1" align="bottom"
                            height="320"> </font> </a> <a
                        href="PLOTNPS/npsok.png"> </a></font> </p>
                </td>
              </tr>
            </tbody>
          </table>
        </li>
        <li>
          <p style="margin-bottom: 0in">Modified the CALPLOT functions <i>pend()</i>
            and <i>gend()</i> to reset the pen width to the default 0,
            and the pen to 1 (black). This assists merging files. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><font color="#ff0000"><b>NOTE:</b></font>
            The S-wave receiver function, e.g., Z/R, computed by <b>hrftn96
































            </b>is not stable.&nbsp; This may be due to the problem of
            deconvolving with a wavelet that is not minimum phase. This
            is a major issue that is deferred to a future update. </p>
        </li>
        <li>
          <p>The current version of Computer Programs in Seismology is <b>NP330.Oct-27-2011.tgz</b>.</p>
        </li>
      </ul>
      <h4 class="western">October 13, 2011</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">The <i>mt</i> (moment tensor)
            command of <b>gsac</b> now supports the specification of
            the moment tensor source on the command line, e.g., </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">mt to ZRT MXX 0.0000000 MXY
                -1.00000002E+20 MXZ 0.0000000 MYY 0.0000000 MYZ
                0.0000000 MZZ 0.0000000 AZ 25. FILE
                /backup/rbh/PROGRAMS.310t/GREEN/CUS.REG/0100/030000100 </p>
            </li>
          </ul>
        </li>
        <li>
          <p>The current version of <b>gsac</b> is V1.1.42 13 OCT 2011</p>
        </li>
      </ul>
      <h4 class="western">September 23, 2011</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Major change in <b>gsac:&nbsp;&nbsp;</b>
          </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">refr command - filters are
                2-pole 1 pass and not 2-pole 2 pass - thus they are
                causal!! </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">plot command - for many
                traces displayed sequentially using the perplot command
                the y/n/b query is now y/n/b/q so that one can quit </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">mt command - fixed code so
                that the t0 and t1 arrival times of SV and SH are
                correctly read and then saved in the headers. This arose
                during conversion of horizontals to N E </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">prs command - do not
                annotate trace if KSTNM is -12345 and add LAST kolor
                FIRST color to permit different colors. I wanted to
                compared one observed trace to many predicted traces
                using different colors for observed and predicted. </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">csstime.c - MAJOR change. I
                used an incorrect rounding when going from epoch time to
                integers NZYEAR NZJDAY NZHOUR NZMIN NZSEC and NZMSEC.
                This inadvertently messed up the seconds by one unit.</p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">Minor changes to <b>sacmat96</b>,
            <b>sepegn96.&nbsp;</b> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Changes to the VOLIV
            surface-wave inversion programs to permit computation of
            du/da and dc/da, partials with respect to P-wave velocity.
            these are not used in the surface-wave of joint inversion;
            the changes were made for the design of a new inversion of
            P, S first-arrivals and dispersion for shallow exploration </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>hrftn96</b> in VOLVI changed
            the sign of the Z and R synthetics for SV incident to agree
            with expected particle motion. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">In VOLVII, <b>wvfmt96,
              wvfmtd96&nbsp; </b>sets USER5 to the percentage of fit,
            e.g., 100 * correlation coefficient squared </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">In VOLVIII/src&nbsp; changed
            output format for the file elocate.sum in <b>elocate</b> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">In VOLVII/src introduced new
            program <b>saciterdc </b>which is C version of the FORTRAN
            saciterd for speed, and easy transliteration of routines to
            java. The -Q flag suppresses output at each iteration </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">in SUBS&nbsp; put in an error
            check for the routine bwsac in the file sacsubc.c</p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2010</h2>
      <hr>
      <hr>
      <h4 class="western">October 24, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Fixed bugs in the interpolate
            function of <b>gsac</b> which affected the convolve
            command. The current version of <b>gsac </b>is <i>GSAC -
              Computer Programs in Seismology [V1.1.39 24 OCT 2010]</i>.
          </p>
        </li>
        <li>
          <p>The current release of Computer Programs in Seismology is
            NP330.Oct-24-2010.tgz. </p>
          <ul>
            <ul>
              <ul>
                <h4 class="western">October 12, 2010</h4>
              </ul>
            </ul>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in">The current release of Computer
            Programs in Seismology is NP330.Oct-12-2010.tgz </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Corrected Makefiles for OSX in
            VOLVIII/gsac.src/&nbsp; so that arrow keys work for <b>gsac</b>
            on OSX </p>
        </li>
        <li>
          <p>Modified the Setup script so that the help reads: </p>
          <pre class="western">        Usage: Setup SOL WIN32 SOL-EGCS LINUX LINUX64 CYGWIN OSX
        SOL        SUN Solaris Compilers
        SOL-GNU    SUN Solaris with gcc/g77 compilers
        CYGWIN     CYGWIN 98/NT/2K/XP gcc/g77 Compilers
        CYGWIN40   CYGWIN 98/NT/2K/XP gcc/gfortran Compilers
        LINUX40    Linux with gcc/gfortran compilers
        LINUX6440  Linux 64 bit with gcc/gfortran compilers
        OSX40      Apple  with gcc/gfortran compilers
        OSX40-32   Apple  with 32-bit gcc/gfortran compilers
        Older systems - not modern
        LINUX      Linux with gcc/g77 compilers
        LINUX64    Linux 64 bit with gcc/g77 compilers
        OSX        Apple  with gcc/g77 compilers</pre>
          <p style="margin-bottom: 0in"> The purpose of the OSX40-32
            flag is to force a 32 bit compile. This is useful on some
            Mac's where the gfortran and gcc compilers such that one is
            32 bit and the other 64 bit</p>
        </li>
        <li>
          <p>Fixed <b>hspec96 </b>by adding a -ZSRC zsrc and -ZREC
            zerc flag that will define the maximum depth of the
            source/receiver location models to patch onto the
            teleseismic model.&nbsp; Before this change the halfspace
            was replaced by a 1 km thick layer, which messed up the
            resulting model. Creating a merged model is not simple
            scientifically irrespective of the programming error.</p>
          <ul>
            <ul>
              <ul>
                <h4 class="western">October 3, 2010</h4>
              </ul>
            </ul>
          </ul>
        </li>
        <li>
          <p>Upgraded the distributed IRIS programs <b>evalresp </b>from
















            version 3.2.40 to 3.3.3 and <b>rdseed</b> from&nbsp; 4.8 to
            5.0.&nbsp; In order to support the CPS architectures, e.g.,
            CYGWIN (Windows), MacOS-X, LINUX and Solaris, changes were
            made to these codes. The changes are given in the links in
            this section. This upgrade was required in order to continue
            to use the most recent SEED volumes. </p>
          <p>The two programs are installed in <i>PROGRAMS.330/bin</i>
            with the executable names <b>evalresp</b> and <b>rdseed</b>.
            The IRIS distribution found in <i>PROGRAMS.330/IRIS/rdseedv5.0
































            </i>&nbsp; provides the executables <i>rdseed.linux (64
              bit)</i>, <i>rdseed.MAC.x86 (64 bit), rdseed.powerpc</i>,
            <i>rdseed.sparc (64 bit)</i>, <i>and rdseed.sun.x86 (64
              bit)</i>. If you wish to use these programs, you must
            install them in your system and adjust the path to find
            them. </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>evalresp&nbsp; - </b>The
                SLU version has the fixes suggested by Eric J. Haug of
                SLU&nbsp; in May, 2008 to handle continuation for FIRST
                with a large number of coefficients. Basically we need
                to get past the tendency of some SEED writers to put the
                following phase in the RESP file "No Abbreviation
                Referenced" for Response in units lookup and Response
                out units lookup. This is a problem with the CMG-5TD
                accelerometer which has a very, very FIR stage.</p>
              <p style="margin-bottom: 0in"><a
                  href="IRIS/diffevalresp-3.3.3.html">Detailed changes</a>.
              </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>rdseed - </b>Several
                changes were made. </p>
              <ul>
                <li>
                  <p>Another change relates to the <i>strupr</i>
                    routine. Since this&nbsp; is actually provided by
                    some libraries, we must avoid a double
                    definition.&nbsp; By making this global change the <b>rdseed</b>
                    version of this is preserved and there is no
                    conflict with other definitions. Thus all instances
                    of <i>strupr</i> are changed to <i>Strupr</i> and
                    a definition is placed in <i>Include/rdseed.h. </i>Changes















                    were made in <i>Decoders/process_data.c,
                      Decoders/process_event_requests.c, Main/ah_resp.c,
                      Main/output_css.c, Main/rdseed.c and
                      Main/summary.c.</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Utilities/alloc_linklist_element.c

































                    </i>-&nbsp;&nbsp; <i>malloc</i> wants a <i>size_t
                    </i>cast. This is changed from an <i>int</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Utilities/get_date.c</i>
                    - Change <i>#include &lt;time.h&gt; </i>add <i>#include
































                      &lt;sys/time.h&gt; which is required to define
                      gettimeofday() [ LINUX, Solaris. CYGWIN]</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Ah/makefile</i> -
                    remove CC=gcc&nbsp; since not all compilers use gcc
                    - note that&nbsp; CC is defined in the main Makefile
                  </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Decoders/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc - note that&nbsp; CC is defined in the main
                    Makefile </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Parsers/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc - note that&nbsp; CC is defined in the main
                    Makefile </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Printers/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc - note that&nbsp; CC is defined in the main
                    Makefile </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Snoop/makefile</i> -
                    remove CC=gcc&nbsp; since not all compilers use gcc
                    - note that&nbsp; CC is defined in the main
                    Makefile&nbsp;</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Utilities/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc - note that&nbsp; CC is defined in the main
                    Makefile</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Parsers/parse_50.c -
                    </i>get rid of non-printing characters in the output</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Main/output_sac.c </i>-
                    Place comments into the pole-zero file giving
                    information about the station, network, date, etc.
                    rdseedv.5.0 incorporates this. The code changes add
                    some additional information about the instrument and
                    also test the output strings. </p>
                </li>
                <li>
                  <p><i>Main/output_resp.c </i>- Send information about
                    the network to stderr, e.g., station, network,
                    component, location, on_date, off_date, latitude,
                    longitude, elevation, response file : <b>rdseed -f
                      seed_volume -R &gt; out 2&gt;&amp;1&nbsp;&nbsp; </b>which

































                    using the <b>sh </b>or <b>bash </b>shells.<br>
                    <a href="IRIS/outputresp4.8.html">(Sample stderr
                      output)</a></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">Updated the manual entry
                    in <i>Main/rdseed.1 </i>to make the command line
                    flags more complete on the first page. The <i>pdf</i>
                    version of this document is in <i>PROGRAMS.330/DOC/IRIS.pdf</i>
                    where you will find <i>evalresp.pdf</i>, <i>rdseed.pdf</i>
                    and <i>SEEDManual_V2.4.pdf</i> (no change from
                    November 17, 2007) </p>
                </li>
                <li>
                  <p>Compiler warnings:&nbsp;: Significant warnings
                    appear using <b>gcc -c -g -Wall</b> instead of the
                    normal <b>gcc -c </b>in the makefiles. Most of the
                    warnings are due to the fact that the current <b>rdseed</b>
                    is not written in ANSI C but rather in the original
                    Kernighan and Ritchie style. Someone else should
                    clean up this code.</p>
                </li>
                <li>
                  <p><a href="IRIS/diffrdseedv5.0.html">Detailed changes
                    </a> </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">The modified <b>rdseed</b>
                    was successfully compiled on both 32 and 64 bit
                    Intel LINUX machines using the GNU compilers, on a
                    SPARC Solaris machine using SUN compilers, on an
                    Intel Windows machine under the CYGWIN environment,
                    and under MacOX-X using the GNU compilers. The only
                    compiler warnings were the following: </p>
                </li>
                <li>
                  <p>cc -I../Include -c -g -c -o decode_steim.o
                    decode_steim.c </p>
                  <pre class="western">decode_steim.c: In function `decode_steim':
decode_steim.c:231: warning: integer overflow in expression
decode_steim.c:231: warning: integer overflow in expression</pre>
                </li>
                <li>
                  <p>on just the 64-bit LINUX compiler (<i>note that the
                      -w32 compiler flag was not used</i> <i>since the
                      change to Include/sac.h makes this unnecessary</i>)
                    there are a number of errors associated with <i>printf
































                    </i>formats (<a href="IRIS/makerdseedLNX64.txt">Output
















                      of gcc -c</a>). </p>
                  <ul>
                    <h4 class="western">September 30, 2010</h4>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <p>Modified <b>gsac</b> to implement the <i>convolve </i>command.&nbsp;

































            This required significant effort because positioning and
            time delays are a problem. The syntax of the new command
            differs from that of Sac and&nbsp; is: </p>
          <pre class="western" style="margin-top: 0in; margin-bottom: 0.2in">        <b>Con Z [B|O|A|T0|T1|T2|T3|T4|T5|T6|T7|T8|T9] File external_sac_file [Suffix suffix]</b></pre>
          <p> One marker must be set to define the zero time of the
            pulse in order to prevent incorrect delays. The following
            example creates an impulse, sets "O" to the start of the
            impulse, convolves with the internal function "Triangle" and
            then uses the "Convolve" command to do the same:</p>
          <pre class="western"><b>gsac &lt;&lt; EOF</b>
<b>#####</b>
<b>#       define the filter</b>
<b>#####</b>
<b>fg imp delta 0.1 npts 256</b>
<b>w imp.sac</b>
<b>r imp.sac</b>
<b># set the o marker</b>
<b>ch o 0</b>
<b>w</b>
<b>triangle w 1.0</b>
<b>w tr.sac</b>
<b>#####</b>
<b>#       define the impulse with a different sample rate</b>
<b>#####</b>
<b>fg imp delta 0.05 npts 512</b>
<b>w nimp.sac</b>
<b>r nimp.sac</b>
<b>conv z o f tr.sac s ".con"</b>
<b>w</b>
<b>q</b>
<b>EOF</b></pre>
          <p style="margin-bottom: 0in"> A comparison of the files
            tr.sac and nimp.sac.con&nbsp; shows that they are the same
            and have the same spectral amplitudes, except at high
            frequency because of the different sample rates.</p>
        </li>
        <li>
          <p>The current version of <b>gsac</b> is now V1.1.38 30 SEP
            2010. </p>
        </li>
      </ul>
      <h4 class="western">September 20, 2010</h4>
      <ul>
        <li>
          <p>Fixed some declaration errors in <b>sacpsd</b></p>
        </li>
      </ul>
      <h4 class="western">September 17, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Introduced the simple plotting
            program <a href="GENPLT/index.html"><b>genplt</b></a> </p>
        </li>
        <li>
          <p>Added a new program <a href="WVFDLY96/index.html"><b>wvfdly96</b></a>
            for use in the source inversion. This program interprets the
            time shift used for regional moment tensor inversion to a
            change in origin time and location. This was necessary when
            analyzing events whose locations are poorly constrained</p>
        </li>
      </ul>
      <h4 class="western">August 30, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Surface-wave programs in
            VOLIII/src were rewritten:&nbsp; <b>sregn96,</b> <b>spulse96,</b>
            <b>slegn96,</b> <b>sdpegn96,</b> <b>sdpdsp96,</b> <b>slat2d96,</b>
            <b>sdisp96,</b> <b>sdpder96</b> and <b>sdpsrf96.</b> The
            purpose for the rewrite was to align the code with the
            development in the class notes </p>
        </li>
        <li>
          <p>Added new programs to VOLIII/src for transverse-isotropic
            (TI) media. The new programs provide TI synthetics and
            phase-velocity partials with respect to the four vertical
            and horizontal P- and S-wave velocities and the parameter η
            = F/(A - 2L). These new programs are called <b>tcomb96</b>,&nbsp;















            <b>tdpder96,</b>&nbsp; <b>tdpsrf96,</b>&nbsp; <b>tprep96,</b>
            &nbsp;&nbsp;&nbsp; <b>tsregn96,</b>&nbsp; <b>tdisp96,</b>&nbsp;















            <b>tdpegn96,</b> &nbsp;&nbsp; <b>tlegn96,</b>&nbsp; <b>tpulse96</b>&nbsp;















            and <b>tregn96.&nbsp; </b>The programs work together in
            the same manner as the original codes for isotropic models:
          </p>
          <pre class="western">        <b>tprep96 -M model.TI -L -R -NMOD 500 -d dfile -HS 10 -HR 0</b>
        <b>tdisp96</b>
        <b>tlegn96</b>
        <b>tregn96 </b>
        <b>tpulse96 -V -p -l 4 -d dfile &gt; tifile96</b>
        <b>fprof96 -A &lt; tifile96 </b></pre>
          <p> Of course isotropic models can be used with these
            programs, also though the computations will take longer than
            for the corresponding isotropic codes.</p>
        </li>
      </ul>
      <h4 class="western">August 20, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified <b>gsac </b>in the
            following manner. The <i>prs (plotrecordsection) </i>command
















            supports the use of the MAG field as an axis. The <i>sort</i>
            command now permits a sort on MAG. </p>
        </li>
        <li>
          <p>The current version of <b>gsac</b> is now V1.1.37 20 AUG
            2010.</p>
        </li>
      </ul>
      <h4 class="western">July 15, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">The <i>mt </i>(moment tensor)
            command in <b>gsac</b> was modified to permit point forces
            with the command syntax <i>FN fn FE fe FD fd</i> where the
            force(units of dynes) is described in the north, east and
            down directions, respectively.&nbsp; The output will be in
            meters.&nbsp; The current version of <b>gsac</b> is now
            V1.1.36 15 JUL 2010 </p>
        </li>
        <li>
          <p>For the purposes of documenting the menus, <b>gsac</b>
            accepts a <b>~</b> interactive input under the <i>ppk&nbsp;
















            </i>and <i>refr</i> commands. This will create a unique
            CALPLOT graphics file with name DUMPxxx.PLT which will show
            the menu buttons and the waveforms.</p>
        </li>
      </ul>
      <h4 class="western">June 17, 2010</h4>
      <ul>
        <li>
          <p>The <i>mt </i>(moment tensor) command in <b>gsac</b> was
            modified to permit an explosion source, <i>mt iso mw 5.0
              FILE fileproto.</i> In addition the generation of separate
            Z, R, T, N or E components can also the new syntax <i>mt TO
              UZ&nbsp; </i>or in general one of UR, UZ, UT, UN or UE in
            place&nbsp; of the previous R, Z, T, N or E, respectively.
            The current version of <b>gsac</b> is now V1.1.33 17 JUN
            2010.</p>
        </li>
      </ul>
      <h4 class="western">June 14, 2010</h4>
      <ul>
        <li>
          <p>Fixed login error in the <b>gsac</b> command <i>sync </i>which

































            failed when there were P picks in the file. The code is a
            bit cleaner now. The current version of <b>gsac</b> is now
            V1.1.32 13 JUN 2010</p>
        </li>
      </ul>
      <h4 class="western">June 6, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Added a new command to <b>gsac.&nbsp;&nbsp;

































            </b>The <i>shift </i>command moves the position of a trace
            in time, adjusting the A T0 ... T9 markers.&nbsp; The syntax
            is <i>shift Fixed Amount. </i>If <i>amount is </i>positive
















            the trace is plotted later in absolute time.&nbsp; This
            command was introduced to support finite fault modeling,
            which requires that sub-faults fire a later times as the
            rupture front excites the sub-fault.&nbsp;&nbsp; I
            previously manipulated the O (origin time marker) and did
            some fancy cutting that was not intuitively obvious. The
            current version of <b>gsac </b>is now 1.30 06 JUN 2010. </p>
        </li>
        <li>
          <p>Modified output of <b>elocate </b>to provide a command
            line that can be used with <b>gsac</b> or sac2000. The line
            appears as&nbsp; <i>ch o gmt YEAR DOY HR MN SEC MSEC</i></p>
        </li>
      </ul>
      <h4 class="western">May 20, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified <i>iputmod.f </i>in
            PROGRAMS.330/SUBS. Created <i>igetmod.c, iputmod.c,
              imodel.h </i>to implement 'getmod', 'putmod' in C. The <i>igetmod.c</i>
            source also includes a routine&nbsp; <i>getdval&nbsp; </i>which
































            search the model to get the model parameters at a given
            depth within the model. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><span style="font-weight:
              normal">Added a conversion to ZNE in the </span><b>gsac</b>
            <i><span style="font-weight: normal">mt </span></i><span
              style="font-weight: normal">command in order to make Z N
              and E components. Previously we could make Z R and T
              components. I needed this for short distance finite fault
              simulation for which the back azimuth to each sub-fault
              can change. This makes the current version number of </span><b>gsac&nbsp;
















              [V1.1.30 19 MAY 2010]</b> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">&nbsp;<span style="font-weight:
              normal">Added </span><i><span style="font-weight: normal">rot3
































                to zne </span></i><span style="font-weight: normal">to
              the </span><b>gsac</b> <i><span style="font-weight:
                normal">rot3</span></i> <span style="font-weight:
              normal">command.</span> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">&nbsp;<span style="font-weight:
              normal">At the suggestion of Carol Bryan, fixed a bug in
              the deviatoric constraint in the program </span><b>wvfmtd96&nbsp;
































              in </b><span style="font-weight: normal">PROGRAMS.330/VOLVII/src/wvfmtd96.f

































            </span> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">&nbsp;<b>pltsac -</b> <span
              style="font-weight: normal">added </span><i><span
                style="font-weight: normal">-TMIN fmin -TMAX tmax</span></i>
            <span style="font-weight: normal">command line arguments to
              make better plots. </span> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">&nbsp;<b>shwmod96 </b>- <span
              style="font-weight: normal">added dashed line option - but
              be careful if used with automatic</span> <i><span
                style="font-weight: normal">-K -1 </span></i><span
              style="font-weight: normal">command line flag.</span></p>
        </li>
        <li>
          <p><b>sdpegn96 </b>- added <i>-NOBLACK </i>command line
            flat to prevent black outline around the observed dispersion
            for compatibility with <b>sdpdsp96.</b></p>
        </li>
      </ul>
      <h4 class="western">April 7, 2010</h4>
      <ul>
        <li>
          <p>Slight modifications to <b>plotnps</b>. When I implemented
            the background fill to implement the -I flag, I also had a
            default forced white background when the -I flat was not
            invoked. While this was the desired effect for converting an
            EPS to graphics format such ad PNG using ImageMagick&nbsp;
            so that there would be no transparency, this actually broke
            the inclusion of EPS files using <b>groff </b>since the
            background fill erased the page.&nbsp; As an example of the
            use of the current flags, this is how I now work with the
            ImageMagick command <b>convert </b>and the GraphicsMagick
            command <b>gm convert:</b> </p>
          <pre class="western">        <b>plotnps -F7 -W10 -EPS -K -BGFILL &lt; SACPSD.PLT &gt; 2.eps</b>
        <b>convert -trim 2.eps im2.png</b>
        <b>gm convert -trim 2.eps gm2.png</b>
        <b>plotnps -F7 -W10 -EPS -K -I &lt; SACPSD.PLT &gt; 3.eps</b>
        <b>convert -trim 3.eps im3.png</b>
        <b>gm convert -trim 3.eps gm3.png</b></pre>
        </li>
        <li>
          <p>The current version of Computer Programs in Seismology is <b>NP330.Apr-07-2010.tgz</b></p>
        </li>
      </ul>
      <h4 class="western">March 18, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified the generation of EPS
            by&nbsp; <b>plotnps </b>to a) paint the background to
            avoid transparency in ImageMagick, and b) to permit an
            inverted background. The inverted background is useful for
            presenting some colored lines, e.g., yellow, which are
            difficult to see against a white background. The following
            images show the syntax of the command abd also the result of
            converting the EPS to a PNG file using GraphicsMagick. The
            ImageMagick command trims to the smallest size</p>
        </li>
      </ul>
      <dl>
        <dd>
          <table cellspacing="2" cellpadding="2">
            <tbody>
              <tr>
                <td style="border: 1px double #808080; padding: 0.02in">
                  <p align="center"> <img src="PLOTNPS/graysc.png"
                      name="Image34" alt="graysc.png" width="289"
                      border="0" align="bottom" height="207"> </p>
                </td>
                <td style="border: 1px double #808080; padding: 0.02in">
                  <p align="center"> <img src="PLOTNPS/grayscinv.png"
                      name="Image35" alt="grayscinv.png" width="289"
                      border="0" align="bottom" height="207"> </p>
                </td>
              </tr>
              <tr>
                <td style="border-top: none; border-bottom: 1px double
                  #808080; border-left: 1px double #808080;
                  border-right: 1px double #808080; padding-top: 0in;
                  padding-bottom: 0.02in; padding-left: 0.02in;
                  padding-right: 0.02in">
                  <p align="center"> plotnps&nbsp; -F7 -W10 -EPS -K &lt;
                    GRAYSC.PLT &gt; t.eps<br>
                    gm convert -trim t.eps graysc.png</p>
                </td>
                <td style="border-top: none; border-bottom: 1px double
                  #808080; border-left: 1px double #808080;
                  border-right: 1px double #808080; padding-top: 0in;
                  padding-bottom: 0.02in; padding-left: 0.02in;
                  padding-right: 0.02in">
                  <p align="center"> plotnps&nbsp; -F7 -W10 -EPS -K -I
                    &lt; GRAYSC.PLT &gt; t.eps<br>
                    gm convert -trim t.eps grayscinv.png</p>
                </td>
              </tr>
            </tbody>
          </table>
        </dd>
      </dl>
      <h4 class="western">February 28, 2010</h4>
      <ul>
        <li>
          <p>Introduced a new program <b>sacpsd</b> to compute power
            spectral density of ground acceleration noise for use in
            seismic network quality control. This program is in
            PROGRAMS.330/VOLVIII/src. The program uses long data
            segments in Sac file and the acceleration sensitivity output
            of the IRIS <b>evalresp</b> from the RESP files created by
            the IRIS <b>rdseed</b>. Documentation describing the use of
            this program is given in&nbsp;<a href="SACPSD/sacpsd.pdf">sacpsd.pdf</a>&nbsp;&nbsp;&nbsp;

































            and the shell scripts used in the document are given in the
            file&nbsp;&nbsp;<a href="SACPSD/SACPSD.tgz">SACPSD.tgz</a>&nbsp;&nbsp;&nbsp;

































            (which is unpacked using the command&nbsp; sequence <b>gunzip
















              -c SACPSD.tgz | tar xvf -&nbsp;&nbsp; </b>.&nbsp;&nbsp;
            Note that some errors were corrected on February 28, 2010.</p>
        </li>
      </ul>
      <h4 class="western">February 16, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Made slight changes to two
            routines in the current version of rdseed: </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">PROGRAMS.330/IRIS/rdseedv4.8.slu/Main/output_seed.c

































              </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">PROGRAMS.330/IRIS/rdseedv4.8.slu/Parsers/parse_11.c

































              </p>
            </li>
          </ul>
          <p style="margin-bottom: 0in">to move two declarations to the
            top of&nbsp; <i>update_type74 </i>in output_seed.c and in
            parse_type11 in parse_11.c.&nbsp; The Solaris cc compiler<br>
            did not like the declarations to be intermixed with code
            farther down.</p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">Changed the Main/makefile,
                Printers/makefile, Snoop/makefile&nbsp; and
                Utilities/makefile to remove a CC=gcc line that I had
                entered previously </p>
            </li>
          </ul>
        </li>
        <li>
          <p>Made changes to <b>elocate</b> in PROGRAMS.330/VOLVIII/src
            to facilitate the exchange of data for use in other location
            programs and also for easier change of source parameters in
            <b>gsac</b>. The extra output is indicated in the color red:
          </p>
          <pre class="western">        <b>STA   IWT       ARRIVAL TIME   PhIDQL PHASE  FM CHAN    </b><font color="#ff0000"><b>LAT</b></font>       <font color="#ff0000"><b>LON      ELEV  </b></font> 
        <b>OK001   0 20100213053058.250    2 0 i S        X  Z   </b><font color="#ff0000"><b>35.5611  -97.2895    350.00</b></font>                         
        <b>OK001   0 20100213053057.219    1 0 i P        C  </b><font color="#000000"><b>Z</b></font><font color="#ff0000">   </font><font color="#ff0000"><b>35.5611  -97.2895    350.00</b></font>                         
        <b>OK002   0 20100213053100.168    2 0 i S        X  </b><font color="#000000"><b>Z</b></font><font color="#ff0000">   </font><font color="#ff0000"><b>35.5493  -97.1966    354.00 </b></font>
                         <b>...    ...   ...   ...   ...   </b>
        <b>HYPO71 Quality   :                  BA</b>
        <b>Gap              :                  84              deg</b>
 
        <font color="#ff0000"> </font><font color="#ff0000"><b>ch evla    35.5331 evlo   -97.2982 evdp       5.52</b></font>
        <font color="#ff0000">    </font><font color="#ff0000"><b>ch ocal   2010 02 13 05 30 55 968</b></font></pre>
          <p style="margin-bottom: 0in"> The last entries are used by
            cut here and pasting into the <b>gsac</b> command line.</p>
        </li>
      </ul>
      <h4 class="western">January 11, 2010</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified the <i>lp, bp, br </i>and

































            <i>bp </i>commands of <b>gsac </b>to implement a
            Chebyshev Type - I filter using the <i>C1</i> command
            argument.&nbsp; Following <b>sac/sac2000</b> the lowpass
            filter prototype is defined by the number of poles, the
            corner frequency, fc, a transition bandwidth, transbw, and a
            desired attenuation factor at the frequency
            (1+transbw)*fc.&nbsp; References on this filter are given in
            Wikipedia, but the reference providing all information,
            including the gain normalization constant is Rorabaugh
            (1997).&nbsp; Implementation of the Type-II filter, also
            known as the Inverse Chebyshev filter (C2 command argument
            in <b>sac/sac2000</b> usage) was not implemented since data
            structures in the file <i>gsac_filt.c</i> would have to be
            completely redesigned.</p>
        </li>
      </ul>
      <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Digital
































        Filter Designers Handbook with C++ algorithms<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
















        C.&nbsp; Britton Rorabaugh 2nd Edition<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
















        McGraw Hill, New York, 479 pp 1997&nbsp; Chapter 5</p>
      <ul>
        <li>
          <p style="margin-bottom: 0in">While testing the Chebyshev
            implementation, an error in the implementation of the
            bandreject filter for a single-pole stage&nbsp;
            changing&nbsp; </p>
        </li>
      </ul>
      <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}
































        else if (filt_lhp == BANDREJECT){<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wc
































        = fwarp(Wc,dt);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wl
































        = fwarp(Wl/ffac,dt);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wu
































        = fwarp(Wu/ffac,dt);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
































        <font color="#ff0000">num[0] = wl*wu*dt*dt;</font><br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
num[1]
































        = 0.0;<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
















        to<br>
        <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}
































        else if (filt_lhp == BANDREJECT){<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wc
































        = fwarp(Wc,dt);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wl
































        = fwarp(Wl/ffac,dt);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
wu
































        = fwarp(Wu/ffac,dt);<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
































        <font color="#ff0000">num[0] = wc*wc*dt*dt;</font><br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
num[1]
































        = 0.0;</p>
      <hr>
      <hr>
      <h2 class="western">2009</h2>
      <hr>
      <hr>
      <h4 class="western">December 4, 2009</h4>
      <ul>
        <li>
          <p>Upgraded the distributed IRIS programs <b>evalresp </b>from
















            version 3.2.38 to 3.2.40 and <b>rdseed</b> from&nbsp; 4.7.5
            to 4.8.&nbsp; In order to support the CPS architectures,
            e.g., CYGWIN (Windows), MacOS-X, LINUX and Solaris, changes
            were made to these codes. The changes are given in the links
            in this section. This upgrade was required in order to
            continue to use the most recent SEED volumes. </p>
          <p>The two programs are installed in <i>PROGRAMS.330/bin</i>
            with the executable names <b>evalresp</b> and <b>rdseed</b>.
            The IRIS distribution found in <i>PROGRAMS.330/IRIS/rdseedv4.8&nbsp;</i>&nbsp;

































            provides the executables <i>rdseed.linux</i>, <i>rdseed.ppcMac</i>,
            <i>rdseed.intelMac</i>, <i>rdseed.Sun86. rdseed.SunSparc</i>.
            If you wish to use these programs, you must install them in
            your system and adjust the path to find them. </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>evalresp&nbsp; - </b>The
                distributed code has an #include &lt;malloc.h&gt;. This
                is deprecated in MacOS-X to &lt;malloc/malloc.h&gt;
                which means that the code will not compile.&nbsp; Since
                modern compilers provide the prototypes for <i>malloc</i>
                in &lt;stdlib.h&gt;. I changed <i>alloc_fctns.c</i>, <i>parse_fctns.c</i>,
                <i>regexp.c</i> and <i>string_fctns.c</i> by commenting
                out the #include &lt;malloc.h&gt; and ensuring the
                presence of a #include &lt;stdlib.h&gt;.&nbsp; <br>
                <a href="IRIS/diffevalresp3.2.40.html">Detailed changes</a>.
              </p>
            </li>
          </ul>
          <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            <b>NOTE THAT evalresp-3.2.40 will configure properly for the
              MacOS. </b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>rdseed - </b>Several
                changes were made. </p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in"><i>Include/sac.h: </i>The
















                    most important was to change the use of <i>long </i>in
































                    the definition of the integer SAC header values to <i>int.</i>
                    Before computers were truly 32 bit, <i>short </i>meant
































                    a 2 byte integer, <i>long </i>a 4 byte integer,
                    and <i>int </i>could mean a&nbsp; byte integer.
                    Currently, <i>int</i> means 4 bytes.&nbsp; A
                    problem arises on 64 bit machines, for which a <i>long















                    </i>means an 8 byte integer.&nbsp; One way around
                    this is to use the <i>-m32</i> flag on the
                    compiler.&nbsp; CPS changes the <i>long </i>to int<i>.</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">Another change relates
                    to the <i>strupr</i> routine. Since this&nbsp; is
                    actually provided by some libraries, we must avoid a
                    double definition.&nbsp; By making this global
                    change the <b>rdseed</b> version of this is
                    preserved and there is no conflict with other
                    definitions. Thus all instances of <i>strupr</i>
                    are changed to <i>Strupr</i> and a definition is
                    placed in <i>Include/rdseed.h. </i>Changes were
                    made in <i>Decoders/process_data.c,
                      Decoders/process_event_requests.c, Main/ah_resp.c,
                      Main/output_css.c, Main/rdseed.c and
                      Main/summary.c.</i> </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Utilities/alloc_linklist_element.c

































                    </i>-&nbsp;&nbsp; <i>malloc</i> wants a <i>size_t
                    </i>cast. This is changed from an <i>int</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Utilities/get_date.c</i>
                    - Change <i>#include &lt;time.h&gt; </i>add <i>#include
































                      &lt;sys/time.h&gt; which is required to define
                      gettimeofday()</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Ah/makefile</i> -
                    remove CC=gcc&nbsp; since not all compilers use gcc
                    - note that&nbsp; CC is defined in the main Makefile</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Decoders/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Parsers/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Parsers/parse_50.c -
                    </i>get rid of non-printing characters in the output</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Main/output_sac.c </i>-
                    Place comments into the pole-zero file giving
                    information about the station, network, date, etc.
                    The SAC pole-zero file is created using the
                    command&nbsp; <b>rdseed -f seed_volume -p</b><br>
                    <a href="IRIS/outputsac5.0.html">(Sample SAC
                      pole-zero file)</a> </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Main/output_resp.c </i>-
                    Send information about the network to stderr, e.g.,
                    station, network, component, location, on_date,
                    off_date, latitude, longitude, elevation, response
                    file : <b>rdseed -f seed_volume -R &gt; out
                      2&gt;&amp;1&nbsp;&nbsp; </b>which using the <b>sh
















                    </b>or <b>bash </b>shells.<br>
                    <a href="IRIS/outputresp4.8.html">(Sample stderr
                      output)</a> </p>
                </li>
                <li>
                  <p>Updated the manual entry in <i>Main/rdseed.1 </i>to
















                    make the command line flags more complete on the
                    first page. The <i>pdf</i> version of this document
                    is in <i>PROGRAMS.330/DOC/IRIS.pdf</i> where you
                    will find <i>evalresp.pdf</i>, <i>rdseed.pdf</i>
                    and <i>SEEDManual_V2.4.pdf</i>. (no change from
                    November 17, 2007)</p>
                </li>
                <li>
                  <p>Compiler warnings:&nbsp;: Significant warnings
                    appear using <b>gcc -c -g -Wall</b> instead of the
                    normal <b>gcc -c </b>in the makefiles. Most of the
                    warnings are due to the fact that the current <b>rdseed</b>
                    is not written in ANSI C but rather in the original
                    Kernighan and Ritchie style. Someone else should
                    clean up this code.</p>
                </li>
                <li>
                  <p><a href="IRIS/diffrdseedv4.8.html">Detailed changes</a>
                  </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">The modified <b>rdseed</b>
                    was successfully compiled on both 32 and 64 bit
                    Intel LINUX machines using the GNU compilers, on a
                    SPARC Solaris machine using SUN compilers, on an
                    Intel Windows machine under the CYGWIN environment,
                    and under MacOX-X using the GNU compilers. The only
                    compiler warnings were the following: </p>
                </li>
                <li>
                  <pre class="western">cc -I../Include -c -g   -c -o decode_steim.o decode_steim.c
decode_steim.c: In function `decode_steim':
decode_steim.c:231: warning: integer overflow in expression
decode_steim.c:231: warning: integer overflow in expression</pre>
                  <p> for all compiles, and </p>
                  <pre class="western">cc -I../Include -c -g   -c -o parse_30.o parse_30.c
parse_30.c: In function `parse_type30':
parse_30.c:96: warning: cast to pointer from integer of different size</pre>
                  <p> on just the 64-bit LINUX compiler (<i>note that
                      the -w32 compiler flag was not used</i> <i>since
                      the change to Include/sac.h makes this unnecessary</i>).
















                  </p>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
      <h4 class="western">October 8, 2009</h4>
      <ul>
        <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
          Summary of changes made since July 22, 2009</p>
        <ul>
          <li>
            <p style="margin-bottom: 0in"><b>gsac</b> is now at version
              <i>1.1.28 30 SEP 2009. </i>The following changes were
              made: </p>
            <ul>
              <li>
                <p style="margin-bottom: 0in">The command <i>plotpk
                    (ppk) regional </i>or <i>plotpk (ppk) teleseism </i>now
















                  had an <i>Undo</i> button which removes the last
                  phase pick made. This was introduced to make phase
                  picks for location easier to use </p>
              </li>
              <li>
                <p style="margin-bottom: 0in">The command <i>merge</i>
                  had an improper index at line 214 which caused memory
                  corruption. </p>
              </li>
              <li>
                <p style="margin-bottom: 0in">The subroutine <i>gsac_sac.c</i>,
                  which is used for low level reading and writing of the
                  SAC files, had an improper test of the file type. It
                  now correctly reads the files with an IXY format,
                  e.g., the spectral amplitude files. </p>
              </li>
            </ul>
          </li>
          <li>
            <p style="margin-bottom: 0in"><b>fmtp</b> has a flag <i>-X&nbsp;</i>
              to output nodal plane strike dip and rakes to the standard
              output with a line that reads</p>
          </li>
        </ul>
        <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
          &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;
          SDRPLANES stk1 dip1 rake1 stk2 dip2 rake2<br>
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
          &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; The reason is that I wanted to
          examine the dip variation in the L'Aquila aftershock sequence</p>
        <ul>
          <li>
            <p><b>elocate </b>was changed so that the location time is
              also written in a format for use by the <b>gsac </b>command
































              <i>ch ocal, </i>e.g., <i>ch ocal </i>2009 07 29 10 00
              37 123. The new output is indicated in the color <font
                color="#ff0000">red</font>: </p>
            <pre class="western"> 
        <b>RMS Error        :               0.150              sec</b>
        <b>Travel_Time_Table:          nnCIA   </b>
        <b>Latitude         :             35.9288 +-    0.0130 N         1.4501 km</b>
        <b>Longitude        :             43.2796 +-    0.0173 E         1.5470 km</b>
        <b>Depth            :               13.65 +-      0.88 km</b>
        <b>Epoch Time       :      1247949147.952 +-      0.31 sec</b>
        <b>Event Time       :  20090718203227.952 +-      0.31 sec</b>
        <font color="#ff0000"><b>Event (OCAL)     :  2009 07 18 20 32 27 952</b></font>
        <b>HYPO71 Quality   :                  CD</b>
        <b>Gap              :                 161              deg</b></pre>
            <p style="margin-bottom: 0in"> In addition two more
              prototype velocity models were added. The <i>KOREA </i>model
















              corresponding to my pre-computed Green's functions for
              Korea, and the <i>nnCIA</i> model corresponding to my
              pre-computed Green's functions for waveform of earthquakes
              in the Central Italian Apennines.</p>
          </li>
        </ul>
      </ul>
      <h4 class="western">July 22, 2009</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected an inconvenience in
            the <b>gsac</b> <i>write</i> command.&nbsp; The program
            was in the specification of the <i>APPEND suffix</i> and <i>PREPEND
















              prefix</i> option. Until this modification the shortcuts <i>AP
































              suffix</i> and <i>PR prefix</i> were permitted. The
            string matching in <i>gsac_arg.c</i> only considered the
            first two characters. This an attempt to execute the
            command&nbsp; <i>GSAC&gt; write APZNZ10HHR APZNZ10HHT
              APZNZ10HHZ</i> was doomed since the first <i>AP </i>was
            interpreted as APPEND rather than a station name.&nbsp; This
            is fixed now, but <i><b>NEVER </b></i>use APPEND or
            PREPEND as a file name in a <i>write</i> command.&nbsp;
            Implementing this feature of <i>sac</i> force the use of a
            particularly bad command grammar. [Thanks to Harley Benz] </p>
        </li>
        <li>
          <p>Documentation for the <a
              href="../TUTORIAL/STRUCT/index.html">Inversion
              of Surface-Wave Dispersion and Receiver Functions for
              Structure</a> was corrected to show the correct use of the
            <i>-ZMAX</i> flag for <b>shwmod96 </b>[thanks to Wen-Jie
            Jiao]</p>
        </li>
      </ul>
      <h4 class="western">&nbsp;June 19, 2009</h4>
      <ul>
        <li>
          <p>Jessie Bonner noted some compile problems:</p>
          <ul>
            <li>
              <p>Change FORTRAN code that had type declaration after a
                data statement: <i>VOLIV/src/jsamat.f (line 45) </i><span
                  style="font-variant: normal"><span style="font-style:
                    normal">used in </span></span><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><b>joint96 </b></span></span><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><span style="font-weight: normal">and </span></span></span><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><b>gprep96 </b></span></span><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><span style="font-weight: normal">(line 92)</span></span></span></p>
            </li>
            <li>
              <p><span style="font-variant: normal"><span
                    style="font-style: normal"><span style="font-weight:
                      normal">Modify </span></span></span><i><span
                    style="font-weight: normal">subroutine four</span></i><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><span style="font-weight: normal">.
                      Evidently a g77 compiler, which is no longer
                      supported, did not like the fact the there was a </span></span></span><i><span
                    style="font-weight: normal">call four(complex_array
                    …) </span></i><span style="font-variant: normal"><span
                    style="font-style: normal"><span style="font-weight:
                      normal">while internally the code was </span></span></span><i><span
                    style="font-weight: normal">subroutine
                    four(real_array … ).</span></i><span
                  style="font-variant: normal"> </span><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><span style="font-weight: normal">This was
                      valid in FORTRAN77 since the memory storage would
                      be the same if one had a real array </span></span></span><i><span
                    style="font-weight: normal">x(20)</span></i><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><span style="font-weight: normal">, a two
                      dimensional array </span></span></span><i><span
                    style="font-weight: normal">x(2,10) </span></i><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><span style="font-weight: normal">or a
                      complex array </span></span></span><i><span
                    style="font-weight: normal">x(10) </span></i><span
                  style="font-variant: normal"><span style="font-style:
                    normal"><span style="font-weight: normal">since the
                      memory organization was:</span></span></span></p>
            </li>
          </ul>
          <pre class="western">         <span style="font-variant: normal"><span style="font-style: normal"><span style="font-weight: normal">MEMORY          |     1    |     2    |     3    |     4    | ...</span></span></span>
         <span style="font-variant: normal"><span style="font-style: normal"><span style="font-weight: normal">1-D real array  |   x(1)   |   x(2)   |   x(2)   |   x(4)   | ...</span></span></span>
         <span style="font-variant: normal"><span style="font-style: normal"><span style="font-weight: normal">2-D real array  |  x(1,1)  |  x(2,1)  |  x(1,2)  |  x(2,2)  | ...</span></span></span>
         <span style="font-variant: normal"><span style="font-style: normal"><span style="font-weight: normal">Complex array   | Re[x(1)] | Im[x(1)] | Re[x(2)] | Im[x(2)] | …</span></span></span></pre>
          <p> <span style="font-variant: normal"><span
                style="font-style: normal"><span style="font-weight:
                  normal">This was carefully fixed by defining a revised
                  routine </span></span></span><i><span
                style="font-weight: normal">zfour(z,npts,isign,dt,df) </span></i><span
              style="font-variant: normal"><span style="font-style:
                normal"><span style="font-weight: normal">in all code.
                  This is a step in defining every variable in a manner
                  compatible with modern computer languages.</span></span></span></p>
          <p style="font-variant: normal; font-style: normal;
            font-weight: normal"> The program files&nbsp; updated were
            as follow:<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLII/src/sacmat96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLII/src/sacmft96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLII/src/sacpom96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp; &nbsp; VOLIII/src/spulse96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLIV/src/rftndr96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLIV/src/twofft.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLV/src/ffilt96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLV/src/fspec96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVI/src/hpulse96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVI/src/hrftn96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVI/src/hudson96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVI/src/trftn96.f<br>
            &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; VOLVIII/src/sacdecon.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVIII/src/sacevalr.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVIII/src/sacfilt.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVIII/src/saciterd.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLVIII/src/sacspc96.f<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; VOLIX/src/cpulse96.f</p>
          <p style="font-variant: normal; font-style: normal;
            font-weight: normal"> The following documentation was
            updated:<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
            DOC/OVERVIEW.pdf/cps330o.pdf<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
            DOC/GSAC.pdf/cps330g.pdf<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
            DOC/STRUCT.pdf/cps330c.pdf<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
            DOC/SOURCE.pdf/cps330s.pdf<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
            CALPLOT.pdf/cps330p.pdf</p>
        </li>
      </ul>
      <h4 class="western">June 11, 2009</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Hermann Zeyen noticed a problem
            in the FORTRAN&nbsp; implementation of <i>the subroutine
              arsac</i> in the file <b>SUBS/sacsubf.f</b>.&nbsp; "if
            the number of data is multiple of five, the program tries to
            read one line too much."&nbsp; This is not a problem in the
            C version in <b>SUBS/sacsubc.c</b> </p>
        </li>
        <li>
          <p>Modified the SLU version of <b>rdseed</b> to improve
            comments in the sac pole-zero file.</p>
        </li>
      </ul>
      <h4 class="western">May 23, 2009</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected moment magnitude
            definition in <b>fmech96</b> to replace the 16.05 by 16.1
            in log Mo (dyne-cm) = 16.1 + 1.5 Mw </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Added a new command to <b>gsac.
            </b>The <i>mt </i>command uses the pre-compute Green's
            functions (e.g., f96tosac -B -G or f96tosac -B -T ) to
            compute a Z, R, T&nbsp; seismogram or the 3 ZRT seismograms
            for a double couple source. The output will be in units of <i>m/s</i>
            for a step dislocation.&nbsp; The purpose of this command is
            to be able to quickly create forward synthetics for use in
            finite-fault inversion. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Changed the part <b>sacmft96</b>
            that selects the period limits.&nbsp; The previous code
            looked like <i>if(p .ge. pmin .and. p .le. pmax.and.
              p.ge.permin .and. p.le.permax)then </i>which had roundoff
            problems as noted by Renata Schivardi at INGV Bologna. The
            code&nbsp; was changed to be slightly more generous by
            changing the test
            to&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <i>if(p .ge. 0.99*pmin .and. p .le. 1.01*pmax .and. p.ge.
              0.99*permin .and. p.le.1.01*permax)then&nbsp;</i> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Changed the part of <b>sacmat96
            </b>that selects the period limits. The previous code was <i>if(p















              .ge. pmin .and. p .le. pmax)then </i>This was changed to
            <i>if(p .ge. 0.99*pmin .and. p .le. 1.01*pmax)then </i>to
            overcome roundoff error. This problem was noted by Renata
            Schivardi at INGV Bologna. </p>
        </li>
        <li>
          <p>Modified <b>gsac</b> to permit a title to be placed on the
            figure generated by the <i>plotsp</i> command.</p>
        </li>
      </ul>
      <h4 class="western">March 30, 2009</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected <i>xlim</i> command
            of <b>gsac</b> so that the plot axes are correctly reset
            after the command <i>xlim off.</i> </p>
        </li>
        <li>
          <p>Added new options to the <b>gsac</b> <i>rotate3</i>
            command:&nbsp; <i>rotate3 to uvwsts2 </i>and <i>rotate3
              to uvwtril.</i>&nbsp; </p>
          <p>The reason for this is that a field system had a broadband
            sensor with internal UVW sensors and also an accelerometer.
            As part of seismic network quality control, the recordings
            of each were corrected for instrument response and the
            derived ground motions were compared for that part of the
            signal with high signal-to-noise. These should be identical
            since the ground motion is the same.&nbsp; For our field
            system, this did&nbsp; not occur, and we returned the
            broadband and accelerometer to the university and compared
            the recordings to a reference system.&nbsp; A similar
            comparison showed that the problem was with the broadband
            sensor. The rotate3 to uvw was added to <b>gsac </b>to
            isolate the internal UVW sensor that was the cause of the
            problem. To do this the ZNE motion of the test and reference
            systems were rotated to the UVW coordinate system of the
            test system and the individual UVW traces were compared.
            Because we compared two different 3-component sensors,
            recording of the UVW channels of each would not have worked
            since each was different.<br>
            <br>
            A description of the coordinate system transformation
            implemented now is <b>gsac </b>given in the PDF document <a
              href="ROTATE3/rotate3.pdf">rotate3.pdf</a></p>
        </li>
      </ul>
      <h4 class="western">March 19 ,2009</h4>
      <ul>
        <li>
          <p>At the request of Chuck Ammon, <b>hudson96 </b>now has a
            flag that permits one to override the model computed T*.
            This is invoked with the command option <i>-TSTAR tstar </i>.&nbsp;
































            A valid range of the <i>tstar</i> is &gt;= 0.&nbsp; If one
            enters a value of 0.0 the program sets this internally to
            0.0001 as a quick way to implement this without a major code
            rewrite.</p>
        </li>
      </ul>
      <h4 class="western">March 18, 2009</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Incorporated a fix in
            subroutines PROGRAMS.330/SUBS<i>/sacsubf.f </i>and
            PROGRAMS.330/SUBS/<i>sacsubc.c </i>to use the Enumerated
            Types for IZTYPE of IUNKN, IB, IDAY, IO, IA, IT0, IT1, ...,
            IT9. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Modified PROGRAMS.330/VOLVI/src/<b>hudson96.f
































            </b>to fix logical errors in the time delay correction for
            the T* operator, and more importantly to overcome numerical
            proplems for the S-wave incident at the receiver. This was
            done by replacing an explicit matrix sub-determinant by a
            compound matrix value. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Modified PROGRAMS.330/VOLV/src/<b>time96.f</b>
            to compute the travel time and ray parameter for the sS
            arrival. </p>
        </li>
        <li>
          <p>The distribution now includes the source code for the menu
            program for terminals, <b>dialog </b>(dialog-1.1-20080819)</p>
        </li>
      </ul>
      <h4 class="western">March 3, 2009</h4>
      <ul>
        <li>
          <p>Modified the file <i>gsac_sac.c </i>in
            PROGRAMS.330/VOLVIII/gsac.src&nbsp; to improve the detection
            of a non-sac file.&nbsp; Hopefully this will prevent
            problems when trying to read sac files with the incorrect
            byte order.</p>
        </li>
      </ul>
      <h4 class="western">February 21, 2009</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Renamed the utility program <b>CAL</b>
            in PROGRAMS.330/CALPLOT/Utility to <b>calplt</b>.&nbsp; The
            reason for this is that MacOS-X does not distinguish between
            upper and lowercase executable names, and <b>CAL</b>
            conflicts with the calendar program <b>cal</b>.&nbsp; Since
            <b>CAL </b>was used in shell scripts to annotate plots,
            instances of <b>CAL</b> will be changed to <b>calplt</b>
            until all are corrected.&nbsp; The graphics output of the
            program is renamed <i>CALPLT.PLT</i> to be consistent with
            the naming convention of other programs. Correct
            documentation in PROGRAMS.330/DOC and MOMENT_TENSOR tutorial
            and others tutorials to reflect this change.&nbsp; </p>
        </li>
        <li>
          <p>Corrected the MOMENT_TENSOR tutorial scripts to provide
            more information on copying files. Also corrected the
            DOBYTEORDER in the GREEN directory of pre-computed Green's
            functions.</p>
        </li>
      </ul>
      <h4 class="western">February 18, 2009</h4>
      <ul>
        <li>
          <p>Fixed a but in the programs <b>spulse96,</b> <b>hspec96,</b>
            <b>hudson96,</b> <b>time96,</b> <b>timmod96</b> and <b>refmod96</b>&nbsp;

































            which was due to the fact that the parameter <i>refdep</i>
            was not defined in <i>subroutine frstar</i>.&nbsp; This was
            discovered because of memory dump problems on some
            computers.</p>
        </li>
      </ul>
      <h4 class="western">January 5, 2009</h4>
      <ul>
        <li>
          <p>Introduced a new program <b>fmlpr</b> which is based on
            the program <i><b>lprmech</b></i> written by Charles J.
            Ammon.&nbsp; This program is controlled from the command
            line and creates two files. The first is a printer-plot
            tabulation of a double-couple focal mechanism solution, and
            the second provides those results in a global CMT 'ndk'
            format. A example run if given by the line </p>
          <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
            fmlpr "TITLE" "DATETIME" "GEOG" EVDP MW strike dip rake
            "FILE1" "FILE2" "FILE3"<br>
            <br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
            &nbsp; TITLE DATETIME and GEOG are enclosed in quotes<br>
            &nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp; FILE1 - name of file with stations used<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
            &nbsp; FILE2 - file with data summary: NSTA NCMP MINPER<br>
            &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp; FILE3 - file with filtering commands<br>
            <br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; fmlpr "USGS/SLU Moment
            Tensor Solution" "${YEAR} ${MO} ${DY} ${HR} ${MN} ${SEC}
            ${MSEC} ${LAT} ${LON} ${DEPTH} ${MAG}" "${STATE}" ${HS}
            ${MW} ${STK} ${DIP} ${RAKE} sumstaused.txt&nbsp;
            sumswavendk.txt&nbsp; sumwfilter.txt<br>
            &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Here the first string
            provides a title for the printer plot, the second string
            provides information about the earthquake location and the
            third string provides a geographical description of the
            earthquake source zone.&nbsp; These nest items, e.g., HS,
            MW, STK, DIP and RAKE are the source depth, moment magnitude
            and double-couple source parameters. The last three items
            are text files for further annotation. The <i>sumstaused.txt















            </i>lists the stations used for the source inversion, <i>sumswavendk.txt
































            </i>consists of a single line with three numbers - the
            number of stations used, the number of components and the
            minimum period used in the inversion. The last file, <i>sumwfilter.txt</i>,
            lists the <b>gsac</b> signal preparation commands so that
            the filter band is known.<br>
            <br>
            When invoked as <br>
            <br>
            fmlpr "USGS/SLU Moment Tensor Solution" "2008 10 14 03 07 28
            000&nbsp; 35.76&nbsp; -100.704&nbsp; 5.0&nbsp; 3.80" "Texas"
            11.0 3.65 285 70 -80 sumstaused.txt sumswavendk.txt
            sumwfilter.txt<br>
            &nbsp;<br>
            with <i>sumstaused.txt </i>containing</p>
          <p style="margin-bottom: 0in">IU.ANMO TA.MSTX US.CBKS US.JCT
            US.KSU1 US.OGNE US.SDCO<br>
            US.WMOK</p>
          <p style="margin-bottom: 0in">and <i>sumswavendk.txt </i>containing</p>
          <p style="margin-bottom: 0in">8 19 10</p>
          <p style="margin-bottom: 0in">and <i>sumwfilter.txt</i>
            containing</p>
          <p style="margin-bottom: 0in">hp c 0.05 n 3<br>
            lp c 0.10 n 3<br>
            br c 0.12 0.25 n 4 p 2</p>
          <p>two files are created: <i>20081014030728.msg</i>, which is
            the printer plot, and <i>20081014030728.ndk</i>, which is
            the solution information in the Global CMT ndk format (<a
href="http://www.ldeo.columbia.edu/%7Egcmt/projects/CMT/catalog/allorder.ndk_explained">http://www.ldeo.columbia.edu/~gcmt/projects/CMT/catalog/allorder.ndk_explained</a>
            ). The contents of the file <i>20081014030728.ndk </i>are</p>
          <pre class="western">ENS  2008/10/14 03:07:28:0  35.76 -100.70   5.0 3.8 0.0 EL SALVADOR
C20081014030728A B:  0    0   0 S:  8   19  10 M:  0    0   0 CMT: 1 TRIHD:  0.2
CENTROID:      0.0 0.0  35.76 0.00 -100.70 0.00  11.0  0.0 FREE S-20090105234025
21 -2.379 0.000  2.526 0.000 -0.147 0.000  2.681 0.000 -0.949 0.000 -0.064 0.000
V10   3.758 24   7   0.000  9 102  -3.758 64 211   3.758 285 70  -80  78 22 -116</pre>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2008</h2>
      <hr>
      <hr>
      <h4 class="western">December 22, 2008</h4>
      <ul>
        <li>
          <p>Modified two routines in <b>gsac</b>: <i>gsac_rot.c </i>and

































            gsac_rot3.c.&nbsp; Basically I had problems with statements
            like <i>if( az[0] != az[1] )</i> and <i>if ( baz[0] !=
              baz[1] )</i> because of roundoff error. So I replaced this
            with if(ABS(az[0] - az[1]) &gt; 0.01) and the same for the
            baz test</p>
        </li>
      </ul>
      <h4 class="western">November 12. 2008</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified <b>plotxvig</b> to
            permit the use of a <i>-C </i>flag.&nbsp; When this is
            set, the arrow cursor for display is replaced by a
            crosshair.&nbsp; The purpose of this is to be able to read
            axis numbers for a point within a plot. </p>
        </li>
        <li>
          <p>Modified <b>do_mft </b>to permit the use of a cross-hair
            cursor. Note that this is not perfectly implemented. The
            purpose of both of these changes is to be able to compare
            the dispersion shown in a regular plot to that of the
            multiple filter analysis when plotting both side-by-side. I
            was comparing observed dispersion to an independent
            tomographic estimate.</p>
        </li>
      </ul>
      <h4 class="western">September 3, 2008</h4>
      <ul>
        <li>
          <p>Modified <b>udelaz</b> so that one can also use <i>-GCARC</i>
            to get the epicentral distance in degrees and <i>-DIST</i>
            to get the epicentral distance in kilometers.&nbsp; The
            previous <i>-DELDEG</i> and <i>-DELKM</i> still
            work.&nbsp;&nbsp; This was done to make the command syntax
            closer to that of <b>gsac</b>.&nbsp; </p>
        </li>
      </ul>
      <h4 class="western">August 4, 2008</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified the CALPLOT graphics
            programs <b>plotxvig, plot4014, plotnps, plotgif</b>
            and&nbsp; <b>plotpng</b> to support -<i>X0x_offse</i>t and
            <i>-Y0y_offset</i> flags. These were always part of the <b>reframe</b>
            command for repositioning a plot. I added this feature for
            use mostly with <b>plotxvig </b>so that I can display
            plots that are too high on the page. </p>
        </li>
        <li>
          <p>Changes #define NCHAR 1000 in <i>VOLVIII/gsac.src/gsac_parse_command.c&nbsp;
































            </i>to&nbsp; #define NCHAR 2000 to permit more file names on
            the command line. I noticed this when trying to read in a
            lot of files, but I did not have this problem with using a
            wild card.</p>
        </li>
      </ul>
      <h4 class="western">June 13, 2008</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Corrected the <i>gsac_refr.c </i>(refraction
































            analysis routine) of <b>gsac</b>, so that the refraction
            velocities are given correctly for a reverse spread, e.g.,
            negative distances which would yield negative slopes and
            velocities. </p>
        </li>
        <li>
          <p>Modified <b>refmod96</b> so that the line width parameter
            (e.g., command line -W width)&nbsp; applies to the reflected
            arrivals.&nbsp; For multilayered models, the line width or
            pattern is a function of the reflection coefficient of the
            deepest reflecting interface to be able to focus on the
            important reflection. The reflection times are still the
            times to the deepest layer, e.g., if the deepest layer
            boundary is 3, then the rays computed are 1 1, 1&nbsp; 2 2 1
            for the first&nbsp; reflection, and 1 1 1 1 and 1 2 2 1 1 2
            2 1 for the first multiple; however the mixed multiple 1 2 2
            1 1 1&nbsp; is not computed.&nbsp; A plot showing the
            refraction and reflection predictions is given in <a
              href="REFMOD96/refmod96.html">refmod96 examples</a></p>
        </li>
      </ul>
      <h4 class="western">May 25-29, 2008</h4>
      <ul>
        <li>
          <p>Corrected <b>hudson96 </b>so that the SH arrival times
            are computed and ultimately placed in the <i>file96 </i>and















            <i>sac </i>file trace headers (May 25, 2008). To properly
            set the arrival time, the start of the teleseismic
            attenuation pulse is determined empirically using two FFT's.
            This must be done using the same DT as for the synthetic
            because of the frequency dispersion inherent in the causal
            T* operator (May 28, 2008). Corrected indexing when merging
            source and receiver structure with teleseism structure. The
            halfspace was not&nbsp; inserted correctly (May 29, 2008).</p>
        </li>
      </ul>
      <h4 class="western">May 7, 2008</h4>
      <ul>
        <li>
          <p>Modified <b>evalresp</b> in <i>PROGRAMS.330/IRIS/evalresp-3.2.38.slu
































            </i>to handle FIR stages with a large number of
            coefficients.&nbsp; Specifically, Change Eric J. Haug SLU
            May, 2008 to handle continuation for FIRST with a large
            number of coefficients. Basically we need to get past the
            tendency of some SEED writers to put the following phase in
            the RESP file "No Abbreviation Referenced" for Response in
            units lookup and &nbsp;&nbsp;&nbsp;&nbsp; Response out units
            lookup.&nbsp; The modified code provides the same output as
            the current version of the IRIS <b>jevalresp</b></p>
        </li>
      </ul>
      <h4 class="western">April 9, 2008</h4>
      <ul>
        <li>
          <p>Corrected error in <b>gsac</b> <i>(gsac_sort.c) </i><span
              style="font-variant: normal"><span style="font-style:
                normal">which prevented a sort on an integer variable.
                Also correct a typo so that a </span></span><i>sort up
              ihdr11</i> <span style="font-variant: normal"><span
                style="font-style: normal">works.</span></span></p>
        </li>
      </ul>
      <h4 class="western">March 31, 2008</h4>
      <ul>
        <li>
          <p>Created a new program <b>hudson96</b> which makes
            approximate teleseismic synthetics following the work of
            Hudson(1969). This approach focuses on the direct
            teleseismic P or S arrival through the use of a stationary
            phase approximation for the ray parameter connecting the
            direct arrival from the source to the receiver. The
            interesting feature of this approach is the use of
            propagator matrices for the source and receiver crusts, so
            that the depth phases are automatically included as well as
            the details of the source and receiver crustal models.&nbsp;
            The program is self contained in that the travel time, T*
            and geometrical spreading are computed within the
            program.&nbsp; A tutorial on the use of the program is on
            the tutorial page.</p>
          <p>Hudson, J. A. (1969). A quantitative evaluation of seismic
            signals at teleseismic distances - II. Body waves and
            surface waves from an extended source, <i>Geophys. J. Roy.
              astr. Soc. </i><b>18</b>, 353-370.</p>
        </li>
        <li>
          <p>The programs <b>time96, timmod86, refmod96,
              spulse96,&nbsp;&nbsp; </b>and <b>hspec96 </b>were
            upgraded with the same travel time routine used in <b>hudson96</b>,
            to now compute the geometrical spreading for teleseismic
            arrivals.</p>
        </li>
      </ul>
      <h4 class="western">March 14, 2008</h4>
      <ul>
        <li>
          <p>Added a new flag to <b>hprep96. </b>The <i>-ML
              length_mul </i>is typically used in increase the length
            for wavenumber integration,L , estimated using the Bouchon
            criteria, which is that <i>dk = 2 pi / L . </i>There are
            circumstances when the default value of <i>L </i>is a
            little too small, and significant noise signals occur at
            later time.&nbsp; This option is easier than trying to guess
            the correct value of <i>L </i>for the command line
            override, e.g., -XL xleng</p>
        </li>
      </ul>
      <h4 class="western">February 8, 2008</h4>
      <ul>
        <li>
          <p>Corrected an error in the <i>prs</i> command of <b>gsac</b>.
            Because of an incorrect clipping command in the graphics,
            the trace annotation was not done correctly when using the <i>prs
















              ann sta </i>command.</p>
        </li>
        <li>
          <p>Tested the Earth flattening used in <b>hspec96, tspec96,
              surf96, joint96, sdisp96, sregn96 </b>and <b>slegn96</b></p>
        </li>
      </ul>
      <h4 class="western">January 28, 2008</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Created a new program <b>ttime96</b></p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Installed identical travel time
            routines for TI models in the following programs: <b>ttime96,
















              ttimmod96, tspec96 </b>and <b>hprep96. </b> </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The travel time validation is
            given at the links <a href="TIME96">Isotropic Model Test</a>
            and <a href="TTIME96">Transverse Isotropic Model Test</a> </p>
        </li>
        <li>
          <p>Fixes errors in <b>tspec96</b> that affected synthetics
            with Q. For an isotropic model, the output of <b>tspec96 </b>agrees
































            with that of <b>hspec96</b></p>
        </li>
      </ul>
      <h4 class="western">January 22, 2008</h4>
      <ul>
        <li>
          <p>Installed identical travel time routines for isotropic
            models in the following programs: <b>time96, timmod86,
              refmod96, spulse96, hspec96.&nbsp; </b>The new routines
            provide the correct results for flat and spherical velocity
            models for travel times, ray parameter, T* of the P, S, pP
            and sP phases.&nbsp; They also correctly handle the artifice
            of representing the atmosphere by a stack of layers with
            negative layer thickness so that a depth of 0 corresponds to
            the surface of the solid.</p>
        </li>
      </ul>
      <h4 class="western">January 17, 2008</h4>
      <ul>
        <li>
          <p>Modified <b>gsac</b>.&nbsp; Under <i>ppk / plotpk </i>the
















            'l' or 'L' command returns the epoch time to the right of
            the amplitude.&nbsp; The purpose of this is to facility
            estimating time differences from two successive 'L' commands
            on different parts of the trace</p>
        </li>
      </ul>
      <h4 class="western">January 10, 2008</h4>
      <ul>
        <li>
          <p>Corrected a memory allocation error in
            PROGRAMS.330/VOLII/src/do_pom3.c</p>
        </li>
      </ul>
      <h4 class="western">January 3, 2008</h4>
      <ul>
        <li>
          <p>There were a number of changes made to the wavenumber
            integration and surface-wave codes to permit a better
            Earth-flattening transformation to permit the computation of
            seismograms for a spherical Earth by using the plane-layered
            code.&nbsp; These transformations were tested using <i>mineos</i>.
            A description of the current status of the Earth flattening
            studies is given at the following link.&nbsp;&nbsp; <a
              href="../TUTORIAL/SPHERICITY/index.html">../TUTORIAL/SPHERICITY</a>
          </p>
          <p>A detailed tutorial on teleseismic synthetics and source
            inversion must be prepared.<br>
            <br>
            This update changes the following programs: <b>sdisp96,
              sregn96</b> and <b>slegn96</b> in
            PROGRAMS.330/VOLIII/src, <b>srfdis96,</b> <b>srfdrr96</b>
            and <b>srfdrl96</b> in PROGRAMS.330/VOLIV/src, and <b>hspec96
            </b>in PROGRAMS.330/VOLVI/src. Note <b>hspec96</b> was
            modified on January 14, 2008 to correctly handle the source
            and receiver depth insertion for the flattening. The use of
            the reference depth still needs work to handle atmospheric
            layers about the surface.</p>
        </li>
      </ul>
      <h4 class="western">January 2, 2008</h4>
      <ul>
        <ul>
          <ul>
            <ul>
              <li>
                <h4 class="western">&nbsp;<span style="font-weight:
                    normal">Created a new program: </span><b>redodate</b>&nbsp;
































                  <span style="font-weight: normal">The purpose of </span><b>redodate</b>
                  <span style="font-weight: normal">is to change a
                    data/time specification through an offset,
                    e.g.,&nbsp; </span> </h4>
              </li>
            </ul>
          </ul>
        </ul>
        <p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span
            style="font-weight: normal">redodate 2009 01 01 00 01 02 456
            -3660</span><br>
          <span style="font-weight: normal">returns</span><br>
          &nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; <span
            style="font-weight: normal">2008 12 31 23 00 02 456</span><br>
          <span style="font-weight: normal">I require this in order to
            specify window segments for traces that I wish to
            download.&nbsp; Previously i started at the origin time, but
            I needed more signal for inversion, so I would like to start
            some offset (a negative number) before the specified origin
            time.&nbsp;&nbsp; This code segment indicates how this would
            be used in a shell script, where I would like to start 60
            seconds before the origin time:</span></p>
        <pre class="western">YEAR=2009
MONTH=01
DAY=01
HOUR=00
MINUTE=01
SECOND=02
MSEC=456
OFFSET=-60
redodate ${YEAR} ${MONTH} ${DAY} ${HOUR} ${MINUTE} ${SECOND} ${MSEC} ${OFFSET} &gt;
 tmp
read YEAR MONTH DAY HOUR MINUTE SECOND MSEC &lt;  tmp
echo "YEAR     :" ${YEAR}
echo "MONTH    :" ${MONTH}
echo "DAY      :" ${DAY}
echo "HOUR     :" ${HOUR}
echo "MINUTE   :" ${MINUTE}
echo "SECOND   :" ${SECOND}
echo "MSEC     :" ${MSEC}
rm -f tmp</pre>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2007</h2>
      <hr>
      <hr>
      <h4 class="western">November 17, 2007</h4>
      <ul>
        <li>
          <p>Upgraded the distributed IRIS programs <b>evalresp </b>from
















            version 3.2.25 to 3.2.38 and <b>rdseed</b> from 4.5 to
            4.7.5.&nbsp; In order to support the CPS architectures,
            e.g., CYGWIN (Windows), MacOS-X, LINUX and Solaris, changes
            were made to these codes. The changes are given in the links
            in this section. This upgrade was required in order to
            continue to use the most recent SEED volumes. </p>
          <p>The two programs are installed in <i>PROGRAMS.330/bin</i>
            with the executable names <b>evalresp</b> and <b>rdseed</b>.
            The IRIS distribution of <i>rdseed</i> provides the
            executables <i>rdseed.linux</i>, <i>rdseed.ppc-mac</i>, <i>rdseed.intelmac</i>
            and <i>rdseed.solaris</i>. These binaries are available in
            the <i>PROGRAMS.330/IRIS/rdseed4.7.5</i> directory of <b>CPS</b>.
            If you wish to use these programs, you must install them in
            your system and adjust the path to find them. </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>evalresp&nbsp; - </b>The
                distributed code has an #include &lt;malloc.h&gt;. This
                is deprecated in MacOS-X to &lt;malloc/malloc.h&gt;
                which means that the code will not compile.&nbsp; Since
                modern compilers provide the prototypes for <i>malloc</i>
                in &lt;stdlib.h&gt;. I changed alloc_fctns.c,
                parse_fctns.c, regexp.c and string_fctns.c by commenting
                out the #include &lt;malloc.h&gt; and ensuring the
                presence of a #include &lt;stdlib.h&gt;.&nbsp; <br>
                <a href="IRIS/diffevalresp.html">Detailed changes</a>. </p>
              <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                <b>NOTE THAT evalresp-3.2.40 will configure properly for
                  the MacOS. When this is officially released, it will
                  be included in CPS!</b></p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>rdseed - </b>Several
                changes were made. </p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in">The most important was
                    to change the use of <i>long </i>in the definition
                    of the integer SAC header values to <i>int.</i>
                    Before computers were truly 32 bit, <i>short </i>meant















                    a 2 byte integer, <i>long </i>a 4 byte integer,
                    and <i>int </i>could mean a&nbsp; byte integer.
                    Currently, <i>int</i> means 4 bytes.&nbsp; A
                    problem arises on 64 bit machines, for which a <i>long















                    </i>means an 8 byte integer.&nbsp; One way around
                    this is to use the <i>-m32</i> flag on the
                    compiler.&nbsp; CPS changes the <i>long </i>to
                    int. </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">Another change relates
                    to the <i>strupr</i> routine. This is actually
                    provided by some libraries.&nbsp; Thus all instances
                    of <i>strupr</i> are changed to <i>Strupr</i> and
                    a definition is placed in <i>Include/rdseed.h</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Utilities/alloc_linklist_element.c

































                    </i>- add #include &lt;stdlib.h&gt;&nbsp; to define
                    malloc() </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Ah/makefile</i> -
                    remove CC=gcc&nbsp; since not all compilers use gcc
                    - note that&nbsp; CC is defined in the main Makefile</p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Decoders/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Parsers/makefile</i>
                    - remove CC=gcc&nbsp; since not all compilers use
                    gcc </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Utilities/log_errors.c
















                    </i>- change the syntax of stderr_to_file from <i>stderr_to_file(char

































                      *fmt, char*ap) </i>to <i>void
                      stderr_to_file(char *fmt, va_list ap)</i> for
                    comparibility with &lt;stdio.h&gt; </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Main/output_sac.c </i>-
                    Place comments into the pole-zero file giving
                    information about the station, network, date, etc.<br>
                    <a href="IRIS/outputsac.html">(Sample SAC pole-zero
                      file)</a> </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><i>Main/output_resp.c </i>-
                    Send information about the network to stderr, e.g.,
                    station, network, component, location, on_date,
                    off_date, latitude, longitude, elevation, response
                    file name, component azimuth and dip and sample rate
                    in <i>print_resp.</i><br>
                    <a href="IRIS/outputresp.html">(Sample stderr
                      output)</a> </p>
                </li>
                <li>
                  <p>Updated the manual entry in <i>Main/rdseed.1 </i>to
















                    make the command line flags more complete on the
                    first page. The <i>pdf</i> version of this document
                    is in <i>PROGRAMS.330/DOC/IRIS.pdf</i> where you
                    will find <i>evalresp.pdf</i>, <i>rdseed.pdf</i>
                    and <i>SEEDManual_V2.4.pdf</i>. <br>
                    <a href="IRIS/diffrdseed4.7.5.html">Detailed changes</a>
                    <br>
                    The modified <b>rdseed</b> was successfully
                    compiled on both 32 and 64 bit Intel LINUX machines
                    using the GNU compilers, on a SPARC Solaris machine
                    using SUN compilers, on an Intel Windows machine
                    under the CYGWIN environment, and under MacOX-X
                    using the GNU compilers. The only compiler warnings
                    were the following: </p>
                  <pre class="western">cc -I../Include -c -g   -c -o decode_steim.o decode_steim.c
decode_steim.c: In function `decode_steim':
decode_steim.c:231: warning: integer overflow in expression
decode_steim.c:231: warning: integer overflow in expression</pre>
                  <p> for all compiles, and </p>
                  <pre class="western">cc -I../Include -c -g   -c -o parse_30.o parse_30.c
parse_30.c: In function `parse_type30':
parse_30.c:96: warning: cast to pointer from integer of different size</pre>
                  <p> on just the 64-bit LINUX compiler (<i>note that
                      the -w32 compiler flag was not used</i>). </p>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
      <h4 class="western">November 9, 2007</h4>
      <ul>
        <li>
          <p>Modified the code of <b>wvfmch96</b> so that there is no
            internal limit on the number of waveforms for which forward
            synthetics are required. In the present distribution, the
            maximum number of waveforms permitted for use by <b>wvfmch96,
















              wvfgrd96, wvfmt96 </b>and <b>wvfmtd96 </b>is 2000, with
            each trace permitted to consist of 4096 points.&nbsp;
            Because <b>wvfmch96 </b>creates a forward synthetic for a
            given moment tensor description, this program can be used as
            part of a QC process to evaluate all recorded waveforms in a
            data center.&nbsp; Since there can easily be more than 2000
            such waveforms today, hard dimension limits are a major
            inconvenience.&nbsp; The logic of <b>wvfmch96 </b>was
            modified so that the forward synthetic is created separately
            for each input file, rather than reading in all files and
            corresponding Green's functions into memory.&nbsp; </p>
        </li>
      </ul>
      <h4 class="western">October 21. 2007</h4>
      <ul>
        <li>
          <p>Hacked a fix for the distance computation used in <b>gsac
            </b><i>(gsac_subs.c) </i>and <b>udelaz</b>.&nbsp; The
            problem was that if the event - station latitude/longitude
            pair differed in coordinates by 0.0001 degree or less, then
            the computed distance in kilometers was incorrect because of
            roundoff error of the angles used for the elliptic
            integrals. The artifice used for distances less than 1.0 km,
            is to use the spherical relation&nbsp; delkm = 6371.003 *
            delradian&nbsp; for the short distances.</p>
        </li>
      </ul>
      <h4 class="western">October 19. 2007</h4>
      <ul>
        <li>
          <p>Error in the DIF routine found by Harley Benz in <i>gsac_dif.c</i>.
            The errors was that the first point was incorrectly defined.</p>
        </li>
      </ul>
      <h4 class="western">October 04, 2007</h4>
      <ul>
        <li>
          <p>Modified <b>sacmft96</b> and <b>sacpom96 </b>to take
            ABS(DIST) where DIST is from the SAC header.&nbsp; This is
            because I sometimes require negative distances when using
            shallow refraction data.&nbsp; For a split spread, the&nbsp;
            <b>gsac</b> <i>refr</i> command will display the split
            spread.&nbsp; The <i>refl </i>command will also work
            now.&nbsp; The only bad thing is that the refraction
            velocities may now appear to be negative.&nbsp; These
            changes were made as part of an effort to develop a
            procedure for determining shallow S-wave velocity structure.
          </p>
          <p>A problem with the distance/azimuth computations in <b>gsac&nbsp;

































            </b>was noticed in the process of computing epicentral
            distances less than 1 km.&nbsp; This problem will also
            affect <b>udelaz. </b>This is currently under
            investigation.</p>
        </li>
      </ul>
      <h4 class="western">August 30, 2007</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>gsac&nbsp; - </b>implemented
            two new commands in <i>prs (plotrecordsection): </i>ScaleRelative

































            (SR) and ScaleAbsolute power (SA Power) to control the
            amplitude of the traces in the record section.&nbsp;
            ScaleRelative is the old behavior which just scales each
            trace to the same maximum amplitude (AMP value), except that
            the scaling now applies only to the actual trace window and
            not the whole trace.&nbsp; ScaleAbsolute 0.0 adjusts all
            traces to plot true amplitude. If the non-time axis is
            distance, then ScaleAbsolute 1.0&nbsp; adjusts for
            geometrical spreading by multiplying all traces by dist<sup>power















            </sup>. For a true refracted arrival (e.g., with no velocity
            gradients), power=1.5 would show the refractions at the same
            level. The current&nbsp; <b>gsac </b>version is&nbsp;
            now[V1.1.21 30 AUG 2007] </p>
        </li>
        <li>
          <p><b>wvfgrd96 </b>is now modified so that the output traces,
            e.g., TRACE.obs and TRACE.pre have the time shift applied.
            This means that if <b>pltsac </b>is used with the flag <i>-USER9
































            </i>the time shift will be displayed even though the traces
            align. The objective here is to present the observed and
            predicted in such a way to focus on amplitude and phase
            differences and not time shifts.</p>
        </li>
      </ul>
      <h4 class="western">August 19, 2007</h4>
      <ul>
        <li>
          <p><b>gsac&nbsp; - </b>modified the <i>write</i> command to
            support <i>'append </i>suffix' and '<i>prepend </i>prefix'.&nbsp;
































            To illustrate the differences between sac2000, we will work
            in a subdirectory with the files located in the level above:
          </p>
          <center>
            <table cellspacing="2" cellpadding="2">
              <tbody>
                <tr>
                  <td style="border-top: 1px double #808080;
                    border-bottom: 1px double #808080; border-left: 1px
                    double #808080; border-right: none; padding-top:
                    0.02in; padding-bottom: 0.02in; padding-left:
                    0.02in; padding-right: 0in">
                    <p> &gt; sac2000<br>
                      &nbsp;SEISMIC ANALYSIS CODE [8/8/2001 (Version
                      00.59.44)]<br>
                      &nbsp;Copyright 1995 Regents of the University of
                      California<br>
                      <br>
                      SAC&gt; r ../*.sac<br>
                      ../imp.sac ...nimp.sac<br>
                      SAC&gt; w append .s<br>
                      ../imp.sac.s ...nimp.sac.s<br>
                      SAC&gt; ls<br>
                      SAC&gt; r<br>
                      ../imp.sac ...nimp.sac<br>
                      SAC&gt; w prepend p.<br>
                      p.../imp.sac ...nimp.sac<br>
                      &nbsp;ERROR&nbsp; 101: opening file<br>
                      SAC&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                    </p>
                  </td>
                  <td style="border: 1px double #808080; padding:
                    0.02in">
                    <p>GSAC - Computer Programs in Seismology [V1.1.19
                      01 AUG 2007]<br>
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Copyright
                      2004, 2005, 2006, 2007 R. B. Herrmann<br>
                      GSAC&gt; r ../*.sac<br>
                      ../imp.sac ../nimp.sac<br>
                      GSAC&gt; w append .s<br>
                      imp.sac.s nimp.sac.s&nbsp;&nbsp; <font
                        color="#ff0000">[Note write in local directory
                        not original ]</font><br>
                      GSAC&gt; r<br>
                      ../imp.sac ../nimp.sac<br>
                      GSAC&gt; w prepend p.&nbsp; &nbsp; <font
                        color="#ff0000">[Note write in local directory
                        not original - note Sac2000 ]</font><br>
                      p.imp.sac p.nimp.sac&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                      <font color="#ff0000">[cannot prepend in parent
                        directory ]</font><br>
                      GSAC&gt; w append .S prepend P. &nbsp; <font
                        color="#ff0000">[Note write in local directory
                        not original ]</font><br>
                      P.imp.sac.S P.nimp.sac.S<br>
                      GSAC&gt;
                      ls&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































                      <font color="#ff0000">[show what was created in
                        the current directory]</font><br>
                      imp.sac.s&nbsp; nimp.sac.s&nbsp; p.imp.sac&nbsp;
                      P.imp.sac.S&nbsp; p.nimp.sac&nbsp; P.nimp.sac.S</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </center>
          <ul>
            <ul>
              <p>One major difference is that although a&nbsp; '<i>w</i>'&nbsp;

































                under both sac2000 and <b>gsac</b> will overwrite the
                original file in the upper directory, the <b>gsac</b>
                append and prepend will create files in the current
                directory.&nbsp; Because <b>gsac </b>strips off the
                leading directory path prior to implementing the <i>prepend
































                </i>command, this operation will work. </p>
            </ul>
          </ul>
        </li>
      </ul>
      <h4 class="western">August 16, 2007</h4>
      <ul>
        <li>
          <p><b>gsac </b>modified to permit the use of the SAC commands
            <i>plot1</i> (<i>p1</i>) and <i>plot2</i> (<i>p2</i>) to
            force multi-trace plot (which is the default of the <b>gsac
            </b>plot ) and overlay (respectively). Note that the SAC <i>plot</i>
            shows a single trace at a time.&nbsp; This is inconvenient
            for normal use and <b>gsac </b>will reserve the <i>plot </i>(<i>p</i>)
            for a multitrace view. </p>
        </li>
      </ul>
      <h4 class="western">August 14, 2007</h4>
      <ul>
        <li>
          <p>Initial development of new source model for surface-wave
            and waveform inversion - the crack. Following Nakano, M.,
            and H. Kumagi (2005). Waveform inversion of volcano-seismic
            signals assuming possible source geometries, Geophys. Res.
            Letters 32, L12302, doi:10.1029/2005GL022666, a new command
            line option <i>-CRACK </i>is permitted for the programs <b>srfgrd96,















              sdprad96, sdpspc96 </b>and <b>wvfmch96</b>. The crack is
            specified in terms of the parameters <i>-DIP dip -STK -RAKE
              rake -MW mw or -M0 mo </i>where <i>dip </i>is the dip
            of the crack,&nbsp; <i>stk </i>is the dip-direction of the
            crack (dips down to the right when looking in the direction
            of strike).&nbsp; The <i>rake </i>is used to indicate an
            expanding crack (positive) or closing crack
            (negative).&nbsp; The&nbsp; moment magnitude or moment are
            positive numbers. </p>
          <p>At present the program <b>fmplot </b>is not modified, nor
            is the output of <b>sdprad96 </b>to indicate that the
            crack model was used instead of the earthquake double
            couple.</p>
          <p>The reason for this introduction of a new source was to
            study the Utah mine collapse of 2007 08 06 08 48 40!</p>
        </li>
      </ul>
      <h4 class="western">August 1, 2007</h4>
      <ul>
        <li>
          <p><b>gsac </b>- corrected map command so that it now
            correctly handles the <i>station off</i> and <i>epicenter
              off</i> commands. Previously the epicenters were always
            plotted. <br>
            &nbsp; </p>
        </li>
        <li>
          <p><b>gsac </b>is at version V1.1.19&nbsp; 01 AUG 2007 </p>
        </li>
      </ul>
      <h4 class="western">July 16, 2007</h4>
      <ul>
        <li>
          <p><b>gsac </b>- corrected error in the remove trend <i>rtr
            </i>command. Roundoff error messed up the determination of
            the regression equation a + bx . Previously x was the time
            index, e.g., i=0, i &lt; npts. For long time series this let
            to large errors in the determinant. I replaced this by
            defining x as i/npts with varies between 0 and 1 for the
            time series.</p>
        </li>
      </ul>
      <h4 class="western">July 1, 2007</h4>
      <ul>
        <li>
          <p><b>gsac</b>- implemented a new option to ppk (plotpk),
            e.g., </p>
          <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;
            &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; ppk
            pq&nbsp;&nbsp;&nbsp; or&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ppk
            pquality</p>
          <p style="margin-bottom: 0in">This is functionally similar to
            the previously introduced&nbsp; 'ppk quality'&nbsp; except
            that the purpose is to simultaneously define a useful trace
            and to reset the P-time. For my source inversion, I set the
            theoretical P-time using the AK135 predicted times.&nbsp;
            This is OK for source inversion since the inversion code
            permits a simple waveform time shift. However for broadband
            depth or energy determination, it is necessary to start at
            the P time.&nbsp; To speed up the review, I added this new
            option. So now move the crosshair to the P-wave first
            arrival, and then click any mouse button. Simultaneously the
            P-arrival time is reset and the trace is marked as one to be
            used (IHDR20 is set to +1).</p>
        </li>
      </ul>
      <h4 class="western">April 23, 2007</h4>
      <ul>
        <li>
          <p><b>saciterd </b>- repaired an error with the use of the -2
            flag. This was not done correctly in the earlier code. A
            change was made in late 2006 - early 2007 on line 490. This
            was not correctly done. This was repaired today. Running the
            code with the tutorial data set yields the same figures as
            in the tutorial.&nbsp; Matt Sibol of Multi max.com noted the
            discrepancy.</p>
        </li>
      </ul>
      <h4 class="western">March 31, 2007</h4>
      <ul>
        <li>
          <p><b>saclhdr </b>- modified the format statement for
            printing reals from %f to %g so that a band amplitude
            because of dividing by zero gives +1e+38 and -1e38 for
            DEPMAX and DEPMIN</p>
        </li>
      </ul>
      <h4 class="western">March 19, 2007</h4>
      <ul>
        <li>
          <p><b>gsac</b> - Added an option to ppk (plotpk), e.g.,<br>
            &nbsp;&nbsp;&nbsp; ppk q<br>
            For source inversion, one must examine many traces to decide
            which to use since the inversion results are strongly
            influenced by bad data.&nbsp; For teleseismic and regional
            data, one may review hundreds of traces. So <b>gsac </b>was
















            modified to permit a rapid assessment of the trace quality.
            The assessment is placed in the integer header value IHDR20
            (gsac notation) and a subsequent shell script examines the
            value there to decide if the trace should be moved to the
            final directory for source inversion. </p>
          <p>The purpose is to use the <i>plotpk</i> display to quickly
            define whether&nbsp; to use a trace for a source inversion.
            For teleseismic inversion one must examine the quality of
            the P-wave arrivals, so one reads the traces, band-passes,
            sorts with distance, applies a suitable xlim and executes
            the command<br>
            &nbsp;&nbsp;&nbsp; GSAC&gt; ppk&nbsp;&nbsp; relative perplot
            4 q <br>
            The result is the image</p>
          <p align="center"><img src="cpsbug_html_73920d7e258b0ec4.png"
              name="graphics1" width="796" border="0" align="bottom"
              height="636"> </p>
          <p>The default behavior is that a mouse click says accept - of
            course one can use the 'a' key to accept and the 'r' key to
            reject. The default behavior of the mouse click can be
            changed using the menu at the bottom. When a trace is
            accepted or rejected, a red '+' or a blue 'X' is drawn at
            the lower left corner of the trace.&nbsp; The effect of
            these operations is to set the integer header position 20,
            which I call IHDR20 to +1 for accept and 0 for reject. The
            default value of this header field is -12345&nbsp; This
            changes added about 300 lines of trivial code to
            gsac_plotpk.c. (In the image above, the P times are from the
            velocity model. The slight offset is no problem for the
            inversion since the inversion programs implement a time
            shift). This process of performing QC for P, SH and SV is
            shown the shell script <a href="Examples/IDOQC">IDOQC</a></p>
          <p>The value of this approach to assess trace quality was
            immediately apparent by the resulting improved source
            inversions. The current version of <b>gsac</b> is V1.1.18
            31 MAR 2007</p>
        </li>
      </ul>
      <h4 class="western">March 15, 2007</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>time96 - </b>corrected the
            on-line help to reflect the <i>-P -SV </i>and <i>-SH
              flags</i> </p>
        </li>
        <li>
          <p><b>wvfmch96, wvfmtd96, wvfmt96 </b>and <b>wvfgrd96 - </b>added

































            error checking on the input files - reject a data set if the
            number of sample points is &lt;= 4 or if DEPMAX=DEPMIN,
            which indicates a faulty data set. Current version of <b>wvfmtd96&nbsp;
































            </b>and <b>wvfmt96&nbsp;</b> were modified to use both the
            external <i>a priori&nbsp; </i>and internal variance
            weighting schemes. </p>
        </li>
      </ul>
      <h4 class="western">February 22. 2007</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>time96 – </b>now supports
            the <i>-P -SV </i>and <i>-SH flags </i>to give first
            arrival time and corresponding ray parameter for the first
            arrival. Previously only supported P-wave. Why? I wanted to
            automate source inversion by having this program define
            first arrival times rather than interactively reading them.
            This is possible because I already know the location. The
            section of the shell script that does this is</p>
          <pre class="western">for i in *sac
do
GCARC=`saclhdr -GCARC $i`
EVDP=`saclhdr -EVDP $i`
A=`time96 -M ${MODEL} -GCARC ${GCARC} -T -EVDP ${EVDP}`
T0=`time96 -M ${MODEL} -GCARC ${GCARC} -T -EVDP ${EVDP} -SV`
echo ${GCARC} ${EVDP} ${A} ${T0}
gsac &lt;&lt; EOF
rh $i
synchronize O
ch A ${A} T0 ${T0} T1 ${T0}
wh
quit
EOF
done</pre>
          <p> The 'synchronize O' is used to reset the time stamp so
            that 'O' , the offset of the origin time with respect to the
            reference time, is zero. In this case then the 'A' will be
            the travel time of the P first arrival. </p>
        </li>
      </ul>
      <h4 class="western">February 20. 2007</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">The <i>fft</i> command of <b>gsac</b>
            was augmented to permit the syntax <i>fft length 1 </i>or
            <i>fft length 2 </i>or <i>fft length 4</i> which adds
            additional zeros to increase the frequency domain
            resolution. <b>gsac</b> is now at version <i><b>V1.1.17 22
                Feb 2007</b></i></p>
        </li>
      </ul>
      <h4 class="western">February 8, 2007</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">The computation of epicentral
            distance in kilometers was changed in <b>gsac</b>, <b>udelaz</b>
            and <b>edabac</b>. Prior to this it was estimated from the
            great circle arc, thus assuming a spherical Earth. It is now
            computed numerically by direct evaluation of an incomplete
            elliptic integral of the second kind. Sac uses Rudoe's
            reverse formula (Geodesy, G. Bomford, Carlendon Press, 4th
            ed, 1980, Section 2.15(b), page 121.&nbsp; Rather than
            getting confused about inverse tangents, the idea of Rudoe
            was used, e.g., the plane through the center of the Earth,
            the station and epicenter intersects the spheroid as an
            ellipse, and the linear distance is computed along the
            ellipse. However, this derivation uses vector analysis more
            that it does trigonometric relations.&nbsp; The computation
            of the <i>SAC&nbsp; </i>header value <i>dist</i> agrees
            with the values of <i>sac2000</i> (based on a comparison of
            19554 different combinations of <i>EVLA, EVLO, STLA </i>and















            <i>STLO.</i> </p>
        </li>
        <li>
          <p>Output formats of <b>sacmft96 </b>were changed to
            avoid&nbsp; format overflow (***** in FORTRAN) when&nbsp;
            AZ, BAZ and GCARC&nbsp; had the undefined values of -12345.</p>
        </li>
      </ul>
      <h4 class="western">January 24, 2007 </h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>timmod96 </b>has two new
            out&nbsp; options: </p>
          <pre class="western">timmod96 -TIMEP pfile
timmod96 -TIMES sfile</pre>
          <p style="margin-bottom: 0in"> where pfile or sfile are ASCII
            files with a one distance – time pair per line, e.g.,</p>
          <pre class="western">124.454140 20.464310
238.482346 35.048897
145.274033 24.015045
350.404083 48.721909</pre>
          <p style="margin-bottom: 0in"> which can be created from the
            DIST and A (for P) sac header values through a loop</p>
          <pre class="western">for i in *Z
do
saclhdr -NL -DIST -A &gt;&gt; ptime
done</pre>
          <p style="margin-bottom: 0in"> This option permits plotting
            measured first arrivals on the same plot as the model
            predicted values</p>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>gsac – </b>the <i>merge </i>command
































            now has the command line option GAP gap_value. Before this
            change, a merge of SAC files having gaps resulted in a zero
            fill of the gaps. Now the user value is inserted. This may
            permit a user program to detect the gap. For example if the
            SAC trace consists of integers from the ray 24 bit
            digitizer, the expected extreme values are <font
              face="Arial, sans-serif">±</font><font face="Times Roman">8388608.















              A “MERGE GAP 1.0e+9” would fill the trace with an
              impossible number which can then be flagged.</font></p>
        </li>
        <li>
          <p style="margin-bottom: 0in; font-variant: normal;
            font-style: normal"> <font face="Times Roman"><b>gsac</b> –
              new command <i>outcsv </i>This command causes all traces
              in memory to be output in ASCII as comma separated
              variables (CSV) in the file name <i>f001.csv</i>. Each
              row of output consists of the values at one time sample
              with entries “Time,amp_trace_1,amp_trace2 ...” The reason
              for this command was to create a simple output format that
              could be read by Excel or OpenOffice spreadsheet programs
              so that students can perform simple time series analysis
              and plots. Note that OpenOffice does not permit more than
              65536 to be read in</font></p>
        </li>
      </ul>
      <h4 class="western">January 13, 2007</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modifications to <b>gsac</b>:
            Introduced new commands <i>grid, xgrid, ygrid, background.
            </i>The grid options permit setting a grid on plots and also
            too define the color and type of the grid lines. The
            background command permits setting a background color in the
            plotting frames. </p>
        </li>
        <li>
          <p>GSAC&gt; <br>
            GSAC - Computer Programs in Seismology [V1.1.15 17 JAN 2007]<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Copyright 2004, 2005,
            2006, 2007 R. B. Herrmann</p>
          <p>Also corrected appearance of the help screen and got the
            grids to work on the plotsp command. My excuse is that I
            only had battery power in a house without electricity for
            two days because of the ices storm</p>
        </li>
      </ul>
      <h4 class="western">January 3, 2007</h4>
      <ul>
        <li>
          <p>Fixed <b>fmech96</b>, which did not set the back azimuth
            correctly. Now one can create Z R T and Z N E
            three-component synthetics using <b>fmech96</b>, convert
            them to SAC format using <b>f96tosac</b> and used <b>gsac</b>
            to read in the Z N E to make the Z R T and everything
            agrees. </p>
        </li>
      </ul>
      <h4 class="western">January 3, 2007</h4>
      <ul>
        <li>
          <p>Correct error in <b>surf96</b>, <b>joint96</b>. Love only
            dispersion data were not processed correctly. The minor
            change was in surf96.f and joint96.f </p>
        </li>
      </ul>
      <h4 class="western">January 3, 2007</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Changed all dimensions for
            layering to now have 200 layers instead of 100. Note this
            does not apply to the Cerveny programs cprep96, cpulse96,
            cseis96. </p>
        </li>
        <li>
          <p>changed <b>time96</b> so that it now can output the ray
            parameter. This gets around the problem of using <b>udtdd </b>which

































            is an implementation of the Jeffreys-Bullen curves. There is
            now a consistency between the <i>model96 </i>synthetics
            and the travel time prediction. <b>time96 </b>is used to
            predict ray parameter and first arrival for teleseismic
            P-wave synthetics. See the tutorial.</p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2006</h2>
      <hr>
      <hr>
      <h4 class="western">December 28, 2006</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Reformatted help entries in <b>gsac</b>
            to be easier to read. </p>
        </li>
        <li>
          <p>Implemented new commands in <b>gsac</b>: <i>version,
              triangle, boxcar, trapezoid. version </i>lists the
            version number. <i>triangle, boxcar </i>and <i>trapezoid
            </i>are time domain filters that convolve the traces in
            memory with an isosceles triangle defined by its half-width,
            a boxcar defined by its width, and a trapezoid defined by
            the length of its three segments.&nbsp; All of these pulses
            are designed to have unit area and function as a lowpass
            filter. There is some granularity in the implementation that
            means that the sequence of commands</p>
          <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            triangle width 1.0</p>
          <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is
            not the same as two commands</p>
          <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            boxcar width 1.0<br>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

































            boxcar width 1.0</p>
          <p>even though this should be true by virtue of the
            convolution theorem.</p>
        </li>
      </ul>
      <h4 class="western">December 15, 2006 </h4>
      <ul>
        <li>
          <p>Changed SUBS/f96subf.f and recompiled everything using
            file96 format because of incorrect format for writes. This
            now fully implements the change of December 12, 2006.&nbsp;
          </p>
        </li>
      </ul>
      <h4 class="western">December 12, 2006 </h4>
      <ul>
        <li>
          <p>Changed VOLIII/src/spulse96.f VOLV/src/genray96.f
            VOLVI/src/hpulse96.f VOLIX/src/cpulse96.f to set the <i>file96</i>
            header values for evlat evlon stlat and stlon to -12345 in
            order to set up the ultimate SAC header correctly. </p>
        </li>
      </ul>
      <h4 class="western">November 8, 2006</h4>
      <ul>
        <li>
          <p><b>sdpdsp96:</b> Corrected error in test of
            xmin/xmax/ymin/ymax that precluded a plot </p>
        </li>
      </ul>
      <h4 class="western">October 18, 2006 </h4>
      <ul>
        <li>
          <p>Changed map.sh created by gsac map command to remove
            references to RESIN which is already set by the
            GMTXXX/share/dbase/grdraster.info. The latest version of
            gsac is [V1.1.12 19 OCT 2006] </p>
        </li>
      </ul>
      <h4 class="western">October 14, 2006 </h4>
      <ul>
        <li>
          <p>fixed obtuse error in sregn96 slegn96 sdisp96 for an all
            fluid velocity model. this did not affect solid or
            fluid/solid model computations. Also fixed the depth axis
            notation for sdpder96.: </p>
        </li>
      </ul>
      <h4 class="western">October 1, 2006 </h4>
      <ul>
        <li>
          <p>Fixed allocation error in do_mft3.c of <i>do_mft</i> </p>
        </li>
      </ul>
      <h4 class="western">September 16, 2006</h4>
      <ul>
        <li>
          <p><b>gsac</b> Version 1.1.11 – Commands ignore a leading #.
            Also the pole-zero and frequency-amplitude-phase files
            ignore leading blanks. Finally the ABS macro in gsac.h was
            correctly written, meaning that the x -x works properly in <i>plotpk</i>
            whether the first x is the earliest or the latest time. The
            ignore leading blanks in the response files was required to
            overcome some laxness in some pole-zero files. Finally the
            ignore # serves the same purpose as in the sh or bash shells
            – e.g., to have an inline comment. This means that <b>gsac</b>
            commands in a shell script can now have comments. For
            example, we can now</p>
          <pre class="western">     #!/bin/sh
     #####
     #    generate a pulse and low pass filter it
     #####
     gsac &lt;&lt; EOF
     #####
     #        generate a pulse
     #####
          fg triangle delta 0.05 npts 1024</pre>
          <ul>
            <pre class="western" style="margin-top: 0in; margin-bottom: 0.2in">            #####</pre>
          </ul>
          <pre class="western">                  #        lowpass at 1 Hz
                  ##### 
                  lp c 1 n 2
                  #####
                  #         save as the file LP.sac
                  #####
                  w LP .sac  # a comment can be placed here too
                  quit 
     EOF  </pre>
        </li>
      </ul>
      <h4 class="western">August 20, 2006</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified the CALPLOT routines <b>plotnps</b>
            and <b>plotdbg</b> to work in a 64-bit environment by
            removing and reference to the old MS-DOS. The problem was
            that negative numbers were incorrectly written with the
            "%ld" format specification. These were replaced globally by
            "%d". </p>
        </li>
      </ul>
      <h4 class="western">August 8, 2006</h4>
      <ul>
        <li>
          <p>Corrected a major error in the first arrival computations
            in <b>gsac</b> in the <i>interpolation</i> routine. This
            was caused by a time series with more than 10,000,000 and
            involved floating point roundoff problems in the time array
            used for interpolation. </p>
        </li>
      </ul>
      <h4 class="western">August 8, 2006</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Began adapting codes to the <i>gcc/gfortran
































              (4.2)</i> compiler suite. For the most part this just
            required adhering to the strict 72 character line for the
            FORTRAN 77 standard. </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">The gfortran 4.2 uses buffered
            IO, thus overcoming slow IO of the gfortran 4.0 suite </p>
        </li>
        <li>
          <p>The new makefiles force a 4 byte header for the unformatted
            sequential IO instead of the default 8 byte. </p>
        </li>
      </ul>
      <h4 class="western">August 4, 2006</h4>
      <ul>
        <li>
          <p>Corrected a major error in the first arrival computations
            in <b>time96</b>, <b>timmod96</b>, <b>refmod96</b>, <b>hprep96</b>,
            <b>hspec96</b>, <b>tspec96</b>, <b>spulse96</b>. Faulty
            logic gave too early an arrival time if the first arrival
            was the direct wave. This was fixed by computing the
            distance at which the critical ray appears; if this is
            greater than the desired distance, then use the direct
            arrival time. In addition we found that one of the
            refraction times was not computed correctly which velocity
            decreases with depth. The error means that the pole-zero
            option was not correctly implemented. (Thanks to C. J.
            Ammon). </p>
        </li>
      </ul>
      <h4 class="western">June 16, 2006</h4>
      <ul>
        <li>
          <p>Correct a major error in the <i>transfer</i> command in <i>gsac_trans.c</i>
            in <b>gsac</b>. The error means that the pole-zero option
            was not correctly implemented. (Thanks to C. J. Ammon). </p>
        </li>
      </ul>
      <h4 class="western">June 10, 2006</h4>
      <ul>
        <li>
          <p>Added <i>map</i> command to <b>gsac</b>. This command
            creates a well commented GMT script that plots stations,
            epicenters, raypaths and topography. The shell script can be
            easily edited to change the default plotting parameters.</p>
        </li>
      </ul>
      <h4 class="western">May 27, 2006</h4>
      <ul>
        <li>
          <p>Corrected login in gsac_in.c for interpolation. The
            existing routine lost points. </p>
        </li>
        <li>
          <p>Added <i>decimation</i> command to <b>gsac</b></p>
        </li>
      </ul>
      <h4 class="western">April 26, 2006</h4>
      <ul>
        <li>
          <p>Corrected gsac_lh.c and gsac_ch.c to properly handle the
            IEVREG header variable. sac2000 actually has internal list
            of the Flinn-Engdahl regions that print out a nice string
            for the integer variable. gsac now just outputs the integer
            value of this field.</p>
        </li>
        <li>
          <p><b>prfmod96</b> is available. This was written to display
            regional velocity models from the joint inversion of
            receiver functions and surface waves in Korea. The user
            defines a profile in terms of the latitude and longitude at
            the ends of the profile. The coordinates of each model
            (station) and station model file are read in. This program
            plots a contoured velocity map from stations within +-W of
            the profile. The contours are labeled. The use has control
            over the contour intervals and the labeling intervals.</p>
        </li>
        <li>
          <p>Major changes to the <b>VOLVII</b> waveform inversion
            programs. <b>wvfmtd96 </b>and <b>wvfmt96 </b>are now
            multi-pass programs that perform and inversion, determine an
            alignment time shift and weighting, and then perform final
            inversion. The logic of the code follows that developed by
            Harley Benz at USGS for teleseismic inversion. As part of
            the code modifications, <b>wvfgrd96 </b>and <b>wvfmch96</b>
            were also modified.</p>
        </li>
      </ul>
      <h4 class="western">March 19, 2006</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Error in gsac/ gsac_prs.c that
            tried to flush X11 when in plot mode and not X11 mode. This
            caused the program to crash. Also <i>prs relative</i>
            works. I noticed this when I wants to plot observed versus
            predicted teleseismic P-wave traces, windowed about the P
            arrival as a function of distance. This was done to support
            the newly modified <b>wvfmtd96</b> which permits time
            shifting </p>
        </li>
      </ul>
      <h4 class="western">February 27, 2006</h4>
      <ul>
        <li>
          <p>Fixed major error in <i>PROGRAMS.330/CALPLOT/src/XVIG/src/window.c
































            </i>The execl( ...,init_height, 0) was WRONG!. It should
            have been execl(...,init_height, NULL) where NUL is a (char
            *)0. This error appeared using a 64 bit LINUX. Thanks to
            Domenico Di Giacomo, INGV - Istituto Nazionale di Geofisica
            e Vulcanologia, Sezione di Milano. </p>
        </li>
      </ul>
      <h4 class="western">February 27, 2006</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Added a backup or return to
            previous display option to the <i>plot</i> command of <b>gsac</b>.
            This is useful when previewing many traces using the <i>perplot</i>
            option to skip back to re-examining missed features. </p>
        </li>
        <li>
          <p>Changed internal routines to prevent a mis-setting of USER1
            and USER2. USER1 and USER2 are set to be the minimum and
            maximum periods of the filtered trace. When picking P- and
            S-arrival times, one may wish to filter the trace with a
            zero-phase bandpass filter to see the arrival. The pick is
            then saved using the <i>wh</i> command. Until this fix the
            USER1 and USER2 were also set. Then then led to an
            inconsistency that the header information would not reflect
            the trace content. Now the minimum and maximum periods are
            preserved, but only written out when the <i>w</i> command
            rewrites the trace. This fix was introduced in the source
            code for all bandpass filters, the transfer and whiten
            commands. </p>
        </li>
      </ul>
      <h4 class="western">January 3, 2006</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Began adapting codes to the <i>gcc/gfortran
































              (4.0)</i> compiler suite. For the most part this just
            required adhering to the strict 72 character line for the
            FORTRAN 77 standard. There are still problems with the
            surf96/rftn96/joint96 suites </p>
        </li>
        <li>
          <p>Introduced an <i>O</i> or <i>o</i> option to <b>gsac</b>
            to permit synchronize to set the reference time as the
            origin time. </p>
        </li>
      </ul>
      <hr>
      <hr>
      <h2 class="western">2005</h2>
      <hr>
      <hr>
      <h4 class="western">December 14, 2005</h4>
      <ul>
        <li>
          <p>Corrected the PDF documentation for the synthetic
            seismogram overview in
            PROGRAMS.330/DOC/OVERVIEW.pdf/cps330.pdf. This error was
            introduced in June, 2005 with the introduction of the new
            commands time96 and refmod96. Sorry </p>
        </li>
      </ul>
      <h4 class="western">September 25, 2005</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Extended <b>gsac</b> to have a
            GUI based refraction/reflection analysis tool with the refr
            command </p>
        </li>
        <li>
          <p>This required modifications to the CALPLOT library by
            introducing a <i>gcontrol</i> command and <i>hyperbolic</i>
            cursor. </p>
        </li>
      </ul>
      <h4 class="western">August 10, 2005</h4>
      <ul>
        <li>
          <p>fixed but in <b>gsac</b> internal time routine to
            correctly set milliseconds for epoch to human time </p>
        </li>
      </ul>
      <h4 class="western">August 3, 2005</h4>
      <ul>
        <li>
          <p>Modified <b>gsac</b> <i>transfer</i> routine to handle
            GSE frequency-amplitude-phase FAP response file. </p>
        </li>
      </ul>
      <h4 class="western">June 30, 2005</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Fixed cut option in <b>gsac </b>so

































            that <i>cut CAL YEAR MONTH DAY HOUR MINUTE SECOND
              MILLISECOND</i> works correctly. </p>
        </li>
        <li>
          <p><b>time96</b> created to predict P first arrival times for
            flat and spherical earth velocity models. This is used to
            define the starting time window for teleseismic synthetics
            to avoid unnecessary white space before the first arrival.
            The use of this program in a shell script to compute the
            teleseismic P-wave signal but to apply a phase-velocity
            filter to focus on teleseismic P for speed </p>
          <pre class="western">     for GCARC in \
             20 21 22 23 24 25 26 27 28 29 \
             30 31 32 33 34 35 36 37 38 39 \
             40 41 42 43 44 45 46 47 48 49 \
             50 51 52 53 54 55 56 57 58 59 \
             60 61 62 63 64 65 66 67 68 69 \
             70 71 72 73 74 75 76 77 78 79 \
             80 81 82 83 84 85 86 87 88 89 \
             90 91 92 93 94 95 96 97 98 99 \
             100 101 102 103 104 105
     do
     
     #####
     #  convert epicentral distance in degrees to kilometers
     #  for the Earth
     #####      
    
     dist=`echo ${GCARC} | awk '{print 111.195*$1}' ` 
     #####
     #       for this distance and source depth get the ray parameter
     #       and define the phase velocity limits
     #####
             RAYP=`udtdd -EVDP ${HS} -GCARC ${GCARC}`
             CVAL=`echo ${RAYP} | awk '{print 1.0/$1}' `
             CMAX=`echo ${RAYP} | awk '{print 4.0/$1}' `
             C1=`echo ${RAYP} | awk '{print 3.2/$1}' `
             C2=`echo ${RAYP} | awk '{print 0.49/$1}' `
             CMIN=`echo ${RAYP} | awk '{print 0.46/$1}' `
     #####
     #       get P travel time == arrival time</pre>
          <p style="margin-bottom: 0in">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #####
            A=`time96 -M AK135sph.mod -GCARC ${GCARC} -T -EVDP
            ${HS}`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          </p>
        </li>
      </ul>
      <p style="margin-bottom: 0in">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
T0=`echo
































        $A | awk '{printf "%f", $1 - 100}' ` <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
cat
































        &gt; dfile &lt;&lt; EOF ${dist} 1.0 1024 ${T0} 0.0 EOF<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
hprep96
































        -M AK135sph.mod -HS ${HS} -HR 0.0 -EQEX -TF -BH -d dfile&nbsp;
        -CMAX ${CMAX} -C1 ${C1} -C2 ${C2} -CMIN ${CMIN} -NDEC 1 <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
hspec96
































        -H <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
hpulse96
































        -p -V -l 1 &gt;&gt; file96v <br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
hpulse96
































        -p -D -l 1 &gt;&gt; file96d </p>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified <b>sacmft96</b> and <b>do_mft</b>
            to create a temporary file called <i>MFT96.disp</i> instead
            of <i>MFT96.DSP</i> to avoid problems when using a
            case-less file system, e.g., Cygwin under Windows </p>
        </li>
        <li>
          <p>Modified <b>sacmft96</b> so that color contouring and the
            spectral amplitude plots reflect the envelope amplitudes
            within in the chosen group velocity window. Prior to this,
            colors and amplitudes were set by the amplitudes of the
            entire filtered trace. </p>
        </li>
      </ul>
      <h4 class="western">June 16, 2005</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Fixed typos in <b>gsac </b>which
















            had <i>Pp</i> instead of <i>pP</i> in the Teleseismic
            phase menu for plotpk. Also ensured that the reset in <i>prs</i>
            actually reset all parameters </p>
        </li>
        <li>
          <p><b>hspec96 </b>now has an earth flattening routine for
            spherical earth models. Note hprep96 and tspec96 must be
            upgraded to handle a spherical model. </p>
        </li>
      </ul>
      <h4 class="western">March 23, 2005</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Implemented B option to <b>plotpk
















            </b>command of <b>gsac</b> to permit moving back in a
            multi-page display. (requested by Risheng Chu of SLU)</p>
        </li>
        <li>
          <p>Implemented <b>fileid </b>command of <b>gsac</b> to
            permit trace labeling. The syntax was extended to permit
            placement at upper (UC) and lower (LC) center of each plot.
            (Requested by Luis Rivera and&nbsp; Jeroen Ritsema)</p>
        </li>
      </ul>
      <p><b>February 11, 2005</b> </p>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Added boxcar&nbsp; to <b>gsac
              funcgen&nbsp; </b>command - <b>PROGRAMS.330/XOLVIII/gsac.src/gsac_fg.c</b>
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Added debug statements to <b>gsac
















              transfer </b>command to catch types in response input - <b>PROGRAMS.330/XOLVIII/gsac.src/gsac_trans.c</b>
          </p>
        </li>
        <li>
          <p style="margin-bottom: 0in">Modified <b>PROGRAMS.330/CALPLOT/src/cmd/plotxvig.c
































            </b>to introduce a new window behavior. If the window is
            resized before an erase, the next frame will then use the
            window. This means that a non-default window size does not
            have to be changed. The <i>gframe </i>calplot command has
            been changed to perform an automatic erase but to prohibit a
            resize. </p>
        </li>
        <li>
          <p>Corrected <b>gsac xlim </b>commmand to correctly handle
            GMT and CAL arguments and to forbid <b>xlim o -10 o 10 </b>if















            <b>o</b> is not set withing the header</p>
        </li>
      </ul>
      <h4 class="western">February 5, 2005</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in">Modified <b>PROGRAMS.330/CALPLOT/src/XVIG/src/xvig.c</b>
            to unlock the keyboard for the terminal window. Successful,
            except that the first character is lost because of the event
            catching mechanism. More low level X11 work must be done. On
            Solaris with the CDE window manager, the trace window can
            only be moved use the Move under the menu option and not by
            dragging the window - I will not worry about this in the
            future </p>
        </li>
        <li>
          <p>Modified <b>VOLIII/src/spulse96.f&nbsp;
              VOLVI/src/hpulse96.f VOLIX/src/cpulse96.f&nbsp;&nbsp;
              VOLV/src/gpulse96.f </b>to add a -Z flag to indicate that
            the internal parabolic or triangular pulses are to be zero
            phase - this is required if we attempt to model the
            interstation Green's functions obtained by cross-correlation
            of background noise, otherwise there will be a delay causing
            a mismatch of synthetic and observed responses. This also
            necessitated a change in the documentation <b>DOC/OVERVIEW.pdf/cps330o.pdf</b></p>
        </li>
      </ul>
      <h4 class="western">January 31, 2005</h4>
      <ul>
        <li>
          <p style="margin-bottom: 0in"><b>SUBS/SUBS</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>sacsubc.c, sacsubc.h,
                  sacsubf.c</b> Added <em>brsach</em> and <em>arsach</em>
                only header information. Previously brsac was used with
                the overhead of reading all the data. This fixed a
                problem in <em>saclhdr</em> with very large files </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>grphsubc.c</b> fixed
                logic in clipping routine (baker@usgs.gov) </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLI/src</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>stereo.f</b> new program
                to plot stereonets </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLIII/src</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>sio.f</b> corrected minor
                typos </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>sdprad96.f</b> corrected
                minor typos </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>srfgrd96.f</b> corrected
                minor typos </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>sdpspc96.f</b> corrected
                minor typos </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLV/src</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>genray96.f</b> subroutine
                chkdep, hm1 not defined changed to dm1,&nbsp;
                baker@usgs.gov </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>gpulse96.f</b> LER not
                defined in subroutine&nbsp; source - baker@usgs.gov</p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>ttimmod96.f </b>subroutine
















                fstarr - vlmm undefined - changed to vlmn,
                baker@usgs.gov</p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>fmdfit.f </b>extra long
                lines split </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>fmplot</b> changed
                default so that no nodal planes are plotted unless
                requested by strike,. dip, rake, force or moment tensor
                flags. In this simple mode the command <b>fmplot -F
                  fmplot.tmp&nbsp; </b>will just plot first motion
                data. It is then is then up to the analyst to use the
                stereonet produced by <b>stereo</b> to determine the
                nodal planes and then to rerun <b>fmplot</b> for the
                final plot </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVI/src</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>tspec96.f</b> vlmm not
                defined in subroutine fstarr replace with vlmn,
                baker@usgs.gov </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>hprep96.f</b> vlmm not
                defined in subroutine fstarr replace with vlmn,
                baker@usgs.gov </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVII/src</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>mtd.f</b> slip not
                defined in subroutine trans1, baker@usgs.gov </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVIII/src</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in"><b>saclhdr.c</b> use brsach
                instead of brsac - do not need data but want header of
                potentially large trace file </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>saciterd.f</b> nbumps
                undefined in subroutine tdomain, changed to nshift.
                tshift undefined in subroutine tdomain changed the
                theshift, baker@usgs.gov </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>elocate.f</b> emares not
                defined in subroutine sumup - now set to -9.99 <br>
                -VELMOD flag creates the file VEL.MOD. It no longer
                lists the sample velocity model fileN </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>sacfilt.f</b> LER not
                defined in subroutine gcmdln baker@usgs.gov </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>sacdecon.f</b> thshift
                undefined in main routine - change to the shift
                baker@usgs.gov </p>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>VOLVIII/gsac.src</b> </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">Many changes </p>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>Improvements:</b> </p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in"><b>plot, plotpk - </b>low
















                    level plot routines changed to let <b>qdp</b>
                    decimation be controlled by screen resolution </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>plot, plotpk -</b>
                    low level plot routines changed to reduce number of
                    non-drawing penup moves </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>prs
                      (plotrecordsection) - </b>low level plot routines
                    changed to reduce number of non-drawing penup moves
                  </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>cut, xlim </b>- now
                    also take GMT 2004 002 01 02 03 445 &nbsp;and CAL
                    2004 01 02 01 02 03 455 to define the time window </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in">GNU readline implemented
                    - the user may use the 4 arrow keys to move around
                    the command line and to view history of commands</p>
                </li>
              </ul>
            </li>
            <li>
              <p style="margin-bottom: 0in"><b>New commands</b> </p>
              <ul>
                <li>
                  <p style="margin-bottom: 0in"><b>reverse </b>-
                    reverse a time series </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>correlate - </b>cross-correlate

































                    time series </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>sign </b>- one bit
                    sgn() operator </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>stack </b>- stack
                    traces in memory </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>whiten </b>- force
                    flat amplitude spectrum </p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>markt </b>- put up
                    velocity tics at 1, 2, 3, 4, 5, 6, 7 and 8 km/sec (<i>note
































                      that these values are pre-assigned. The user
                      specification is not yet implemented)</i></p>
                </li>
                <li>
                  <p style="margin-bottom: 0in"><b>taper </b>- trace
                    taper implemented</p>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <p style="margin-bottom: 0in"><b>DOC/GSAC.pdf/cps330g.pdf</b>
          </p>
          <ul>
            <li>
              <p style="margin-bottom: 0in">Documentation was modified
                to reflect new <b>gsac</b> commands, change to <b>elocate</b>,
                and description of <b>fmplot </b>(duplicated in the <b>DOC/SOURCE.pdf/cps330s.pdf
































                </b>manual) and <b>stereo</b> </p>
              <ul>
                <ul>
                  <h4 class="western">TO BE DONE</h4>
                </ul>
              </ul>
            </li>
            <li>
              <p style="margin-bottom: 0in">add convolve to gsac </p>
            </li>
            <li>
              <p style="margin-bottom: 0in">test, test, test </p>
            </li>
            <li>
              <p>document, document, document</p>
            </li>
          </ul>
        </li>
      </ul>
    </ul>
  </body>
</html>
